import{c as yr,g as q0,a as fe,e as vr,b as U0,w as Il,r as xl,f as cc,t as ca,d as z0,h as _i,D as k0,k as H0,N as se,j as V0,i as Zo,l as K0,V as B0,R as G0,F as bh,K as W0,x as J0,L as Q0,m as Eh,$ as Y0,p as X0,n as Vn,Z as Ih,J as Z0,X as e_,_ as Sl,o as Lr,q as t_,s as r_,u as on,v as Ft,U as tr,y as vi,z as ur,A as i_,B as cn,C as Pl,E as n_,G as s_,H as a_,I as Cl,M as o_,O as Ol,P as Al,Q as hn,S as ec,T as ra,W as ln,Y as ia,a0 as c_,a1 as u_,a2 as h_,a3 as Xs,a4 as l_,a5 as f_,a6 as $o,a7 as xh,a8 as p_,a9 as d_,aa as g_,ab as Sh,ac as y_,ad as v_,ae as __,af as m_,ag as w_,ah as b_,ai as E_,aj as I_,ak as kn,al as Rl,am as Mo,an as x_,ao as S_}from"./index.9e57d5da.js";import{s as uc,i as Ph,c as P_,a as C_,b as Tl,f as hc,p as O_,J as wi,d as lc,e as fc,g as pc,h as yi,j as ni,k as sa,l as A_,m as R_,H as Mi}from"./http.2f8d6eb3.js";var ua={},dc={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(h){var i,r,s,a,l,m,b,I,T,U,Y,X,Z,B,ee,ce,me,ge,pe,he,le,$,V;(function(N){var ue=typeof yr=="object"?yr:typeof self=="object"?self:typeof this=="object"?this:{};N(f(ue,f(h.exports)));function f(v,_){return v!==ue&&(typeof Object.create=="function"?Object.defineProperty(v,"__esModule",{value:!0}):v.__esModule=!0),function(S,y){return v[S]=_?_(S,y):y}}})(function(N){var ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,v){f.__proto__=v}||function(f,v){for(var _ in v)v.hasOwnProperty(_)&&(f[_]=v[_])};i=function(f,v){ue(f,v);function _(){this.constructor=f}f.prototype=v===null?Object.create(v):(_.prototype=v.prototype,new _)},r=Object.assign||function(f){for(var v,_=1,S=arguments.length;_<S;_++){v=arguments[_];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(f[y]=v[y])}return f},s=function(f,v){var _={};for(var S in f)Object.prototype.hasOwnProperty.call(f,S)&&v.indexOf(S)<0&&(_[S]=f[S]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,S=Object.getOwnPropertySymbols(f);y<S.length;y++)v.indexOf(S[y])<0&&Object.prototype.propertyIsEnumerable.call(f,S[y])&&(_[S[y]]=f[S[y]]);return _},a=function(f,v,_,S){var y=arguments.length,g=y<3?v:S===null?S=Object.getOwnPropertyDescriptor(v,_):S,L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(f,v,_,S);else for(var W=f.length-1;W>=0;W--)(L=f[W])&&(g=(y<3?L(g):y>3?L(v,_,g):L(v,_))||g);return y>3&&g&&Object.defineProperty(v,_,g),g},l=function(f,v){return function(_,S){v(_,S,f)}},m=function(f,v){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(f,v)},b=function(f,v,_,S){function y(g){return g instanceof _?g:new _(function(L){L(g)})}return new(_||(_=Promise))(function(g,L){function W(j){try{C(S.next(j))}catch(Q){L(Q)}}function J(j){try{C(S.throw(j))}catch(Q){L(Q)}}function C(j){j.done?g(j.value):y(j.value).then(W,J)}C((S=S.apply(f,v||[])).next())})},I=function(f,v){var _={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},S,y,g,L;return L={next:W(0),throw:W(1),return:W(2)},typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L;function W(C){return function(j){return J([C,j])}}function J(C){if(S)throw new TypeError("Generator is already executing.");for(;_;)try{if(S=1,y&&(g=C[0]&2?y.return:C[0]?y.throw||((g=y.return)&&g.call(y),0):y.next)&&!(g=g.call(y,C[1])).done)return g;switch(y=0,g&&(C=[C[0]&2,g.value]),C[0]){case 0:case 1:g=C;break;case 4:return _.label++,{value:C[1],done:!1};case 5:_.label++,y=C[1],C=[0];continue;case 7:C=_.ops.pop(),_.trys.pop();continue;default:if(g=_.trys,!(g=g.length>0&&g[g.length-1])&&(C[0]===6||C[0]===2)){_=0;continue}if(C[0]===3&&(!g||C[1]>g[0]&&C[1]<g[3])){_.label=C[1];break}if(C[0]===6&&_.label<g[1]){_.label=g[1],g=C;break}if(g&&_.label<g[2]){_.label=g[2],_.ops.push(C);break}g[2]&&_.ops.pop(),_.trys.pop();continue}C=v.call(f,_)}catch(j){C=[6,j],y=0}finally{S=g=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},V=function(f,v,_,S){S===void 0&&(S=_),f[S]=v[_]},T=function(f,v){for(var _ in f)_!=="default"&&!v.hasOwnProperty(_)&&(v[_]=f[_])},U=function(f){var v=typeof Symbol=="function"&&Symbol.iterator,_=v&&f[v],S=0;if(_)return _.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&S>=f.length&&(f=void 0),{value:f&&f[S++],done:!f}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=function(f,v){var _=typeof Symbol=="function"&&f[Symbol.iterator];if(!_)return f;var S=_.call(f),y,g=[],L;try{for(;(v===void 0||v-- >0)&&!(y=S.next()).done;)g.push(y.value)}catch(W){L={error:W}}finally{try{y&&!y.done&&(_=S.return)&&_.call(S)}finally{if(L)throw L.error}}return g},X=function(){for(var f=[],v=0;v<arguments.length;v++)f=f.concat(Y(arguments[v]));return f},Z=function(){for(var f=0,v=0,_=arguments.length;v<_;v++)f+=arguments[v].length;for(var S=Array(f),y=0,v=0;v<_;v++)for(var g=arguments[v],L=0,W=g.length;L<W;L++,y++)S[y]=g[L];return S},B=function(f){return this instanceof B?(this.v=f,this):new B(f)},ee=function(f,v,_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var S=_.apply(f,v||[]),y,g=[];return y={},L("next"),L("throw"),L("return"),y[Symbol.asyncIterator]=function(){return this},y;function L(re){S[re]&&(y[re]=function(_e){return new Promise(function(ut,be){g.push([re,_e,ut,be])>1||W(re,_e)})})}function W(re,_e){try{J(S[re](_e))}catch(ut){Q(g[0][3],ut)}}function J(re){re.value instanceof B?Promise.resolve(re.value.v).then(C,j):Q(g[0][2],re)}function C(re){W("next",re)}function j(re){W("throw",re)}function Q(re,_e){re(_e),g.shift(),g.length&&W(g[0][0],g[0][1])}},ce=function(f){var v,_;return v={},S("next"),S("throw",function(y){throw y}),S("return"),v[Symbol.iterator]=function(){return this},v;function S(y,g){v[y]=f[y]?function(L){return(_=!_)?{value:B(f[y](L)),done:y==="return"}:g?g(L):L}:g}},me=function(f){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v=f[Symbol.asyncIterator],_;return v?v.call(f):(f=typeof U=="function"?U(f):f[Symbol.iterator](),_={},S("next"),S("throw"),S("return"),_[Symbol.asyncIterator]=function(){return this},_);function S(g){_[g]=f[g]&&function(L){return new Promise(function(W,J){L=f[g](L),y(W,J,L.done,L.value)})}}function y(g,L,W,J){Promise.resolve(J).then(function(C){g({value:C,done:W})},L)}},ge=function(f,v){return Object.defineProperty?Object.defineProperty(f,"raw",{value:v}):f.raw=v,f},pe=function(f){if(f&&f.__esModule)return f;var v={};if(f!=null)for(var _ in f)Object.hasOwnProperty.call(f,_)&&(v[_]=f[_]);return v.default=f,v},he=function(f){return f&&f.__esModule?f:{default:f}},le=function(f,v){if(!v.has(f))throw new TypeError("attempted to get private field on non-instance");return v.get(f)},$=function(f,v,_){if(!v.has(f))throw new TypeError("attempted to set private field on non-instance");return v.set(f,_),_},N("__extends",i),N("__assign",r),N("__rest",s),N("__decorate",a),N("__param",l),N("__metadata",m),N("__awaiter",b),N("__generator",I),N("__exportStar",T),N("__createBinding",V),N("__values",U),N("__read",Y),N("__spread",X),N("__spreadArrays",Z),N("__await",B),N("__asyncGenerator",ee),N("__asyncDelegator",ce),N("__asyncValues",me),N("__makeTemplateObject",ge),N("__importStar",pe),N("__importDefault",he),N("__classPrivateFieldGet",le),N("__classPrivateFieldSet",$)})})(dc);var Kn={};Object.defineProperty(Kn,"__esModule",{value:!0});function T_(h){if(typeof h!="string")throw new Error(`Cannot safe json parse value of type ${typeof h}`);try{return JSON.parse(h)}catch{return h}}Kn.safeJsonParse=T_;function D_(h){return typeof h=="string"?h:JSON.stringify(h,(i,r)=>typeof r>"u"?null:r)}Kn.safeJsonStringify=D_;var Dn={exports:{}},Ch;function N_(){return Ch||(Ch=1,function(){let h;function i(){}h=i,h.prototype.getItem=function(r){return this.hasOwnProperty(r)?String(this[r]):null},h.prototype.setItem=function(r,s){this[r]=String(s)},h.prototype.removeItem=function(r){delete this[r]},h.prototype.clear=function(){const r=this;Object.keys(r).forEach(function(s){r[s]=void 0,delete r[s]})},h.prototype.key=function(r){return r=r||0,Object.keys(this)[r]},h.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof yr<"u"&&yr.localStorage?Dn.exports=yr.localStorage:typeof window<"u"&&window.localStorage?Dn.exports=window.localStorage:Dn.exports=new i}()),Dn.exports}var qo={},Nn={},Oh;function F_(){if(Oh)return Nn;Oh=1,Object.defineProperty(Nn,"__esModule",{value:!0}),Nn.IKeyValueStorage=void 0;class h{}return Nn.IKeyValueStorage=h,Nn}var Fn={},Ah;function L_(){if(Ah)return Fn;Ah=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.parseEntry=void 0;const h=Kn;function i(r){var s;return[r[0],h.safeJsonParse((s=r[1])!==null&&s!==void 0?s:"")]}return Fn.parseEntry=i,Fn}var Rh;function j_(){return Rh||(Rh=1,function(h){Object.defineProperty(h,"__esModule",{value:!0});const i=dc.exports;i.__exportStar(F_(),h),i.__exportStar(L_(),h)}(qo)),qo}Object.defineProperty(ua,"__esModule",{value:!0});ua.KeyValueStorage=void 0;const un=dc.exports,Th=Kn,$_=un.__importDefault(N_()),M_=j_();class Dl{constructor(){this.localStorage=$_.default}getKeys(){return un.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return un.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(M_.parseEntry)})}getItem(i){return un.__awaiter(this,void 0,void 0,function*(){const r=this.localStorage.getItem(i);if(r!==null)return Th.safeJsonParse(r)})}setItem(i,r){return un.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(i,Th.safeJsonStringify(r))})}removeItem(i){return un.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(i)})}}ua.KeyValueStorage=Dl;var q_=ua.default=Dl,fn={},Bn={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(h){var i,r,s,a,l,m,b,I,T,U,Y,X,Z,B,ee,ce,me,ge,pe,he,le,$,V;(function(N){var ue=typeof yr=="object"?yr:typeof self=="object"?self:typeof this=="object"?this:{};N(f(ue,f(h.exports)));function f(v,_){return v!==ue&&(typeof Object.create=="function"?Object.defineProperty(v,"__esModule",{value:!0}):v.__esModule=!0),function(S,y){return v[S]=_?_(S,y):y}}})(function(N){var ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,v){f.__proto__=v}||function(f,v){for(var _ in v)v.hasOwnProperty(_)&&(f[_]=v[_])};i=function(f,v){ue(f,v);function _(){this.constructor=f}f.prototype=v===null?Object.create(v):(_.prototype=v.prototype,new _)},r=Object.assign||function(f){for(var v,_=1,S=arguments.length;_<S;_++){v=arguments[_];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(f[y]=v[y])}return f},s=function(f,v){var _={};for(var S in f)Object.prototype.hasOwnProperty.call(f,S)&&v.indexOf(S)<0&&(_[S]=f[S]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,S=Object.getOwnPropertySymbols(f);y<S.length;y++)v.indexOf(S[y])<0&&Object.prototype.propertyIsEnumerable.call(f,S[y])&&(_[S[y]]=f[S[y]]);return _},a=function(f,v,_,S){var y=arguments.length,g=y<3?v:S===null?S=Object.getOwnPropertyDescriptor(v,_):S,L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(f,v,_,S);else for(var W=f.length-1;W>=0;W--)(L=f[W])&&(g=(y<3?L(g):y>3?L(v,_,g):L(v,_))||g);return y>3&&g&&Object.defineProperty(v,_,g),g},l=function(f,v){return function(_,S){v(_,S,f)}},m=function(f,v){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(f,v)},b=function(f,v,_,S){function y(g){return g instanceof _?g:new _(function(L){L(g)})}return new(_||(_=Promise))(function(g,L){function W(j){try{C(S.next(j))}catch(Q){L(Q)}}function J(j){try{C(S.throw(j))}catch(Q){L(Q)}}function C(j){j.done?g(j.value):y(j.value).then(W,J)}C((S=S.apply(f,v||[])).next())})},I=function(f,v){var _={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},S,y,g,L;return L={next:W(0),throw:W(1),return:W(2)},typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L;function W(C){return function(j){return J([C,j])}}function J(C){if(S)throw new TypeError("Generator is already executing.");for(;_;)try{if(S=1,y&&(g=C[0]&2?y.return:C[0]?y.throw||((g=y.return)&&g.call(y),0):y.next)&&!(g=g.call(y,C[1])).done)return g;switch(y=0,g&&(C=[C[0]&2,g.value]),C[0]){case 0:case 1:g=C;break;case 4:return _.label++,{value:C[1],done:!1};case 5:_.label++,y=C[1],C=[0];continue;case 7:C=_.ops.pop(),_.trys.pop();continue;default:if(g=_.trys,!(g=g.length>0&&g[g.length-1])&&(C[0]===6||C[0]===2)){_=0;continue}if(C[0]===3&&(!g||C[1]>g[0]&&C[1]<g[3])){_.label=C[1];break}if(C[0]===6&&_.label<g[1]){_.label=g[1],g=C;break}if(g&&_.label<g[2]){_.label=g[2],_.ops.push(C);break}g[2]&&_.ops.pop(),_.trys.pop();continue}C=v.call(f,_)}catch(j){C=[6,j],y=0}finally{S=g=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},V=function(f,v,_,S){S===void 0&&(S=_),f[S]=v[_]},T=function(f,v){for(var _ in f)_!=="default"&&!v.hasOwnProperty(_)&&(v[_]=f[_])},U=function(f){var v=typeof Symbol=="function"&&Symbol.iterator,_=v&&f[v],S=0;if(_)return _.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&S>=f.length&&(f=void 0),{value:f&&f[S++],done:!f}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=function(f,v){var _=typeof Symbol=="function"&&f[Symbol.iterator];if(!_)return f;var S=_.call(f),y,g=[],L;try{for(;(v===void 0||v-- >0)&&!(y=S.next()).done;)g.push(y.value)}catch(W){L={error:W}}finally{try{y&&!y.done&&(_=S.return)&&_.call(S)}finally{if(L)throw L.error}}return g},X=function(){for(var f=[],v=0;v<arguments.length;v++)f=f.concat(Y(arguments[v]));return f},Z=function(){for(var f=0,v=0,_=arguments.length;v<_;v++)f+=arguments[v].length;for(var S=Array(f),y=0,v=0;v<_;v++)for(var g=arguments[v],L=0,W=g.length;L<W;L++,y++)S[y]=g[L];return S},B=function(f){return this instanceof B?(this.v=f,this):new B(f)},ee=function(f,v,_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var S=_.apply(f,v||[]),y,g=[];return y={},L("next"),L("throw"),L("return"),y[Symbol.asyncIterator]=function(){return this},y;function L(re){S[re]&&(y[re]=function(_e){return new Promise(function(ut,be){g.push([re,_e,ut,be])>1||W(re,_e)})})}function W(re,_e){try{J(S[re](_e))}catch(ut){Q(g[0][3],ut)}}function J(re){re.value instanceof B?Promise.resolve(re.value.v).then(C,j):Q(g[0][2],re)}function C(re){W("next",re)}function j(re){W("throw",re)}function Q(re,_e){re(_e),g.shift(),g.length&&W(g[0][0],g[0][1])}},ce=function(f){var v,_;return v={},S("next"),S("throw",function(y){throw y}),S("return"),v[Symbol.iterator]=function(){return this},v;function S(y,g){v[y]=f[y]?function(L){return(_=!_)?{value:B(f[y](L)),done:y==="return"}:g?g(L):L}:g}},me=function(f){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v=f[Symbol.asyncIterator],_;return v?v.call(f):(f=typeof U=="function"?U(f):f[Symbol.iterator](),_={},S("next"),S("throw"),S("return"),_[Symbol.asyncIterator]=function(){return this},_);function S(g){_[g]=f[g]&&function(L){return new Promise(function(W,J){L=f[g](L),y(W,J,L.done,L.value)})}}function y(g,L,W,J){Promise.resolve(J).then(function(C){g({value:C,done:W})},L)}},ge=function(f,v){return Object.defineProperty?Object.defineProperty(f,"raw",{value:v}):f.raw=v,f},pe=function(f){if(f&&f.__esModule)return f;var v={};if(f!=null)for(var _ in f)Object.hasOwnProperty.call(f,_)&&(v[_]=f[_]);return v.default=f,v},he=function(f){return f&&f.__esModule?f:{default:f}},le=function(f,v){if(!v.has(f))throw new TypeError("attempted to get private field on non-instance");return v.get(f)},$=function(f,v,_){if(!v.has(f))throw new TypeError("attempted to set private field on non-instance");return v.set(f,_),_},N("__extends",i),N("__assign",r),N("__rest",s),N("__decorate",a),N("__param",l),N("__metadata",m),N("__awaiter",b),N("__generator",I),N("__exportStar",T),N("__createBinding",V),N("__values",U),N("__read",Y),N("__spread",X),N("__spreadArrays",Z),N("__await",B),N("__asyncGenerator",ee),N("__asyncDelegator",ce),N("__asyncValues",me),N("__makeTemplateObject",ge),N("__importStar",pe),N("__importDefault",he),N("__classPrivateFieldGet",le),N("__classPrivateFieldSet",$)})})(Bn);var Ln={},Uo={},jn={};class qi{}const U_=Object.freeze(Object.defineProperty({__proto__:null,IEvents:qi},Symbol.toStringTag,{value:"Module"})),z_=q0(U_);var Dh;function k_(){if(Dh)return jn;Dh=1,Object.defineProperty(jn,"__esModule",{value:!0}),jn.IHeartBeat=void 0;const h=z_;class i extends h.IEvents{constructor(s){super()}}return jn.IHeartBeat=i,jn}var Nh;function Nl(){return Nh||(Nh=1,function(h){Object.defineProperty(h,"__esModule",{value:!0}),Bn.exports.__exportStar(k_(),h)}(Uo)),Uo}var zo={},ji={},Fh;function H_(){if(Fh)return ji;Fh=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.HEARTBEAT_EVENTS=ji.HEARTBEAT_INTERVAL=void 0;const h=fe;return ji.HEARTBEAT_INTERVAL=h.FIVE_SECONDS,ji.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"},ji}var Lh;function Fl(){return Lh||(Lh=1,function(h){Object.defineProperty(h,"__esModule",{value:!0}),Bn.exports.__exportStar(H_(),h)}(zo)),zo}var jh;function V_(){if(jh)return Ln;jh=1,Object.defineProperty(Ln,"__esModule",{value:!0}),Ln.HeartBeat=void 0;const h=Bn.exports,i=vr.exports,r=fe,s=Nl(),a=Fl();class l extends s.IHeartBeat{constructor(b){super(b),this.events=new i.EventEmitter,this.interval=a.HEARTBEAT_INTERVAL,this.interval=b?.interval||a.HEARTBEAT_INTERVAL}static init(b){return h.__awaiter(this,void 0,void 0,function*(){const I=new l(b);return yield I.init(),I})}init(){return h.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(b,I){this.events.on(b,I)}once(b,I){this.events.once(b,I)}off(b,I){this.events.off(b,I)}removeListener(b,I){this.events.removeListener(b,I)}initialize(){return h.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),r.toMiliseconds(this.interval))})}pulse(){this.events.emit(a.HEARTBEAT_EVENTS.pulse)}}return Ln.HeartBeat=l,Ln}(function(h){Object.defineProperty(h,"__esModule",{value:!0});const i=Bn.exports;i.__exportStar(V_(),h),i.__exportStar(Nl(),h),i.__exportStar(Fl(),h)})(fn);var Fe={},Ll={exports:{}};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */(function(h){var i,r,s,a,l,m,b,I,T,U,Y,X,Z,B,ee,ce,me,ge,pe,he,le,$,V;(function(N){var ue=typeof yr=="object"?yr:typeof self=="object"?self:typeof this=="object"?this:{};N(f(ue,f(h.exports)));function f(v,_){return v!==ue&&(typeof Object.create=="function"?Object.defineProperty(v,"__esModule",{value:!0}):v.__esModule=!0),function(S,y){return v[S]=_?_(S,y):y}}})(function(N){var ue=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,v){f.__proto__=v}||function(f,v){for(var _ in v)v.hasOwnProperty(_)&&(f[_]=v[_])};i=function(f,v){ue(f,v);function _(){this.constructor=f}f.prototype=v===null?Object.create(v):(_.prototype=v.prototype,new _)},r=Object.assign||function(f){for(var v,_=1,S=arguments.length;_<S;_++){v=arguments[_];for(var y in v)Object.prototype.hasOwnProperty.call(v,y)&&(f[y]=v[y])}return f},s=function(f,v){var _={};for(var S in f)Object.prototype.hasOwnProperty.call(f,S)&&v.indexOf(S)<0&&(_[S]=f[S]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function")for(var y=0,S=Object.getOwnPropertySymbols(f);y<S.length;y++)v.indexOf(S[y])<0&&Object.prototype.propertyIsEnumerable.call(f,S[y])&&(_[S[y]]=f[S[y]]);return _},a=function(f,v,_,S){var y=arguments.length,g=y<3?v:S===null?S=Object.getOwnPropertyDescriptor(v,_):S,L;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")g=Reflect.decorate(f,v,_,S);else for(var W=f.length-1;W>=0;W--)(L=f[W])&&(g=(y<3?L(g):y>3?L(v,_,g):L(v,_))||g);return y>3&&g&&Object.defineProperty(v,_,g),g},l=function(f,v){return function(_,S){v(_,S,f)}},m=function(f,v){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(f,v)},b=function(f,v,_,S){function y(g){return g instanceof _?g:new _(function(L){L(g)})}return new(_||(_=Promise))(function(g,L){function W(j){try{C(S.next(j))}catch(Q){L(Q)}}function J(j){try{C(S.throw(j))}catch(Q){L(Q)}}function C(j){j.done?g(j.value):y(j.value).then(W,J)}C((S=S.apply(f,v||[])).next())})},I=function(f,v){var _={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},S,y,g,L;return L={next:W(0),throw:W(1),return:W(2)},typeof Symbol=="function"&&(L[Symbol.iterator]=function(){return this}),L;function W(C){return function(j){return J([C,j])}}function J(C){if(S)throw new TypeError("Generator is already executing.");for(;_;)try{if(S=1,y&&(g=C[0]&2?y.return:C[0]?y.throw||((g=y.return)&&g.call(y),0):y.next)&&!(g=g.call(y,C[1])).done)return g;switch(y=0,g&&(C=[C[0]&2,g.value]),C[0]){case 0:case 1:g=C;break;case 4:return _.label++,{value:C[1],done:!1};case 5:_.label++,y=C[1],C=[0];continue;case 7:C=_.ops.pop(),_.trys.pop();continue;default:if(g=_.trys,!(g=g.length>0&&g[g.length-1])&&(C[0]===6||C[0]===2)){_=0;continue}if(C[0]===3&&(!g||C[1]>g[0]&&C[1]<g[3])){_.label=C[1];break}if(C[0]===6&&_.label<g[1]){_.label=g[1],g=C;break}if(g&&_.label<g[2]){_.label=g[2],_.ops.push(C);break}g[2]&&_.ops.pop(),_.trys.pop();continue}C=v.call(f,_)}catch(j){C=[6,j],y=0}finally{S=g=0}if(C[0]&5)throw C[1];return{value:C[0]?C[1]:void 0,done:!0}}},V=function(f,v,_,S){S===void 0&&(S=_),f[S]=v[_]},T=function(f,v){for(var _ in f)_!=="default"&&!v.hasOwnProperty(_)&&(v[_]=f[_])},U=function(f){var v=typeof Symbol=="function"&&Symbol.iterator,_=v&&f[v],S=0;if(_)return _.call(f);if(f&&typeof f.length=="number")return{next:function(){return f&&S>=f.length&&(f=void 0),{value:f&&f[S++],done:!f}}};throw new TypeError(v?"Object is not iterable.":"Symbol.iterator is not defined.")},Y=function(f,v){var _=typeof Symbol=="function"&&f[Symbol.iterator];if(!_)return f;var S=_.call(f),y,g=[],L;try{for(;(v===void 0||v-- >0)&&!(y=S.next()).done;)g.push(y.value)}catch(W){L={error:W}}finally{try{y&&!y.done&&(_=S.return)&&_.call(S)}finally{if(L)throw L.error}}return g},X=function(){for(var f=[],v=0;v<arguments.length;v++)f=f.concat(Y(arguments[v]));return f},Z=function(){for(var f=0,v=0,_=arguments.length;v<_;v++)f+=arguments[v].length;for(var S=Array(f),y=0,v=0;v<_;v++)for(var g=arguments[v],L=0,W=g.length;L<W;L++,y++)S[y]=g[L];return S},B=function(f){return this instanceof B?(this.v=f,this):new B(f)},ee=function(f,v,_){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var S=_.apply(f,v||[]),y,g=[];return y={},L("next"),L("throw"),L("return"),y[Symbol.asyncIterator]=function(){return this},y;function L(re){S[re]&&(y[re]=function(_e){return new Promise(function(ut,be){g.push([re,_e,ut,be])>1||W(re,_e)})})}function W(re,_e){try{J(S[re](_e))}catch(ut){Q(g[0][3],ut)}}function J(re){re.value instanceof B?Promise.resolve(re.value.v).then(C,j):Q(g[0][2],re)}function C(re){W("next",re)}function j(re){W("throw",re)}function Q(re,_e){re(_e),g.shift(),g.length&&W(g[0][0],g[0][1])}},ce=function(f){var v,_;return v={},S("next"),S("throw",function(y){throw y}),S("return"),v[Symbol.iterator]=function(){return this},v;function S(y,g){v[y]=f[y]?function(L){return(_=!_)?{value:B(f[y](L)),done:y==="return"}:g?g(L):L}:g}},me=function(f){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var v=f[Symbol.asyncIterator],_;return v?v.call(f):(f=typeof U=="function"?U(f):f[Symbol.iterator](),_={},S("next"),S("throw"),S("return"),_[Symbol.asyncIterator]=function(){return this},_);function S(g){_[g]=f[g]&&function(L){return new Promise(function(W,J){L=f[g](L),y(W,J,L.done,L.value)})}}function y(g,L,W,J){Promise.resolve(J).then(function(C){g({value:C,done:W})},L)}},ge=function(f,v){return Object.defineProperty?Object.defineProperty(f,"raw",{value:v}):f.raw=v,f},pe=function(f){if(f&&f.__esModule)return f;var v={};if(f!=null)for(var _ in f)Object.hasOwnProperty.call(f,_)&&(v[_]=f[_]);return v.default=f,v},he=function(f){return f&&f.__esModule?f:{default:f}},le=function(f,v){if(!v.has(f))throw new TypeError("attempted to get private field on non-instance");return v.get(f)},$=function(f,v,_){if(!v.has(f))throw new TypeError("attempted to set private field on non-instance");return v.set(f,_),_},N("__extends",i),N("__assign",r),N("__rest",s),N("__decorate",a),N("__param",l),N("__metadata",m),N("__awaiter",b),N("__generator",I),N("__exportStar",T),N("__createBinding",V),N("__values",U),N("__read",Y),N("__spread",X),N("__spreadArrays",Z),N("__await",B),N("__asyncGenerator",ee),N("__asyncDelegator",ce),N("__asyncValues",me),N("__makeTemplateObject",ge),N("__importStar",pe),N("__importDefault",he),N("__classPrivateFieldGet",le),N("__classPrivateFieldSet",$)})})(Ll);var ko,$h;function K_(){if($h)return ko;$h=1;function h(r){try{return JSON.stringify(r)}catch{return'"[Circular]"'}}ko=i;function i(r,s,a){var l=a&&a.stringify||h,m=1;if(typeof r=="object"&&r!==null){var b=s.length+m;if(b===1)return r;var I=new Array(b);I[0]=l(r);for(var T=1;T<b;T++)I[T]=l(s[T]);return I.join(" ")}if(typeof r!="string")return r;var U=s.length;if(U===0)return r;for(var Y="",X=1-m,Z=-1,B=r&&r.length||0,ee=0;ee<B;){if(r.charCodeAt(ee)===37&&ee+1<B){switch(Z=Z>-1?Z:0,r.charCodeAt(ee+1)){case 100:case 102:if(X>=U||s[X]==null)break;Z<ee&&(Y+=r.slice(Z,ee)),Y+=Number(s[X]),Z=ee+2,ee++;break;case 105:if(X>=U||s[X]==null)break;Z<ee&&(Y+=r.slice(Z,ee)),Y+=Math.floor(Number(s[X])),Z=ee+2,ee++;break;case 79:case 111:case 106:if(X>=U||s[X]===void 0)break;Z<ee&&(Y+=r.slice(Z,ee));var ce=typeof s[X];if(ce==="string"){Y+="'"+s[X]+"'",Z=ee+2,ee++;break}if(ce==="function"){Y+=s[X].name||"<anonymous>",Z=ee+2,ee++;break}Y+=l(s[X]),Z=ee+2,ee++;break;case 115:if(X>=U)break;Z<ee&&(Y+=r.slice(Z,ee)),Y+=String(s[X]),Z=ee+2,ee++;break;case 37:Z<ee&&(Y+=r.slice(Z,ee)),Y+="%",Z=ee+2,ee++,X--;break}++X}++ee}return Z===-1?r:(Z<B&&(Y+=r.slice(Z)),Y)}return ko}var Ho,Mh;function B_(){if(Mh)return Ho;Mh=1;const h=K_();Ho=a;const i=le().console||{},r={mapHttpRequest:B,mapHttpResponse:B,wrapRequestSerializer:ee,wrapResponseSerializer:ee,wrapErrorSerializer:ee,req:B,res:B,err:X};function s($,V){return Array.isArray($)?$.filter(function(ue){return ue!=="!stdSerializers.err"}):$===!0?Object.keys(V):!1}function a($){$=$||{},$.browser=$.browser||{};const V=$.browser.transmit;if(V&&typeof V.send!="function")throw Error("pino: transmit option must have a send function");const N=$.browser.write||i;$.browser.write&&($.browser.asObject=!0);const ue=$.serializers||{},f=s($.browser.serialize,ue);let v=$.browser.serialize;Array.isArray($.browser.serialize)&&$.browser.serialize.indexOf("!stdSerializers.err")>-1&&(v=!1);const _=["error","fatal","warn","info","debug","trace"];typeof N=="function"&&(N.error=N.fatal=N.warn=N.info=N.debug=N.trace=N),$.enabled===!1&&($.level="silent");const S=$.level||"info",y=Object.create(N);y.log||(y.log=ce),Object.defineProperty(y,"levelVal",{get:L}),Object.defineProperty(y,"level",{get:W,set:J});const g={transmit:V,serialize:f,asObject:$.browser.asObject,levels:_,timestamp:Z($)};y.levels=a.levels,y.level=S,y.setMaxListeners=y.getMaxListeners=y.emit=y.addListener=y.on=y.prependListener=y.once=y.prependOnceListener=y.removeListener=y.removeAllListeners=y.listeners=y.listenerCount=y.eventNames=y.write=y.flush=ce,y.serializers=ue,y._serialize=f,y._stdErrSerialize=v,y.child=C,V&&(y._logEvent=Y());function L(){return this.level==="silent"?1/0:this.levels.values[this.level]}function W(){return this._level}function J(j){if(j!=="silent"&&!this.levels.values[j])throw Error("unknown level "+j);this._level=j,l(g,y,"error","log"),l(g,y,"fatal","error"),l(g,y,"warn","error"),l(g,y,"info","log"),l(g,y,"debug","log"),l(g,y,"trace","log")}function C(j,Q){if(!j)throw new Error("missing bindings for child Pino");Q=Q||{},f&&j.serializers&&(Q.serializers=j.serializers);const re=Q.serializers;if(f&&re){var _e=Object.assign({},ue,re),ut=$.browser.serialize===!0?Object.keys(_e):f;delete j.serializers,I([j],ut,_e,this._stdErrSerialize)}function be(xt){this._childLevel=(xt._childLevel|0)+1,this.error=T(xt,j,"error"),this.fatal=T(xt,j,"fatal"),this.warn=T(xt,j,"warn"),this.info=T(xt,j,"info"),this.debug=T(xt,j,"debug"),this.trace=T(xt,j,"trace"),_e&&(this.serializers=_e,this._serialize=ut),V&&(this._logEvent=Y([].concat(xt._logEvent.bindings,j)))}return be.prototype=this,new be(this)}return y}a.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},a.stdSerializers=r,a.stdTimeFunctions=Object.assign({},{nullTime:me,epochTime:ge,unixTime:pe,isoTime:he});function l($,V,N,ue){const f=Object.getPrototypeOf(V);V[N]=V.levelVal>V.levels.values[N]?ce:f[N]?f[N]:i[N]||i[ue]||ce,m($,V,N)}function m($,V,N){!$.transmit&&V[N]===ce||(V[N]=function(ue){return function(){const v=$.timestamp(),_=new Array(arguments.length),S=Object.getPrototypeOf&&Object.getPrototypeOf(this)===i?i:this;for(var y=0;y<_.length;y++)_[y]=arguments[y];if($.serialize&&!$.asObject&&I(_,this._serialize,this.serializers,this._stdErrSerialize),$.asObject?ue.call(S,b(this,N,_,v)):ue.apply(S,_),$.transmit){const g=$.transmit.level||V.level,L=a.levels.values[g],W=a.levels.values[N];if(W<L)return;U(this,{ts:v,methodLevel:N,methodValue:W,transmitLevel:g,transmitValue:a.levels.values[$.transmit.level||V.level],send:$.transmit.send,val:V.levelVal},_)}}}(V[N]))}function b($,V,N,ue){$._serialize&&I(N,$._serialize,$.serializers,$._stdErrSerialize);const f=N.slice();let v=f[0];const _={};ue&&(_.time=ue),_.level=a.levels.values[V];let S=($._childLevel|0)+1;if(S<1&&(S=1),v!==null&&typeof v=="object"){for(;S--&&typeof f[0]=="object";)Object.assign(_,f.shift());v=f.length?h(f.shift(),f):void 0}else typeof v=="string"&&(v=h(f.shift(),f));return v!==void 0&&(_.msg=v),_}function I($,V,N,ue){for(const f in $)if(ue&&$[f]instanceof Error)$[f]=a.stdSerializers.err($[f]);else if(typeof $[f]=="object"&&!Array.isArray($[f]))for(const v in $[f])V&&V.indexOf(v)>-1&&v in N&&($[f][v]=N[v]($[f][v]))}function T($,V,N){return function(){const ue=new Array(1+arguments.length);ue[0]=V;for(var f=1;f<ue.length;f++)ue[f]=arguments[f-1];return $[N].apply(this,ue)}}function U($,V,N){const ue=V.send,f=V.ts,v=V.methodLevel,_=V.methodValue,S=V.val,y=$._logEvent.bindings;I(N,$._serialize||Object.keys($.serializers),$.serializers,$._stdErrSerialize===void 0?!0:$._stdErrSerialize),$._logEvent.ts=f,$._logEvent.messages=N.filter(function(g){return y.indexOf(g)===-1}),$._logEvent.level.label=v,$._logEvent.level.value=_,ue(v,$._logEvent,S),$._logEvent=Y(y)}function Y($){return{ts:0,messages:[],bindings:$||[],level:{label:"",value:0}}}function X($){const V={type:$.constructor.name,msg:$.message,stack:$.stack};for(const N in $)V[N]===void 0&&(V[N]=$[N]);return V}function Z($){return typeof $.timestamp=="function"?$.timestamp:$.timestamp===!1?me:ge}function B(){return{}}function ee($){return $}function ce(){}function me(){return!1}function ge(){return Date.now()}function pe(){return Math.round(Date.now()/1e3)}function he(){return new Date(Date.now()).toISOString()}function le(){function $(V){return typeof V<"u"&&V}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return $(self)||$(window)||$(this)||{}}}return Ho}var $i={},qh;function jl(){return qh||(qh=1,Object.defineProperty($i,"__esModule",{value:!0}),$i.PINO_CUSTOM_CONTEXT_KEY=$i.PINO_LOGGER_DEFAULTS=void 0,$i.PINO_LOGGER_DEFAULTS={level:"info"},$i.PINO_CUSTOM_CONTEXT_KEY="custom_context"),$i}var er={},Uh;function G_(){if(Uh)return er;Uh=1,Object.defineProperty(er,"__esModule",{value:!0}),er.generateChildLogger=er.formatChildLoggerContext=er.getLoggerContext=er.setBrowserLoggerContext=er.getBrowserLoggerContext=er.getDefaultLoggerOptions=void 0;const h=jl();function i(b){return Object.assign(Object.assign({},b),{level:b?.level||h.PINO_LOGGER_DEFAULTS.level})}er.getDefaultLoggerOptions=i;function r(b,I=h.PINO_CUSTOM_CONTEXT_KEY){return b[I]||""}er.getBrowserLoggerContext=r;function s(b,I,T=h.PINO_CUSTOM_CONTEXT_KEY){return b[T]=I,b}er.setBrowserLoggerContext=s;function a(b,I=h.PINO_CUSTOM_CONTEXT_KEY){let T="";return typeof b.bindings>"u"?T=r(b,I):T=b.bindings().context||"",T}er.getLoggerContext=a;function l(b,I,T=h.PINO_CUSTOM_CONTEXT_KEY){const U=a(b,T);return U.trim()?`${U}/${I}`:I}er.formatChildLoggerContext=l;function m(b,I,T=h.PINO_CUSTOM_CONTEXT_KEY){const U=l(b,I,T),Y=b.child({context:U});return s(Y,U,T)}return er.generateChildLogger=m,er}(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.pino=void 0;const i=Ll.exports,r=i.__importDefault(B_());Object.defineProperty(h,"pino",{enumerable:!0,get:function(){return r.default}}),i.__exportStar(jl(),h),i.__exportStar(G_(),h)})(Fe);class W_ extends qi{constructor(i){super(),this.opts=i,this.protocol="wc",this.version=2}}class J_ extends qi{constructor(i,r){super(),this.core=i,this.logger=r,this.records=new Map}}class Q_{constructor(i,r){this.logger=i,this.core=r}}class Y_ extends qi{constructor(i,r){super(),this.relayer=i,this.logger=r}}class X_ extends qi{constructor(i){super()}}class Z_{constructor(i,r,s,a){this.core=i,this.logger=r,this.name=s}}class em extends qi{constructor(i,r){super(),this.relayer=i,this.logger=r}}class tm extends qi{constructor(i,r){super(),this.core=i,this.logger=r}}class rm{constructor(i,r){this.projectId=i,this.logger=r}}class im{constructor(i){this.opts=i,this.protocol="wc",this.version=2}}class nm{constructor(i){this.client=i}}var gc={},$l={};(function(h){Object.defineProperty(h,"__esModule",{value:!0});var i=U0,r=Il;h.DIGEST_LENGTH=64,h.BLOCK_SIZE=128;var s=function(){function b(){this.digestLength=h.DIGEST_LENGTH,this.blockSize=h.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return b.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},b.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},b.prototype.clean=function(){r.wipe(this._buffer),r.wipe(this._tempHi),r.wipe(this._tempLo),this.reset()},b.prototype.update=function(I,T){if(T===void 0&&(T=I.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var U=0;if(this._bytesHashed+=T,this._bufferLength>0){for(;this._bufferLength<h.BLOCK_SIZE&&T>0;)this._buffer[this._bufferLength++]=I[U++],T--;this._bufferLength===this.blockSize&&(l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(T>=this.blockSize&&(U=l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,I,U,T),T%=this.blockSize);T>0;)this._buffer[this._bufferLength++]=I[U++],T--;return this},b.prototype.finish=function(I){if(!this._finished){var T=this._bytesHashed,U=this._bufferLength,Y=T/536870912|0,X=T<<3,Z=T%128<112?128:256;this._buffer[U]=128;for(var B=U+1;B<Z-8;B++)this._buffer[B]=0;i.writeUint32BE(Y,this._buffer,Z-8),i.writeUint32BE(X,this._buffer,Z-4),l(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,Z),this._finished=!0}for(var B=0;B<this.digestLength/8;B++)i.writeUint32BE(this._stateHi[B],I,B*8),i.writeUint32BE(this._stateLo[B],I,B*8+4);return this},b.prototype.digest=function(){var I=new Uint8Array(this.digestLength);return this.finish(I),I},b.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},b.prototype.restoreState=function(I){return this._stateHi.set(I.stateHi),this._stateLo.set(I.stateLo),this._bufferLength=I.bufferLength,I.buffer&&this._buffer.set(I.buffer),this._bytesHashed=I.bytesHashed,this._finished=!1,this},b.prototype.cleanSavedState=function(I){r.wipe(I.stateHi),r.wipe(I.stateLo),I.buffer&&r.wipe(I.buffer),I.bufferLength=0,I.bytesHashed=0},b}();h.SHA512=s;var a=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function l(b,I,T,U,Y,X,Z){for(var B=T[0],ee=T[1],ce=T[2],me=T[3],ge=T[4],pe=T[5],he=T[6],le=T[7],$=U[0],V=U[1],N=U[2],ue=U[3],f=U[4],v=U[5],_=U[6],S=U[7],y,g,L,W,J,C,j,Q;Z>=128;){for(var re=0;re<16;re++){var _e=8*re+X;b[re]=i.readUint32BE(Y,_e),I[re]=i.readUint32BE(Y,_e+4)}for(var re=0;re<80;re++){var ut=B,be=ee,xt=ce,q=me,M=ge,D=pe,c=he,P=le,ae=$,we=V,Pe=N,Le=ue,$e=f,Re=v,St=_,_t=S;if(y=le,g=S,J=g&65535,C=g>>>16,j=y&65535,Q=y>>>16,y=(ge>>>14|f<<32-14)^(ge>>>18|f<<32-18)^(f>>>41-32|ge<<32-(41-32)),g=(f>>>14|ge<<32-14)^(f>>>18|ge<<32-18)^(ge>>>41-32|f<<32-(41-32)),J+=g&65535,C+=g>>>16,j+=y&65535,Q+=y>>>16,y=ge&pe^~ge&he,g=f&v^~f&_,J+=g&65535,C+=g>>>16,j+=y&65535,Q+=y>>>16,y=a[re*2],g=a[re*2+1],J+=g&65535,C+=g>>>16,j+=y&65535,Q+=y>>>16,y=b[re%16],g=I[re%16],J+=g&65535,C+=g>>>16,j+=y&65535,Q+=y>>>16,C+=J>>>16,j+=C>>>16,Q+=j>>>16,L=j&65535|Q<<16,W=J&65535|C<<16,y=L,g=W,J=g&65535,C=g>>>16,j=y&65535,Q=y>>>16,y=(B>>>28|$<<32-28)^($>>>34-32|B<<32-(34-32))^($>>>39-32|B<<32-(39-32)),g=($>>>28|B<<32-28)^(B>>>34-32|$<<32-(34-32))^(B>>>39-32|$<<32-(39-32)),J+=g&65535,C+=g>>>16,j+=y&65535,Q+=y>>>16,y=B&ee^B&ce^ee&ce,g=$&V^$&N^V&N,J+=g&65535,C+=g>>>16,j+=y&65535,Q+=y>>>16,C+=J>>>16,j+=C>>>16,Q+=j>>>16,P=j&65535|Q<<16,_t=J&65535|C<<16,y=q,g=Le,J=g&65535,C=g>>>16,j=y&65535,Q=y>>>16,y=L,g=W,J+=g&65535,C+=g>>>16,j+=y&65535,Q+=y>>>16,C+=J>>>16,j+=C>>>16,Q+=j>>>16,q=j&65535|Q<<16,Le=J&65535|C<<16,ee=ut,ce=be,me=xt,ge=q,pe=M,he=D,le=c,B=P,V=ae,N=we,ue=Pe,f=Le,v=$e,_=Re,S=St,$=_t,re%16===15)for(var _e=0;_e<16;_e++)y=b[_e],g=I[_e],J=g&65535,C=g>>>16,j=y&65535,Q=y>>>16,y=b[(_e+9)%16],g=I[(_e+9)%16],J+=g&65535,C+=g>>>16,j+=y&65535,Q+=y>>>16,L=b[(_e+1)%16],W=I[(_e+1)%16],y=(L>>>1|W<<32-1)^(L>>>8|W<<32-8)^L>>>7,g=(W>>>1|L<<32-1)^(W>>>8|L<<32-8)^(W>>>7|L<<32-7),J+=g&65535,C+=g>>>16,j+=y&65535,Q+=y>>>16,L=b[(_e+14)%16],W=I[(_e+14)%16],y=(L>>>19|W<<32-19)^(W>>>61-32|L<<32-(61-32))^L>>>6,g=(W>>>19|L<<32-19)^(L>>>61-32|W<<32-(61-32))^(W>>>6|L<<32-6),J+=g&65535,C+=g>>>16,j+=y&65535,Q+=y>>>16,C+=J>>>16,j+=C>>>16,Q+=j>>>16,b[_e]=j&65535|Q<<16,I[_e]=J&65535|C<<16}y=B,g=$,J=g&65535,C=g>>>16,j=y&65535,Q=y>>>16,y=T[0],g=U[0],J+=g&65535,C+=g>>>16,j+=y&65535,Q+=y>>>16,C+=J>>>16,j+=C>>>16,Q+=j>>>16,T[0]=B=j&65535|Q<<16,U[0]=$=J&65535|C<<16,y=ee,g=V,J=g&65535,C=g>>>16,j=y&65535,Q=y>>>16,y=T[1],g=U[1],J+=g&65535,C+=g>>>16,j+=y&65535,Q+=y>>>16,C+=J>>>16,j+=C>>>16,Q+=j>>>16,T[1]=ee=j&65535|Q<<16,U[1]=V=J&65535|C<<16,y=ce,g=N,J=g&65535,C=g>>>16,j=y&65535,Q=y>>>16,y=T[2],g=U[2],J+=g&65535,C+=g>>>16,j+=y&65535,Q+=y>>>16,C+=J>>>16,j+=C>>>16,Q+=j>>>16,T[2]=ce=j&65535|Q<<16,U[2]=N=J&65535|C<<16,y=me,g=ue,J=g&65535,C=g>>>16,j=y&65535,Q=y>>>16,y=T[3],g=U[3],J+=g&65535,C+=g>>>16,j+=y&65535,Q+=y>>>16,C+=J>>>16,j+=C>>>16,Q+=j>>>16,T[3]=me=j&65535|Q<<16,U[3]=ue=J&65535|C<<16,y=ge,g=f,J=g&65535,C=g>>>16,j=y&65535,Q=y>>>16,y=T[4],g=U[4],J+=g&65535,C+=g>>>16,j+=y&65535,Q+=y>>>16,C+=J>>>16,j+=C>>>16,Q+=j>>>16,T[4]=ge=j&65535|Q<<16,U[4]=f=J&65535|C<<16,y=pe,g=v,J=g&65535,C=g>>>16,j=y&65535,Q=y>>>16,y=T[5],g=U[5],J+=g&65535,C+=g>>>16,j+=y&65535,Q+=y>>>16,C+=J>>>16,j+=C>>>16,Q+=j>>>16,T[5]=pe=j&65535|Q<<16,U[5]=v=J&65535|C<<16,y=he,g=_,J=g&65535,C=g>>>16,j=y&65535,Q=y>>>16,y=T[6],g=U[6],J+=g&65535,C+=g>>>16,j+=y&65535,Q+=y>>>16,C+=J>>>16,j+=C>>>16,Q+=j>>>16,T[6]=he=j&65535|Q<<16,U[6]=_=J&65535|C<<16,y=le,g=S,J=g&65535,C=g>>>16,j=y&65535,Q=y>>>16,y=T[7],g=U[7],J+=g&65535,C+=g>>>16,j+=y&65535,Q+=y>>>16,C+=J>>>16,j+=C>>>16,Q+=j>>>16,T[7]=le=j&65535|Q<<16,U[7]=S=J&65535|C<<16,X+=128,Z-=128}return X}function m(b){var I=new s;I.update(b);var T=I.digest();return I.clean(),T}h.hash=m})($l);(function(h){Object.defineProperty(h,"__esModule",{value:!0}),h.convertSecretKeyToX25519=h.convertPublicKeyToX25519=h.verify=h.sign=h.extractPublicKeyFromSecretKey=h.generateKeyPair=h.generateKeyPairFromSeed=h.SEED_LENGTH=h.SECRET_KEY_LENGTH=h.PUBLIC_KEY_LENGTH=h.SIGNATURE_LENGTH=void 0;const i=xl,r=$l,s=Il;h.SIGNATURE_LENGTH=64,h.PUBLIC_KEY_LENGTH=32,h.SECRET_KEY_LENGTH=64,h.SEED_LENGTH=32;function a(q){const M=new Float64Array(16);if(q)for(let D=0;D<q.length;D++)M[D]=q[D];return M}const l=new Uint8Array(32);l[0]=9;const m=a(),b=a([1]),I=a([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),T=a([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),U=a([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),Y=a([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),X=a([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function Z(q,M){for(let D=0;D<16;D++)q[D]=M[D]|0}function B(q){let M=1;for(let D=0;D<16;D++){let c=q[D]+M+65535;M=Math.floor(c/65536),q[D]=c-M*65536}q[0]+=M-1+37*(M-1)}function ee(q,M,D){const c=~(D-1);for(let P=0;P<16;P++){const ae=c&(q[P]^M[P]);q[P]^=ae,M[P]^=ae}}function ce(q,M){const D=a(),c=a();for(let P=0;P<16;P++)c[P]=M[P];B(c),B(c),B(c);for(let P=0;P<2;P++){D[0]=c[0]-65517;for(let we=1;we<15;we++)D[we]=c[we]-65535-(D[we-1]>>16&1),D[we-1]&=65535;D[15]=c[15]-32767-(D[14]>>16&1);const ae=D[15]>>16&1;D[14]&=65535,ee(c,D,1-ae)}for(let P=0;P<16;P++)q[2*P]=c[P]&255,q[2*P+1]=c[P]>>8}function me(q,M){let D=0;for(let c=0;c<32;c++)D|=q[c]^M[c];return(1&D-1>>>8)-1}function ge(q,M){const D=new Uint8Array(32),c=new Uint8Array(32);return ce(D,q),ce(c,M),me(D,c)}function pe(q){const M=new Uint8Array(32);return ce(M,q),M[0]&1}function he(q,M){for(let D=0;D<16;D++)q[D]=M[2*D]+(M[2*D+1]<<8);q[15]&=32767}function le(q,M,D){for(let c=0;c<16;c++)q[c]=M[c]+D[c]}function $(q,M,D){for(let c=0;c<16;c++)q[c]=M[c]-D[c]}function V(q,M,D){let c,P,ae=0,we=0,Pe=0,Le=0,$e=0,Re=0,St=0,_t=0,st=0,qe=0,Ye=0,Xe=0,at=0,He=0,Ze=0,je=0,Ke=0,ht=0,ze=0,Pt=0,Lt=0,zt=0,kt=0,Mt=0,Wt=0,rr=0,jr=0,Jt=0,Vr=0,si=0,Ei=0,lt=D[0],rt=D[1],ft=D[2],pt=D[3],ot=D[4],it=D[5],Ct=D[6],Ot=D[7],dt=D[8],At=D[9],gt=D[10],mt=D[11],yt=D[12],Qe=D[13],Rt=D[14],Tt=D[15];c=M[0],ae+=c*lt,we+=c*rt,Pe+=c*ft,Le+=c*pt,$e+=c*ot,Re+=c*it,St+=c*Ct,_t+=c*Ot,st+=c*dt,qe+=c*At,Ye+=c*gt,Xe+=c*mt,at+=c*yt,He+=c*Qe,Ze+=c*Rt,je+=c*Tt,c=M[1],we+=c*lt,Pe+=c*rt,Le+=c*ft,$e+=c*pt,Re+=c*ot,St+=c*it,_t+=c*Ct,st+=c*Ot,qe+=c*dt,Ye+=c*At,Xe+=c*gt,at+=c*mt,He+=c*yt,Ze+=c*Qe,je+=c*Rt,Ke+=c*Tt,c=M[2],Pe+=c*lt,Le+=c*rt,$e+=c*ft,Re+=c*pt,St+=c*ot,_t+=c*it,st+=c*Ct,qe+=c*Ot,Ye+=c*dt,Xe+=c*At,at+=c*gt,He+=c*mt,Ze+=c*yt,je+=c*Qe,Ke+=c*Rt,ht+=c*Tt,c=M[3],Le+=c*lt,$e+=c*rt,Re+=c*ft,St+=c*pt,_t+=c*ot,st+=c*it,qe+=c*Ct,Ye+=c*Ot,Xe+=c*dt,at+=c*At,He+=c*gt,Ze+=c*mt,je+=c*yt,Ke+=c*Qe,ht+=c*Rt,ze+=c*Tt,c=M[4],$e+=c*lt,Re+=c*rt,St+=c*ft,_t+=c*pt,st+=c*ot,qe+=c*it,Ye+=c*Ct,Xe+=c*Ot,at+=c*dt,He+=c*At,Ze+=c*gt,je+=c*mt,Ke+=c*yt,ht+=c*Qe,ze+=c*Rt,Pt+=c*Tt,c=M[5],Re+=c*lt,St+=c*rt,_t+=c*ft,st+=c*pt,qe+=c*ot,Ye+=c*it,Xe+=c*Ct,at+=c*Ot,He+=c*dt,Ze+=c*At,je+=c*gt,Ke+=c*mt,ht+=c*yt,ze+=c*Qe,Pt+=c*Rt,Lt+=c*Tt,c=M[6],St+=c*lt,_t+=c*rt,st+=c*ft,qe+=c*pt,Ye+=c*ot,Xe+=c*it,at+=c*Ct,He+=c*Ot,Ze+=c*dt,je+=c*At,Ke+=c*gt,ht+=c*mt,ze+=c*yt,Pt+=c*Qe,Lt+=c*Rt,zt+=c*Tt,c=M[7],_t+=c*lt,st+=c*rt,qe+=c*ft,Ye+=c*pt,Xe+=c*ot,at+=c*it,He+=c*Ct,Ze+=c*Ot,je+=c*dt,Ke+=c*At,ht+=c*gt,ze+=c*mt,Pt+=c*yt,Lt+=c*Qe,zt+=c*Rt,kt+=c*Tt,c=M[8],st+=c*lt,qe+=c*rt,Ye+=c*ft,Xe+=c*pt,at+=c*ot,He+=c*it,Ze+=c*Ct,je+=c*Ot,Ke+=c*dt,ht+=c*At,ze+=c*gt,Pt+=c*mt,Lt+=c*yt,zt+=c*Qe,kt+=c*Rt,Mt+=c*Tt,c=M[9],qe+=c*lt,Ye+=c*rt,Xe+=c*ft,at+=c*pt,He+=c*ot,Ze+=c*it,je+=c*Ct,Ke+=c*Ot,ht+=c*dt,ze+=c*At,Pt+=c*gt,Lt+=c*mt,zt+=c*yt,kt+=c*Qe,Mt+=c*Rt,Wt+=c*Tt,c=M[10],Ye+=c*lt,Xe+=c*rt,at+=c*ft,He+=c*pt,Ze+=c*ot,je+=c*it,Ke+=c*Ct,ht+=c*Ot,ze+=c*dt,Pt+=c*At,Lt+=c*gt,zt+=c*mt,kt+=c*yt,Mt+=c*Qe,Wt+=c*Rt,rr+=c*Tt,c=M[11],Xe+=c*lt,at+=c*rt,He+=c*ft,Ze+=c*pt,je+=c*ot,Ke+=c*it,ht+=c*Ct,ze+=c*Ot,Pt+=c*dt,Lt+=c*At,zt+=c*gt,kt+=c*mt,Mt+=c*yt,Wt+=c*Qe,rr+=c*Rt,jr+=c*Tt,c=M[12],at+=c*lt,He+=c*rt,Ze+=c*ft,je+=c*pt,Ke+=c*ot,ht+=c*it,ze+=c*Ct,Pt+=c*Ot,Lt+=c*dt,zt+=c*At,kt+=c*gt,Mt+=c*mt,Wt+=c*yt,rr+=c*Qe,jr+=c*Rt,Jt+=c*Tt,c=M[13],He+=c*lt,Ze+=c*rt,je+=c*ft,Ke+=c*pt,ht+=c*ot,ze+=c*it,Pt+=c*Ct,Lt+=c*Ot,zt+=c*dt,kt+=c*At,Mt+=c*gt,Wt+=c*mt,rr+=c*yt,jr+=c*Qe,Jt+=c*Rt,Vr+=c*Tt,c=M[14],Ze+=c*lt,je+=c*rt,Ke+=c*ft,ht+=c*pt,ze+=c*ot,Pt+=c*it,Lt+=c*Ct,zt+=c*Ot,kt+=c*dt,Mt+=c*At,Wt+=c*gt,rr+=c*mt,jr+=c*yt,Jt+=c*Qe,Vr+=c*Rt,si+=c*Tt,c=M[15],je+=c*lt,Ke+=c*rt,ht+=c*ft,ze+=c*pt,Pt+=c*ot,Lt+=c*it,zt+=c*Ct,kt+=c*Ot,Mt+=c*dt,Wt+=c*At,rr+=c*gt,jr+=c*mt,Jt+=c*yt,Vr+=c*Qe,si+=c*Rt,Ei+=c*Tt,ae+=38*Ke,we+=38*ht,Pe+=38*ze,Le+=38*Pt,$e+=38*Lt,Re+=38*zt,St+=38*kt,_t+=38*Mt,st+=38*Wt,qe+=38*rr,Ye+=38*jr,Xe+=38*Jt,at+=38*Vr,He+=38*si,Ze+=38*Ei,P=1,c=ae+P+65535,P=Math.floor(c/65536),ae=c-P*65536,c=we+P+65535,P=Math.floor(c/65536),we=c-P*65536,c=Pe+P+65535,P=Math.floor(c/65536),Pe=c-P*65536,c=Le+P+65535,P=Math.floor(c/65536),Le=c-P*65536,c=$e+P+65535,P=Math.floor(c/65536),$e=c-P*65536,c=Re+P+65535,P=Math.floor(c/65536),Re=c-P*65536,c=St+P+65535,P=Math.floor(c/65536),St=c-P*65536,c=_t+P+65535,P=Math.floor(c/65536),_t=c-P*65536,c=st+P+65535,P=Math.floor(c/65536),st=c-P*65536,c=qe+P+65535,P=Math.floor(c/65536),qe=c-P*65536,c=Ye+P+65535,P=Math.floor(c/65536),Ye=c-P*65536,c=Xe+P+65535,P=Math.floor(c/65536),Xe=c-P*65536,c=at+P+65535,P=Math.floor(c/65536),at=c-P*65536,c=He+P+65535,P=Math.floor(c/65536),He=c-P*65536,c=Ze+P+65535,P=Math.floor(c/65536),Ze=c-P*65536,c=je+P+65535,P=Math.floor(c/65536),je=c-P*65536,ae+=P-1+37*(P-1),P=1,c=ae+P+65535,P=Math.floor(c/65536),ae=c-P*65536,c=we+P+65535,P=Math.floor(c/65536),we=c-P*65536,c=Pe+P+65535,P=Math.floor(c/65536),Pe=c-P*65536,c=Le+P+65535,P=Math.floor(c/65536),Le=c-P*65536,c=$e+P+65535,P=Math.floor(c/65536),$e=c-P*65536,c=Re+P+65535,P=Math.floor(c/65536),Re=c-P*65536,c=St+P+65535,P=Math.floor(c/65536),St=c-P*65536,c=_t+P+65535,P=Math.floor(c/65536),_t=c-P*65536,c=st+P+65535,P=Math.floor(c/65536),st=c-P*65536,c=qe+P+65535,P=Math.floor(c/65536),qe=c-P*65536,c=Ye+P+65535,P=Math.floor(c/65536),Ye=c-P*65536,c=Xe+P+65535,P=Math.floor(c/65536),Xe=c-P*65536,c=at+P+65535,P=Math.floor(c/65536),at=c-P*65536,c=He+P+65535,P=Math.floor(c/65536),He=c-P*65536,c=Ze+P+65535,P=Math.floor(c/65536),Ze=c-P*65536,c=je+P+65535,P=Math.floor(c/65536),je=c-P*65536,ae+=P-1+37*(P-1),q[0]=ae,q[1]=we,q[2]=Pe,q[3]=Le,q[4]=$e,q[5]=Re,q[6]=St,q[7]=_t,q[8]=st,q[9]=qe,q[10]=Ye,q[11]=Xe,q[12]=at,q[13]=He,q[14]=Ze,q[15]=je}function N(q,M){V(q,M,M)}function ue(q,M){const D=a();let c;for(c=0;c<16;c++)D[c]=M[c];for(c=253;c>=0;c--)N(D,D),c!==2&&c!==4&&V(D,D,M);for(c=0;c<16;c++)q[c]=D[c]}function f(q,M){const D=a();let c;for(c=0;c<16;c++)D[c]=M[c];for(c=250;c>=0;c--)N(D,D),c!==1&&V(D,D,M);for(c=0;c<16;c++)q[c]=D[c]}function v(q,M){const D=a(),c=a(),P=a(),ae=a(),we=a(),Pe=a(),Le=a(),$e=a(),Re=a();$(D,q[1],q[0]),$(Re,M[1],M[0]),V(D,D,Re),le(c,q[0],q[1]),le(Re,M[0],M[1]),V(c,c,Re),V(P,q[3],M[3]),V(P,P,T),V(ae,q[2],M[2]),le(ae,ae,ae),$(we,c,D),$(Pe,ae,P),le(Le,ae,P),le($e,c,D),V(q[0],we,Pe),V(q[1],$e,Le),V(q[2],Le,Pe),V(q[3],we,$e)}function _(q,M,D){for(let c=0;c<4;c++)ee(q[c],M[c],D)}function S(q,M){const D=a(),c=a(),P=a();ue(P,M[2]),V(D,M[0],P),V(c,M[1],P),ce(q,c),q[31]^=pe(D)<<7}function y(q,M,D){Z(q[0],m),Z(q[1],b),Z(q[2],b),Z(q[3],m);for(let c=255;c>=0;--c){const P=D[c/8|0]>>(c&7)&1;_(q,M,P),v(M,q),v(q,q),_(q,M,P)}}function g(q,M){const D=[a(),a(),a(),a()];Z(D[0],U),Z(D[1],Y),Z(D[2],b),V(D[3],U,Y),y(q,D,M)}function L(q){if(q.length!==h.SEED_LENGTH)throw new Error(`ed25519: seed must be ${h.SEED_LENGTH} bytes`);const M=(0,r.hash)(q);M[0]&=248,M[31]&=127,M[31]|=64;const D=new Uint8Array(32),c=[a(),a(),a(),a()];g(c,M),S(D,c);const P=new Uint8Array(64);return P.set(q),P.set(D,32),{publicKey:D,secretKey:P}}h.generateKeyPairFromSeed=L;function W(q){const M=(0,i.randomBytes)(32,q),D=L(M);return(0,s.wipe)(M),D}h.generateKeyPair=W;function J(q){if(q.length!==h.SECRET_KEY_LENGTH)throw new Error(`ed25519: secret key must be ${h.SECRET_KEY_LENGTH} bytes`);return new Uint8Array(q.subarray(32))}h.extractPublicKeyFromSecretKey=J;const C=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function j(q,M){let D,c,P,ae;for(c=63;c>=32;--c){for(D=0,P=c-32,ae=c-12;P<ae;++P)M[P]+=D-16*M[c]*C[P-(c-32)],D=Math.floor((M[P]+128)/256),M[P]-=D*256;M[P]+=D,M[c]=0}for(D=0,P=0;P<32;P++)M[P]+=D-(M[31]>>4)*C[P],D=M[P]>>8,M[P]&=255;for(P=0;P<32;P++)M[P]-=D*C[P];for(c=0;c<32;c++)M[c+1]+=M[c]>>8,q[c]=M[c]&255}function Q(q){const M=new Float64Array(64);for(let D=0;D<64;D++)M[D]=q[D];for(let D=0;D<64;D++)q[D]=0;j(q,M)}function re(q,M){const D=new Float64Array(64),c=[a(),a(),a(),a()],P=(0,r.hash)(q.subarray(0,32));P[0]&=248,P[31]&=127,P[31]|=64;const ae=new Uint8Array(64);ae.set(P.subarray(32),32);const we=new r.SHA512;we.update(ae.subarray(32)),we.update(M);const Pe=we.digest();we.clean(),Q(Pe),g(c,Pe),S(ae,c),we.reset(),we.update(ae.subarray(0,32)),we.update(q.subarray(32)),we.update(M);const Le=we.digest();Q(Le);for(let $e=0;$e<32;$e++)D[$e]=Pe[$e];for(let $e=0;$e<32;$e++)for(let Re=0;Re<32;Re++)D[$e+Re]+=Le[$e]*P[Re];return j(ae.subarray(32),D),ae}h.sign=re;function _e(q,M){const D=a(),c=a(),P=a(),ae=a(),we=a(),Pe=a(),Le=a();return Z(q[2],b),he(q[1],M),N(P,q[1]),V(ae,P,I),$(P,P,q[2]),le(ae,q[2],ae),N(we,ae),N(Pe,we),V(Le,Pe,we),V(D,Le,P),V(D,D,ae),f(D,D),V(D,D,P),V(D,D,ae),V(D,D,ae),V(q[0],D,ae),N(c,q[0]),V(c,c,ae),ge(c,P)&&V(q[0],q[0],X),N(c,q[0]),V(c,c,ae),ge(c,P)?-1:(pe(q[0])===M[31]>>7&&$(q[0],m,q[0]),V(q[3],q[0],q[1]),0)}function ut(q,M,D){const c=new Uint8Array(32),P=[a(),a(),a(),a()],ae=[a(),a(),a(),a()];if(D.length!==h.SIGNATURE_LENGTH)throw new Error(`ed25519: signature must be ${h.SIGNATURE_LENGTH} bytes`);if(_e(ae,q))return!1;const we=new r.SHA512;we.update(D.subarray(0,32)),we.update(q),we.update(M);const Pe=we.digest();return Q(Pe),y(P,ae,Pe),g(ae,D.subarray(32)),v(P,ae),S(c,P),!me(D,c)}h.verify=ut;function be(q){let M=[a(),a(),a(),a()];if(_e(M,q))throw new Error("Ed25519: invalid public key");let D=a(),c=a(),P=M[1];le(D,b,P),$(c,b,P),ue(c,c),V(D,D,c);let ae=new Uint8Array(32);return ce(ae,D),ae}h.convertPublicKeyToX25519=be;function xt(q){const M=(0,r.hash)(q.subarray(0,32));M[0]&=248,M[31]&=127,M[31]|=64;const D=new Uint8Array(M.subarray(0,32));return(0,s.wipe)(M),D}h.convertSecretKeyToX25519=xt})(gc);const sm="EdDSA",am="JWT",Ml=".",ql="base64url",om="utf8",cm="utf8",um=":",hm="did",lm="key",zh="base58btc",fm="z",pm="K36",dm=32;function aa(h){return ca(cc(uc(h),om),ql)}function Ul(h){const i=cc(pm,zh),r=fm+ca(z0([i,h]),zh);return[hm,lm,r].join(um)}function gm(h){return ca(h,ql)}function ym(h){return cc([aa(h.header),aa(h.payload)].join(Ml),cm)}function vm(h){return[aa(h.header),aa(h.payload),gm(h.signature)].join(Ml)}function kh(h=xl.randomBytes(dm)){return gc.generateKeyPairFromSeed(h)}async function _m(h,i,r,s,a=fe.fromMiliseconds(Date.now())){const l={alg:sm,typ:am},m=Ul(s.publicKey),b=a+r,I={iss:m,sub:h,aud:i,iat:a,exp:b},T=ym({header:l,payload:I}),U=gc.sign(s.secretKey,T);return vm({header:l,payload:I,signature:U})}const mm=()=>typeof WebSocket<"u"?WebSocket:typeof global<"u"&&typeof global.WebSocket<"u"?global.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:require("ws"),wm=()=>typeof WebSocket<"u"||typeof global<"u"&&typeof global.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",Hh=h=>h.split("?")[0],Vh=10,bm=mm();class Em{constructor(i){if(this.url=i,this.events=new vr.exports.EventEmitter,this.registering=!1,!Ph(i))throw new Error(`Provided URL is not compatible with WebSocket connection: ${i}`);this.url=i}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(i,r){this.events.on(i,r)}once(i,r){this.events.once(i,r)}off(i,r){this.events.off(i,r)}removeListener(i,r){this.events.removeListener(i,r)}async open(i=this.url){await this.register(i)}async close(){return new Promise((i,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=s=>{this.onClose(s),i()},this.socket.close()})}async send(i,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(uc(i))}catch(s){this.onError(i.id,s)}}register(i=this.url){if(!Ph(i))throw new Error(`Provided URL is not compatible with WebSocket connection: ${i}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((s,a)=>{this.events.once("register_error",l=>{this.resetMaxListeners(),a(l)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));s(this.socket)})})}return this.url=i,this.registering=!0,new Promise((r,s)=>{const a=P_.isReactNative()?void 0:{rejectUnauthorized:!C_(i)},l=new bm(i,[],a);wm()?l.onerror=m=>{const b=m;s(this.emitError(b.error))}:l.on("error",m=>{s(this.emitError(m))}),l.onopen=()=>{this.onOpen(l),r(l)}})}onOpen(i){i.onmessage=r=>this.onPayload(r),i.onclose=r=>this.onClose(r),this.socket=i,this.registering=!1,this.events.emit("open")}onClose(i){this.socket=void 0,this.registering=!1,this.events.emit("close",i)}onPayload(i){if(typeof i.data>"u")return;const r=typeof i.data=="string"?Tl(i.data):i.data;this.events.emit("payload",r)}onError(i,r){const s=this.parseError(r),a=s.message||s.toString(),l=hc(i,a);this.events.emit("payload",l)}parseError(i,r=this.url){return O_(i,Hh(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>Vh&&this.events.setMaxListeners(Vh)}emitError(i){const r=this.parseError(new Error(i?.message||`WebSocket connection failed for host: ${Hh(this.url)}`));return this.events.emit("register_error",r),r}}var tc={exports:{}};(function(h,i){var r=200,s="__lodash_hash_undefined__",a=1,l=2,m=9007199254740991,b="[object Arguments]",I="[object Array]",T="[object AsyncFunction]",U="[object Boolean]",Y="[object Date]",X="[object Error]",Z="[object Function]",B="[object GeneratorFunction]",ee="[object Map]",ce="[object Number]",me="[object Null]",ge="[object Object]",pe="[object Promise]",he="[object Proxy]",le="[object RegExp]",$="[object Set]",V="[object String]",N="[object Symbol]",ue="[object Undefined]",f="[object WeakMap]",v="[object ArrayBuffer]",_="[object DataView]",S="[object Float32Array]",y="[object Float64Array]",g="[object Int8Array]",L="[object Int16Array]",W="[object Int32Array]",J="[object Uint8Array]",C="[object Uint8ClampedArray]",j="[object Uint16Array]",Q="[object Uint32Array]",re=/[\\^$.*+?()[\]{}|]/g,_e=/^\[object .+?Constructor\]$/,ut=/^(?:0|[1-9]\d*)$/,be={};be[S]=be[y]=be[g]=be[L]=be[W]=be[J]=be[C]=be[j]=be[Q]=!0,be[b]=be[I]=be[v]=be[U]=be[_]=be[Y]=be[X]=be[Z]=be[ee]=be[ce]=be[ge]=be[le]=be[$]=be[V]=be[f]=!1;var xt=typeof yr=="object"&&yr&&yr.Object===Object&&yr,q=typeof self=="object"&&self&&self.Object===Object&&self,M=xt||q||Function("return this")(),D=i&&!i.nodeType&&i,c=D&&!0&&h&&!h.nodeType&&h,P=c&&c.exports===D,ae=P&&xt.process,we=function(){try{return ae&&ae.binding&&ae.binding("util")}catch{}}(),Pe=we&&we.isTypedArray;function Le(w,O){for(var K=-1,ie=w==null?0:w.length,Ge=0,Ie=[];++K<ie;){var et=w[K];O(et,K,w)&&(Ie[Ge++]=et)}return Ie}function $e(w,O){for(var K=-1,ie=O.length,Ge=w.length;++K<ie;)w[Ge+K]=O[K];return w}function Re(w,O){for(var K=-1,ie=w==null?0:w.length;++K<ie;)if(O(w[K],K,w))return!0;return!1}function St(w,O){for(var K=-1,ie=Array(w);++K<w;)ie[K]=O(K);return ie}function _t(w){return function(O){return w(O)}}function st(w,O){return w.has(O)}function qe(w,O){return w?.[O]}function Ye(w){var O=-1,K=Array(w.size);return w.forEach(function(ie,Ge){K[++O]=[Ge,ie]}),K}function Xe(w,O){return function(K){return w(O(K))}}function at(w){var O=-1,K=Array(w.size);return w.forEach(function(ie){K[++O]=ie}),K}var He=Array.prototype,Ze=Function.prototype,je=Object.prototype,Ke=M["__core-js_shared__"],ht=Ze.toString,ze=je.hasOwnProperty,Pt=function(){var w=/[^.]+$/.exec(Ke&&Ke.keys&&Ke.keys.IE_PROTO||"");return w?"Symbol(src)_1."+w:""}(),Lt=je.toString,zt=RegExp("^"+ht.call(ze).replace(re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),kt=P?M.Buffer:void 0,Mt=M.Symbol,Wt=M.Uint8Array,rr=je.propertyIsEnumerable,jr=He.splice,Jt=Mt?Mt.toStringTag:void 0,Vr=Object.getOwnPropertySymbols,si=kt?kt.isBuffer:void 0,Ei=Xe(Object.keys,Object),lt=hr(M,"DataView"),rt=hr(M,"Map"),ft=hr(M,"Promise"),pt=hr(M,"Set"),ot=hr(M,"WeakMap"),it=hr(Object,"create"),Ct=Br(lt),Ot=Br(rt),dt=Br(ft),At=Br(pt),gt=Br(ot),mt=Mt?Mt.prototype:void 0,yt=mt?mt.valueOf:void 0;function Qe(w){var O=-1,K=w==null?0:w.length;for(this.clear();++O<K;){var ie=w[O];this.set(ie[0],ie[1])}}function Rt(){this.__data__=it?it(null):{},this.size=0}function Tt(w){var O=this.has(w)&&delete this.__data__[w];return this.size-=O?1:0,O}function fa(w){var O=this.__data__;if(it){var K=O[w];return K===s?void 0:K}return ze.call(O,w)?O[w]:void 0}function pa(w){var O=this.__data__;return it?O[w]!==void 0:ze.call(O,w)}function da(w,O){var K=this.__data__;return this.size+=this.has(w)?0:1,K[w]=it&&O===void 0?s:O,this}Qe.prototype.clear=Rt,Qe.prototype.delete=Tt,Qe.prototype.get=fa,Qe.prototype.has=pa,Qe.prototype.set=da;function _r(w){var O=-1,K=w==null?0:w.length;for(this.clear();++O<K;){var ie=w[O];this.set(ie[0],ie[1])}}function ga(){this.__data__=[],this.size=0}function ya(w){var O=this.__data__,K=Ii(O,w);if(K<0)return!1;var ie=O.length-1;return K==ie?O.pop():jr.call(O,K,1),--this.size,!0}function va(w){var O=this.__data__,K=Ii(O,w);return K<0?void 0:O[K][1]}function _a(w){return Ii(this.__data__,w)>-1}function ma(w,O){var K=this.__data__,ie=Ii(K,w);return ie<0?(++this.size,K.push([w,O])):K[ie][1]=O,this}_r.prototype.clear=ga,_r.prototype.delete=ya,_r.prototype.get=va,_r.prototype.has=_a,_r.prototype.set=ma;function Kr(w){var O=-1,K=w==null?0:w.length;for(this.clear();++O<K;){var ie=w[O];this.set(ie[0],ie[1])}}function Ui(){this.size=0,this.__data__={hash:new Qe,map:new(rt||_r),string:new Qe}}function wa(w){var O=ai(this,w).delete(w);return this.size-=O?1:0,O}function zi(w){return ai(this,w).get(w)}function ba(w){return ai(this,w).has(w)}function Ea(w,O){var K=ai(this,w),ie=K.size;return K.set(w,O),this.size+=K.size==ie?0:1,this}Kr.prototype.clear=Ui,Kr.prototype.delete=wa,Kr.prototype.get=zi,Kr.prototype.has=ba,Kr.prototype.set=Ea;function ki(w){var O=-1,K=w==null?0:w.length;for(this.__data__=new Kr;++O<K;)this.add(w[O])}function Wn(w){return this.__data__.set(w,s),this}function Jn(w){return this.__data__.has(w)}ki.prototype.add=ki.prototype.push=Wn,ki.prototype.has=Jn;function Ar(w){var O=this.__data__=new _r(w);this.size=O.size}function Ia(){this.__data__=new _r,this.size=0}function xa(w){var O=this.__data__,K=O.delete(w);return this.size=O.size,K}function Sa(w){return this.__data__.get(w)}function Pa(w){return this.__data__.has(w)}function Qn(w,O){var K=this.__data__;if(K instanceof _r){var ie=K.__data__;if(!rt||ie.length<r-1)return ie.push([w,O]),this.size=++K.size,this;K=this.__data__=new Kr(ie)}return K.set(w,O),this.size=K.size,this}Ar.prototype.clear=Ia,Ar.prototype.delete=xa,Ar.prototype.get=Sa,Ar.prototype.has=Pa,Ar.prototype.set=Qn;function Yn(w,O){var K=Ki(w),ie=!K&&us(w),Ge=!K&&!ie&&gn(w),Ie=!K&&!ie&&!Ge&&fs(w),et=K||ie||Ge||Ie,Dt=et?St(w.length,String):[],De=Dt.length;for(var We in w)(O||ze.call(w,We))&&!(et&&(We=="length"||Ge&&(We=="offset"||We=="parent")||Ie&&(We=="buffer"||We=="byteLength"||We=="byteOffset")||ns(We,De)))&&Dt.push(We);return Dt}function Ii(w,O){for(var K=w.length;K--;)if(cs(w[K][0],O))return K;return-1}function pn(w,O,K){var ie=O(w);return Ki(w)?ie:$e(ie,K(w))}function xi(w){return w==null?w===void 0?ue:me:Jt&&Jt in Object(w)?rs(w):Aa(w)}function dn(w){return Pi(w)&&xi(w)==b}function Si(w,O,K,ie,Ge){return w===O?!0:w==null||O==null||!Pi(w)&&!Pi(O)?w!==w&&O!==O:Xn(w,O,K,ie,Si,Ge)}function Xn(w,O,K,ie,Ge,Ie){var et=Ki(w),Dt=Ki(O),De=et?I:$r(w),We=Dt?I:$r(O);De=De==b?ge:De,We=We==b?ge:We;var wt=De==ge,ir=We==ge,Nt=De==We;if(Nt&&gn(w)){if(!gn(O))return!1;et=!0,wt=!1}if(Nt&&!wt)return Ie||(Ie=new Ar),et||fs(w)?Hi(w,O,K,ie,Ge,Ie):Oa(w,O,De,K,ie,Ge,Ie);if(!(K&a)){var tt=wt&&ze.call(w,"__wrapped__"),Qt=ir&&ze.call(O,"__wrapped__");if(tt||Qt){var Rr=tt?w.value():w,mr=Qt?O.value():O;return Ie||(Ie=new Ar),Ge(Rr,mr,K,ie,Ie)}}return Nt?(Ie||(Ie=new Ar),ts(w,O,K,ie,Ge,Ie)):!1}function Ca(w){if(!ls(w)||as(w))return!1;var O=Bi(w)?zt:_e;return O.test(Br(w))}function Zn(w){return Pi(w)&&hs(w.length)&&!!be[xi(w)]}function es(w){if(!os(w))return Ei(w);var O=[];for(var K in Object(w))ze.call(w,K)&&K!="constructor"&&O.push(K);return O}function Hi(w,O,K,ie,Ge,Ie){var et=K&a,Dt=w.length,De=O.length;if(Dt!=De&&!(et&&De>Dt))return!1;var We=Ie.get(w);if(We&&Ie.get(O))return We==O;var wt=-1,ir=!0,Nt=K&l?new ki:void 0;for(Ie.set(w,O),Ie.set(O,w);++wt<Dt;){var tt=w[wt],Qt=O[wt];if(ie)var Rr=et?ie(Qt,tt,wt,O,w,Ie):ie(tt,Qt,wt,w,O,Ie);if(Rr!==void 0){if(Rr)continue;ir=!1;break}if(Nt){if(!Re(O,function(mr,Mr){if(!st(Nt,Mr)&&(tt===mr||Ge(tt,mr,K,ie,Ie)))return Nt.push(Mr)})){ir=!1;break}}else if(!(tt===Qt||Ge(tt,Qt,K,ie,Ie))){ir=!1;break}}return Ie.delete(w),Ie.delete(O),ir}function Oa(w,O,K,ie,Ge,Ie,et){switch(K){case _:if(w.byteLength!=O.byteLength||w.byteOffset!=O.byteOffset)return!1;w=w.buffer,O=O.buffer;case v:return!(w.byteLength!=O.byteLength||!Ie(new Wt(w),new Wt(O)));case U:case Y:case ce:return cs(+w,+O);case X:return w.name==O.name&&w.message==O.message;case le:case V:return w==O+"";case ee:var Dt=Ye;case $:var De=ie&a;if(Dt||(Dt=at),w.size!=O.size&&!De)return!1;var We=et.get(w);if(We)return We==O;ie|=l,et.set(w,O);var wt=Hi(Dt(w),Dt(O),ie,Ge,Ie,et);return et.delete(w),wt;case N:if(yt)return yt.call(w)==yt.call(O)}return!1}function ts(w,O,K,ie,Ge,Ie){var et=K&a,Dt=Vi(w),De=Dt.length,We=Vi(O),wt=We.length;if(De!=wt&&!et)return!1;for(var ir=De;ir--;){var Nt=Dt[ir];if(!(et?Nt in O:ze.call(O,Nt)))return!1}var tt=Ie.get(w);if(tt&&Ie.get(O))return tt==O;var Qt=!0;Ie.set(w,O),Ie.set(O,w);for(var Rr=et;++ir<De;){Nt=Dt[ir];var mr=w[Nt],Mr=O[Nt];if(ie)var yn=et?ie(Mr,mr,Nt,O,w,Ie):ie(mr,Mr,Nt,w,O,Ie);if(!(yn===void 0?mr===Mr||Ge(mr,Mr,K,ie,Ie):yn)){Qt=!1;break}Rr||(Rr=Nt=="constructor")}if(Qt&&!Rr){var Ci=w.constructor,qt=O.constructor;Ci!=qt&&"constructor"in w&&"constructor"in O&&!(typeof Ci=="function"&&Ci instanceof Ci&&typeof qt=="function"&&qt instanceof qt)&&(Qt=!1)}return Ie.delete(w),Ie.delete(O),Qt}function Vi(w){return pn(w,Da,is)}function ai(w,O){var K=w.__data__;return ss(O)?K[typeof O=="string"?"string":"hash"]:K.map}function hr(w,O){var K=qe(w,O);return Ca(K)?K:void 0}function rs(w){var O=ze.call(w,Jt),K=w[Jt];try{w[Jt]=void 0;var ie=!0}catch{}var Ge=Lt.call(w);return ie&&(O?w[Jt]=K:delete w[Jt]),Ge}var is=Vr?function(w){return w==null?[]:(w=Object(w),Le(Vr(w),function(O){return rr.call(w,O)}))}:Be,$r=xi;(lt&&$r(new lt(new ArrayBuffer(1)))!=_||rt&&$r(new rt)!=ee||ft&&$r(ft.resolve())!=pe||pt&&$r(new pt)!=$||ot&&$r(new ot)!=f)&&($r=function(w){var O=xi(w),K=O==ge?w.constructor:void 0,ie=K?Br(K):"";if(ie)switch(ie){case Ct:return _;case Ot:return ee;case dt:return pe;case At:return $;case gt:return f}return O});function ns(w,O){return O=O??m,!!O&&(typeof w=="number"||ut.test(w))&&w>-1&&w%1==0&&w<O}function ss(w){var O=typeof w;return O=="string"||O=="number"||O=="symbol"||O=="boolean"?w!=="__proto__":w===null}function as(w){return!!Pt&&Pt in w}function os(w){var O=w&&w.constructor,K=typeof O=="function"&&O.prototype||je;return w===K}function Aa(w){return Lt.call(w)}function Br(w){if(w!=null){try{return ht.call(w)}catch{}try{return w+""}catch{}}return""}function cs(w,O){return w===O||w!==w&&O!==O}var us=dn(function(){return arguments}())?dn:function(w){return Pi(w)&&ze.call(w,"callee")&&!rr.call(w,"callee")},Ki=Array.isArray;function Ra(w){return w!=null&&hs(w.length)&&!Bi(w)}var gn=si||Ve;function Ta(w,O){return Si(w,O)}function Bi(w){if(!ls(w))return!1;var O=xi(w);return O==Z||O==B||O==T||O==he}function hs(w){return typeof w=="number"&&w>-1&&w%1==0&&w<=m}function ls(w){var O=typeof w;return w!=null&&(O=="object"||O=="function")}function Pi(w){return w!=null&&typeof w=="object"}var fs=Pe?_t(Pe):Zn;function Da(w){return Ra(w)?Yn(w):es(w)}function Be(){return[]}function Ve(){return!1}h.exports=Ta})(tc,tc.exports);const Im=tc.exports;function xm(h,i){if(h.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),s=0;s<r.length;s++)r[s]=255;for(var a=0;a<h.length;a++){var l=h.charAt(a),m=l.charCodeAt(0);if(r[m]!==255)throw new TypeError(l+" is ambiguous");r[m]=a}var b=h.length,I=h.charAt(0),T=Math.log(b)/Math.log(256),U=Math.log(256)/Math.log(b);function Y(B){if(B instanceof Uint8Array||(ArrayBuffer.isView(B)?B=new Uint8Array(B.buffer,B.byteOffset,B.byteLength):Array.isArray(B)&&(B=Uint8Array.from(B))),!(B instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(B.length===0)return"";for(var ee=0,ce=0,me=0,ge=B.length;me!==ge&&B[me]===0;)me++,ee++;for(var pe=(ge-me)*U+1>>>0,he=new Uint8Array(pe);me!==ge;){for(var le=B[me],$=0,V=pe-1;(le!==0||$<ce)&&V!==-1;V--,$++)le+=256*he[V]>>>0,he[V]=le%b>>>0,le=le/b>>>0;if(le!==0)throw new Error("Non-zero carry");ce=$,me++}for(var N=pe-ce;N!==pe&&he[N]===0;)N++;for(var ue=I.repeat(ee);N<pe;++N)ue+=h.charAt(he[N]);return ue}function X(B){if(typeof B!="string")throw new TypeError("Expected String");if(B.length===0)return new Uint8Array;var ee=0;if(B[ee]!==" "){for(var ce=0,me=0;B[ee]===I;)ce++,ee++;for(var ge=(B.length-ee)*T+1>>>0,pe=new Uint8Array(ge);B[ee];){var he=r[B.charCodeAt(ee)];if(he===255)return;for(var le=0,$=ge-1;(he!==0||le<me)&&$!==-1;$--,le++)he+=b*pe[$]>>>0,pe[$]=he%256>>>0,he=he/256>>>0;if(he!==0)throw new Error("Non-zero carry");me=le,ee++}if(B[ee]!==" "){for(var V=ge-me;V!==ge&&pe[V]===0;)V++;for(var N=new Uint8Array(ce+(ge-V)),ue=ce;V!==ge;)N[ue++]=pe[V++];return N}}}function Z(B){var ee=X(B);if(ee)return ee;throw new Error(`Non-${i} character`)}return{encode:Y,decodeUnsafe:X,decode:Z}}var Sm=xm,Pm=Sm;const zl=h=>{if(h instanceof Uint8Array&&h.constructor.name==="Uint8Array")return h;if(h instanceof ArrayBuffer)return new Uint8Array(h);if(ArrayBuffer.isView(h))return new Uint8Array(h.buffer,h.byteOffset,h.byteLength);throw new Error("Unknown type, must be binary type")},Cm=h=>new TextEncoder().encode(h),Om=h=>new TextDecoder().decode(h);class Am{constructor(i,r,s){this.name=i,this.prefix=r,this.baseEncode=s}encode(i){if(i instanceof Uint8Array)return`${this.prefix}${this.baseEncode(i)}`;throw Error("Unknown type, must be binary type")}}class Rm{constructor(i,r,s){if(this.name=i,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=s}decode(i){if(typeof i=="string"){if(i.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(i)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(i.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(i){return kl(this,i)}}class Tm{constructor(i){this.decoders=i}or(i){return kl(this,i)}decode(i){const r=i[0],s=this.decoders[r];if(s)return s.decode(i);throw RangeError(`Unable to decode multibase string ${JSON.stringify(i)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const kl=(h,i)=>new Tm({...h.decoders||{[h.prefix]:h},...i.decoders||{[i.prefix]:i}});class Dm{constructor(i,r,s,a){this.name=i,this.prefix=r,this.baseEncode=s,this.baseDecode=a,this.encoder=new Am(i,r,s),this.decoder=new Rm(i,r,a)}encode(i){return this.encoder.encode(i)}decode(i){return this.decoder.decode(i)}}const ha=({name:h,prefix:i,encode:r,decode:s})=>new Dm(h,i,r,s),Gn=({prefix:h,name:i,alphabet:r})=>{const{encode:s,decode:a}=Pm(r,i);return ha({prefix:h,name:i,encode:s,decode:l=>zl(a(l))})},Nm=(h,i,r,s)=>{const a={};for(let U=0;U<i.length;++U)a[i[U]]=U;let l=h.length;for(;h[l-1]==="=";)--l;const m=new Uint8Array(l*r/8|0);let b=0,I=0,T=0;for(let U=0;U<l;++U){const Y=a[h[U]];if(Y===void 0)throw new SyntaxError(`Non-${s} character`);I=I<<r|Y,b+=r,b>=8&&(b-=8,m[T++]=255&I>>b)}if(b>=r||255&I<<8-b)throw new SyntaxError("Unexpected end of data");return m},Fm=(h,i,r)=>{const s=i[i.length-1]==="=",a=(1<<r)-1;let l="",m=0,b=0;for(let I=0;I<h.length;++I)for(b=b<<8|h[I],m+=8;m>r;)m-=r,l+=i[a&b>>m];if(m&&(l+=i[a&b<<r-m]),s)for(;l.length*r&7;)l+="=";return l},Vt=({name:h,prefix:i,bitsPerChar:r,alphabet:s})=>ha({prefix:i,name:h,encode(a){return Fm(a,s,r)},decode(a){return Nm(a,s,r,h)}}),Lm=ha({prefix:"\0",name:"identity",encode:h=>Om(h),decode:h=>Cm(h)});var jm=Object.freeze({__proto__:null,identity:Lm});const $m=Vt({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Mm=Object.freeze({__proto__:null,base2:$m});const qm=Vt({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Um=Object.freeze({__proto__:null,base8:qm});const zm=Gn({prefix:"9",name:"base10",alphabet:"0123456789"});var km=Object.freeze({__proto__:null,base10:zm});const Hm=Vt({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Vm=Vt({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var Km=Object.freeze({__proto__:null,base16:Hm,base16upper:Vm});const Bm=Vt({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Gm=Vt({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Wm=Vt({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Jm=Vt({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),Qm=Vt({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Ym=Vt({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Xm=Vt({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Zm=Vt({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),e1=Vt({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var t1=Object.freeze({__proto__:null,base32:Bm,base32upper:Gm,base32pad:Wm,base32padupper:Jm,base32hex:Qm,base32hexupper:Ym,base32hexpad:Xm,base32hexpadupper:Zm,base32z:e1});const r1=Gn({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),i1=Gn({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var n1=Object.freeze({__proto__:null,base36:r1,base36upper:i1});const s1=Gn({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),a1=Gn({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var o1=Object.freeze({__proto__:null,base58btc:s1,base58flickr:a1});const c1=Vt({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),u1=Vt({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),h1=Vt({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),l1=Vt({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var f1=Object.freeze({__proto__:null,base64:c1,base64pad:u1,base64url:h1,base64urlpad:l1});const Hl=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),p1=Hl.reduce((h,i,r)=>(h[r]=i,h),[]),d1=Hl.reduce((h,i,r)=>(h[i.codePointAt(0)]=r,h),[]);function g1(h){return h.reduce((i,r)=>(i+=p1[r],i),"")}function y1(h){const i=[];for(const r of h){const s=d1[r.codePointAt(0)];if(s===void 0)throw new Error(`Non-base256emoji character: ${r}`);i.push(s)}return new Uint8Array(i)}const v1=ha({prefix:"\u{1F680}",name:"base256emoji",encode:g1,decode:y1});var _1=Object.freeze({__proto__:null,base256emoji:v1}),m1=Vl,Kh=128,w1=127,b1=~w1,E1=Math.pow(2,31);function Vl(h,i,r){i=i||[],r=r||0;for(var s=r;h>=E1;)i[r++]=h&255|Kh,h/=128;for(;h&b1;)i[r++]=h&255|Kh,h>>>=7;return i[r]=h|0,Vl.bytes=r-s+1,i}var I1=rc,x1=128,Bh=127;function rc(h,s){var r=0,s=s||0,a=0,l=s,m,b=h.length;do{if(l>=b)throw rc.bytes=0,new RangeError("Could not decode varint");m=h[l++],r+=a<28?(m&Bh)<<a:(m&Bh)*Math.pow(2,a),a+=7}while(m>=x1);return rc.bytes=l-s,r}var S1=Math.pow(2,7),P1=Math.pow(2,14),C1=Math.pow(2,21),O1=Math.pow(2,28),A1=Math.pow(2,35),R1=Math.pow(2,42),T1=Math.pow(2,49),D1=Math.pow(2,56),N1=Math.pow(2,63),F1=function(h){return h<S1?1:h<P1?2:h<C1?3:h<O1?4:h<A1?5:h<R1?6:h<T1?7:h<D1?8:h<N1?9:10},L1={encode:m1,decode:I1,encodingLength:F1},Kl=L1;const Gh=(h,i,r=0)=>(Kl.encode(h,i,r),i),Wh=h=>Kl.encodingLength(h),ic=(h,i)=>{const r=i.byteLength,s=Wh(h),a=s+Wh(r),l=new Uint8Array(a+r);return Gh(h,l,0),Gh(r,l,s),l.set(i,a),new j1(h,r,i,l)};class j1{constructor(i,r,s,a){this.code=i,this.size=r,this.digest=s,this.bytes=a}}const Bl=({name:h,code:i,encode:r})=>new $1(h,i,r);class $1{constructor(i,r,s){this.name=i,this.code=r,this.encode=s}digest(i){if(i instanceof Uint8Array){const r=this.encode(i);return r instanceof Uint8Array?ic(this.code,r):r.then(s=>ic(this.code,s))}else throw Error("Unknown type, must be binary type")}}const Gl=h=>async i=>new Uint8Array(await crypto.subtle.digest(h,i)),M1=Bl({name:"sha2-256",code:18,encode:Gl("SHA-256")}),q1=Bl({name:"sha2-512",code:19,encode:Gl("SHA-512")});var U1=Object.freeze({__proto__:null,sha256:M1,sha512:q1});const Wl=0,z1="identity",Jl=zl,k1=h=>ic(Wl,Jl(h)),H1={code:Wl,name:z1,encode:Jl,digest:k1};var V1=Object.freeze({__proto__:null,identity:H1});new TextEncoder,new TextDecoder;const Jh={...jm,...Mm,...Um,...km,...Km,...t1,...n1,...o1,...f1,..._1};({...U1,...V1});function Ql(h){return globalThis.Buffer!=null?new Uint8Array(h.buffer,h.byteOffset,h.byteLength):h}function K1(h=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Ql(globalThis.Buffer.allocUnsafe(h)):new Uint8Array(h)}function Yl(h,i,r,s){return{name:h,prefix:i,encoder:{name:h,prefix:i,encode:r},decoder:{decode:s}}}const Qh=Yl("utf8","u",h=>"u"+new TextDecoder("utf8").decode(h),h=>new TextEncoder().encode(h.substring(1))),Vo=Yl("ascii","a",h=>{let i="a";for(let r=0;r<h.length;r++)i+=String.fromCharCode(h[r]);return i},h=>{h=h.substring(1);const i=K1(h.length);for(let r=0;r<h.length;r++)i[r]=h.charCodeAt(r);return i}),B1={utf8:Qh,"utf-8":Qh,hex:Jh.base16,latin1:Vo,ascii:Vo,binary:Vo,...Jh};function G1(h,i="utf8"){const r=B1[i];if(!r)throw new Error(`Unsupported encoding "${i}"`);return(i==="utf8"||i==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Ql(globalThis.Buffer.from(h,"utf-8")):r.decoder.decode(`${r.prefix}${h}`)}const Xl="wc",W1=2,yc="core",mi=`${Xl}@2:${yc}:`,J1={name:yc,logger:"error"},Q1={database:":memory:"},Y1="crypto",Yh="client_ed25519_seed",X1=fe.ONE_DAY,Z1="keychain",ew="0.3",tw="messages",rw="0.3",iw=fe.SIX_HOURS,nw="publisher",Zl="irn",sw="error",ef="wss://relay.walletconnect.com",Xh="wss://relay.walletconnect.org",aw="relayer",Gt={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},ow="_subscription",ri={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},cw=fe.ONE_SECOND,uw="2.10.0",hw=1e4,lw="0.3",fw="WALLETCONNECT_CLIENT_ID",Hr={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},pw="subscription",dw="0.3",gw=fe.FIVE_SECONDS*1e3,yw="pairing",vw="0.3",$n={wc_pairingDelete:{req:{ttl:fe.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:fe.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:fe.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:fe.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:fe.ONE_DAY,prompt:!1,tag:0},res:{ttl:fe.ONE_DAY,prompt:!1,tag:0}}},kr={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},_w="history",mw="0.3",ww="expirer",Cr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},bw="0.3",Ko="verify-api",na="https://verify.walletconnect.com",Zh="https://verify.walletconnect.org";class Ew{constructor(i,r){this.core=i,this.logger=r,this.keychain=new Map,this.name=Z1,this.version=ew,this.initialized=!1,this.storagePrefix=mi,this.init=async()=>{if(!this.initialized){const s=await this.getKeyChain();typeof s<"u"&&(this.keychain=s),this.initialized=!0}},this.has=s=>(this.isInitialized(),this.keychain.has(s)),this.set=async(s,a)=>{this.isInitialized(),this.keychain.set(s,a),await this.persist()},this.get=s=>{this.isInitialized();const a=this.keychain.get(s);if(typeof a>"u"){const{message:l}=se("NO_MATCHING_KEY",`${this.name}: ${s}`);throw new Error(l)}return a},this.del=async s=>{this.isInitialized(),this.keychain.delete(s),await this.persist()},this.core=i,this.logger=Fe.generateChildLogger(r,this.name)}get context(){return Fe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(i){await this.core.storage.setItem(this.storageKey,Ol(i))}async getKeyChain(){const i=await this.core.storage.getItem(this.storageKey);return typeof i<"u"?Al(i):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:i}=se("NOT_INITIALIZED",this.name);throw new Error(i)}}}class Iw{constructor(i,r,s){this.core=i,this.logger=r,this.name=Y1,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=a=>(this.isInitialized(),this.keychain.has(a)),this.getClientId=async()=>{this.isInitialized();const a=await this.getClientSeed(),l=kh(a);return Ul(l.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const a=V0();return this.setPrivateKey(a.publicKey,a.privateKey)},this.signJWT=async a=>{this.isInitialized();const l=await this.getClientSeed(),m=kh(l),b=Zo();return await _m(b,a,X1,m)},this.generateSharedKey=(a,l,m)=>{this.isInitialized();const b=this.getPrivateKey(a),I=K0(b,l);return this.setSymKey(I,m)},this.setSymKey=async(a,l)=>{this.isInitialized();const m=l||B0(a);return await this.keychain.set(m,a),m},this.deleteKeyPair=async a=>{this.isInitialized(),await this.keychain.del(a)},this.deleteSymKey=async a=>{this.isInitialized(),await this.keychain.del(a)},this.encode=async(a,l,m)=>{this.isInitialized();const b=G0(m),I=uc(l);if(bh(b)){const X=b.senderPublicKey,Z=b.receiverPublicKey;a=await this.generateSharedKey(X,Z)}const T=this.getSymKey(a),{type:U,senderPublicKey:Y}=b;return W0({type:U,symKey:T,message:I,senderPublicKey:Y})},this.decode=async(a,l,m)=>{this.isInitialized();const b=J0(l,m);if(bh(b)){const I=b.receiverPublicKey,T=b.senderPublicKey;a=await this.generateSharedKey(I,T)}try{const I=this.getSymKey(a),T=Q0({symKey:I,encoded:l});return Tl(T)}catch(I){this.logger.error(`Failed to decode message from topic: '${a}', clientId: '${await this.getClientId()}'`),this.logger.error(I)}},this.getPayloadType=a=>{const l=Eh(a);return Y0(l.type)},this.getPayloadSenderPublicKey=a=>{const l=Eh(a);return l.senderPublicKey?ca(l.senderPublicKey,X0):void 0},this.core=i,this.logger=Fe.generateChildLogger(r,this.name),this.keychain=s||new Ew(this.core,this.logger)}get context(){return Fe.getLoggerContext(this.logger)}async setPrivateKey(i,r){return await this.keychain.set(i,r),i}getPrivateKey(i){return this.keychain.get(i)}async getClientSeed(){let i="";try{i=this.keychain.get(Yh)}catch{i=Zo(),await this.keychain.set(Yh,i)}return G1(i,"base16")}getSymKey(i){return this.keychain.get(i)}isInitialized(){if(!this.initialized){const{message:i}=se("NOT_INITIALIZED",this.name);throw new Error(i)}}}class xw extends Q_{constructor(i,r){super(i,r),this.logger=i,this.core=r,this.messages=new Map,this.name=tw,this.version=rw,this.initialized=!1,this.storagePrefix=mi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const s=await this.getRelayerMessages();typeof s<"u"&&(this.messages=s),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(s){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(s)}finally{this.initialized=!0}}},this.set=async(s,a)=>{this.isInitialized();const l=hn(a);let m=this.messages.get(s);return typeof m>"u"&&(m={}),typeof m[l]<"u"||(m[l]=a,this.messages.set(s,m),await this.persist()),l},this.get=s=>{this.isInitialized();let a=this.messages.get(s);return typeof a>"u"&&(a={}),a},this.has=(s,a)=>{this.isInitialized();const l=this.get(s),m=hn(a);return typeof l[m]<"u"},this.del=async s=>{this.isInitialized(),this.messages.delete(s),await this.persist()},this.logger=Fe.generateChildLogger(i,this.name),this.core=r}get context(){return Fe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(i){await this.core.storage.setItem(this.storageKey,Ol(i))}async getRelayerMessages(){const i=await this.core.storage.getItem(this.storageKey);return typeof i<"u"?Al(i):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:i}=se("NOT_INITIALIZED",this.name);throw new Error(i)}}}class Sw extends Y_{constructor(i,r){super(i,r),this.relayer=i,this.logger=r,this.events=new vr.exports.EventEmitter,this.name=nw,this.queue=new Map,this.publishTimeout=fe.toMiliseconds(fe.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(s,a,l)=>{var m;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:a,opts:l}});try{const b=l?.ttl||iw,I=ec(l),T=l?.prompt||!1,U=l?.tag||0,Y=l?.id||A_().toString(),X={topic:s,message:a,opts:{ttl:b,relay:I,prompt:T,tag:U,id:Y}},Z=setTimeout(()=>this.queue.set(Y,X),this.publishTimeout);try{await await Vn(this.rpcPublish(s,a,b,I,T,U,Y),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(Y),this.relayer.events.emit(Gt.publish,X)}catch(B){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(m=l?.internal)!=null&&m.throwOnFailedPublish)throw this.removeRequestFromQueue(Y),B;return}finally{clearTimeout(Z)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:s,message:a,opts:l}})}catch(b){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(b),b}},this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.relayer=i,this.logger=Fe.generateChildLogger(r,this.name),this.registerEventListeners()}get context(){return Fe.getLoggerContext(this.logger)}rpcPublish(i,r,s,a,l,m,b){var I,T,U,Y;const X={method:ra(a.protocol).publish,params:{topic:i,message:r,ttl:s,prompt:l,tag:m},id:b};return _i((I=X.params)==null?void 0:I.prompt)&&((T=X.params)==null||delete T.prompt),_i((U=X.params)==null?void 0:U.tag)&&((Y=X.params)==null||delete Y.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:X}),this.relayer.request(X)}removeRequestFromQueue(i){this.queue.delete(i)}checkQueue(){this.queue.forEach(async i=>{const{topic:r,message:s,opts:a}=i;await this.publish(r,s,a)})}registerEventListeners(){this.relayer.core.heartbeat.on(fn.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Gt.connection_stalled);return}this.checkQueue()}),this.relayer.on(Gt.message_ack,i=>{this.removeRequestFromQueue(i.id.toString())})}}class Pw{constructor(){this.map=new Map,this.set=(i,r)=>{const s=this.get(i);this.exists(i,r)||this.map.set(i,[...s,r])},this.get=i=>this.map.get(i)||[],this.exists=(i,r)=>this.get(i).includes(r),this.delete=(i,r)=>{if(typeof r>"u"){this.map.delete(i);return}if(!this.map.has(i))return;const s=this.get(i);if(!this.exists(i,r))return;const a=s.filter(l=>l!==r);if(!a.length){this.map.delete(i);return}this.map.set(i,a)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Cw=Object.defineProperty,Ow=Object.defineProperties,Aw=Object.getOwnPropertyDescriptors,el=Object.getOwnPropertySymbols,Rw=Object.prototype.hasOwnProperty,Tw=Object.prototype.propertyIsEnumerable,tl=(h,i,r)=>i in h?Cw(h,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):h[i]=r,Mn=(h,i)=>{for(var r in i||(i={}))Rw.call(i,r)&&tl(h,r,i[r]);if(el)for(var r of el(i))Tw.call(i,r)&&tl(h,r,i[r]);return h},Bo=(h,i)=>Ow(h,Aw(i));class Dw extends em{constructor(i,r){super(i,r),this.relayer=i,this.logger=r,this.subscriptions=new Map,this.topicMap=new Pw,this.events=new vr.exports.EventEmitter,this.name=pw,this.version=dw,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=mi,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(s,a)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:a}});try{const l=ec(a),m={topic:s,relay:l};this.pending.set(s,m);const b=await this.rpcSubscribe(s,l);return this.onSubscribe(b,m),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:s,opts:a}}),b}catch(l){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(l),l}},this.unsubscribe=async(s,a)=>{await this.restartToComplete(),this.isInitialized(),typeof a?.id<"u"?await this.unsubscribeById(s,a.id,a):await this.unsubscribeByTopic(s,a)},this.isSubscribed=async s=>this.topics.includes(s)?!0:await new Promise((a,l)=>{const m=new fe.Watch;m.start(this.pendingSubscriptionWatchLabel);const b=setInterval(()=>{!this.pending.has(s)&&this.topics.includes(s)&&(clearInterval(b),m.stop(this.pendingSubscriptionWatchLabel),a(!0)),m.elapsed(this.pendingSubscriptionWatchLabel)>=gw&&(clearInterval(b),m.stop(this.pendingSubscriptionWatchLabel),l(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=i,this.logger=Fe.generateChildLogger(r,this.name),this.clientId=""}get context(){return Fe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(i,r){let s=!1;try{s=this.getSubscription(i).topic===r}catch{}return s}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(i,r){const s=this.topicMap.get(i);await Promise.all(s.map(async a=>await this.unsubscribeById(i,a,r)))}async unsubscribeById(i,r,s){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:i,id:r,opts:s}});try{const a=ec(s);await this.rpcUnsubscribe(i,r,a);const l=tr("USER_DISCONNECTED",`${this.name}, ${i}`);await this.onUnsubscribe(i,r,l),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:i,id:r,opts:s}})}catch(a){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(a),a}}async rpcSubscribe(i,r){const s={method:ra(r.protocol).subscribe,params:{topic:i}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{await await Vn(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Gt.connection_stalled)}return hn(i+this.clientId)}async rpcBatchSubscribe(i){if(!i.length)return;const r=i[0].relay,s={method:ra(r.protocol).batchSubscribe,params:{topics:i.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s});try{return await await Vn(this.relayer.request(s),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(Gt.connection_stalled)}}rpcUnsubscribe(i,r,s){const a={method:ra(s.protocol).unsubscribe,params:{topic:i,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(i,r){this.setSubscription(i,Bo(Mn({},r),{id:i})),this.pending.delete(r.topic)}onBatchSubscribe(i){i.length&&i.forEach(r=>{this.setSubscription(r.id,Mn({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(i,r,s){this.events.removeAllListeners(r),this.hasSubscription(r,i)&&this.deleteSubscription(r,s),await this.relayer.messages.del(i)}async setRelayerSubscriptions(i){await this.relayer.core.storage.setItem(this.storageKey,i)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(i,r){this.subscriptions.has(i)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:i,subscription:r}),this.addSubscription(i,r))}addSubscription(i,r){this.subscriptions.set(i,Mn({},r)),this.topicMap.set(r.topic,i),this.events.emit(Hr.created,r)}getSubscription(i){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:i});const r=this.subscriptions.get(i);if(!r){const{message:s}=se("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(s)}return r}deleteSubscription(i,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:i,reason:r});const s=this.getSubscription(i);this.subscriptions.delete(i),this.topicMap.delete(s.topic,i),this.events.emit(Hr.deleted,Bo(Mn({},s),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(Hr.sync)}async reset(){if(this.cached.length){const i=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<i;r++){const s=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(s)}}this.events.emit(Hr.resubscribed)}async restore(){try{const i=await this.getRelayerSubscriptions();if(typeof i>"u"||!i.length)return;if(this.subscriptions.size){const{message:r}=se("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=i,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(i){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(i)}}async batchSubscribe(i){if(!i.length)return;const r=await this.rpcBatchSubscribe(i);ln(r)&&this.onBatchSubscribe(r.map((s,a)=>Bo(Mn({},i[a]),{id:s})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const i=[];this.pending.forEach(r=>{i.push(r)}),await this.batchSubscribe(i)}registerEventListeners(){this.relayer.core.heartbeat.on(fn.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(Gt.connect,async()=>{await this.onConnect()}),this.relayer.on(Gt.disconnect,()=>{this.onDisconnect()}),this.events.on(Hr.created,async i=>{const r=Hr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),await this.persist()}),this.events.on(Hr.deleted,async i=>{const r=Hr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:i}=se("NOT_INITIALIZED",this.name);throw new Error(i)}}async restartToComplete(){this.restartInProgress&&await new Promise(i=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),i())},this.pollingInterval)})}}var Nw=Object.defineProperty,rl=Object.getOwnPropertySymbols,Fw=Object.prototype.hasOwnProperty,Lw=Object.prototype.propertyIsEnumerable,il=(h,i,r)=>i in h?Nw(h,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):h[i]=r,jw=(h,i)=>{for(var r in i||(i={}))Fw.call(i,r)&&il(h,r,i[r]);if(rl)for(var r of rl(i))Lw.call(i,r)&&il(h,r,i[r]);return h};class $w extends X_{constructor(i){super(i),this.protocol="wc",this.version=2,this.events=new vr.exports.EventEmitter,this.name=aw,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(s){throw this.logger.debug("Failed to Publish Request"),this.logger.error(s),s}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(Gt.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(Gt.error,r)},this.registerProviderListeners=()=>{this.provider.on(ri.payload,this.onPayloadHandler),this.provider.on(ri.connect,this.onConnectHandler),this.provider.on(ri.disconnect,this.onDisconnectHandler),this.provider.on(ri.error,this.onProviderErrorHandler)},this.core=i.core,this.logger=typeof i.logger<"u"&&typeof i.logger!="string"?Fe.generateChildLogger(i.logger,this.name):Fe.pino(Fe.getDefaultLoggerOptions({level:i.logger||sw})),this.messages=new xw(this.logger,i.core),this.subscriber=new Dw(this,this.logger),this.publisher=new Sw(this,this.logger),this.relayUrl=i?.relayUrl||ef,this.projectId=i.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${Xh}...`),await this.restartTransport(Xh)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},hw)}get context(){return Fe.getLoggerContext(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(i,r,s){this.isInitialized(),await this.publisher.publish(i,r,s),await this.recordMessageEvent({topic:i,message:r,publishedAt:Date.now()})}async subscribe(i,r){var s;this.isInitialized();let a=((s=this.subscriber.topicMap.get(i))==null?void 0:s[0])||"";return a||(await Promise.all([new Promise(l=>{this.subscriber.once(Hr.created,m=>{m.topic===i&&l()})}),new Promise(async l=>{a=await this.subscriber.subscribe(i,r),l()})]),a)}async unsubscribe(i,r){this.isInitialized(),await this.subscriber.unsubscribe(i,r)}on(i,r){this.events.on(i,r)}once(i,r){this.events.once(i,r)}off(i,r){this.events.off(i,r)}removeListener(i,r){this.events.removeListener(i,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await Vn(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(i){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){i&&i!==this.relayUrl&&(this.relayUrl=i,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(Hr.resubscribed,()=>{r()})}),new Promise(async(r,s)=>{try{await Vn(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(a){s(a);return}r()})])}catch(r){this.logger.error(r);const s=r;if(!this.isConnectionStalled(s.message))throw r;this.provider.events.emit(ri.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(i){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=i||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await Ih())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(i){return this.staleConnectionErrors.some(r=>i.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const i=await this.core.crypto.signJWT(this.relayUrl);this.provider=new wi(new Em(Z0({sdkVersion:uw,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:i,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(i){const{topic:r,message:s}=i;await this.messages.set(r,s)}async shouldIgnoreMessageEvent(i){const{topic:r,message:s}=i;if(!s||s.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${s}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const a=this.messages.has(r,s);return a&&this.logger.debug(`Ignoring duplicate message: ${s}`),a}async onProviderPayload(i){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:i}),lc(i)){if(!i.method.endsWith(ow))return;const r=i.params,{topic:s,message:a,publishedAt:l}=r.data,m={topic:s,message:a,publishedAt:l};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(jw({type:"event",event:r.id},m)),this.events.emit(r.id,m),await this.acknowledgePayload(i),await this.onMessageEvent(m)}else fc(i)&&this.events.emit(Gt.message_ack,i)}async onMessageEvent(i){await this.shouldIgnoreMessageEvent(i)||(this.events.emit(Gt.message,i),await this.recordMessageEvent(i))}async acknowledgePayload(i){const r=pc(i.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(ri.payload,this.onPayloadHandler),this.provider.off(ri.connect,this.onConnectHandler),this.provider.off(ri.disconnect,this.onDisconnectHandler),this.provider.off(ri.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(Gt.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let i=await Ih();e_(async r=>{this.initialized&&i!==r&&(i=r,r?await this.restartTransport().catch(s=>this.logger.error(s)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(s=>this.logger.error(s))))})}onProviderDisconnect(){this.events.emit(Gt.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(i=>this.logger.error(i))},fe.toMiliseconds(cw)))}isInitialized(){if(!this.initialized){const{message:i}=se("NOT_INITIALIZED",this.name);throw new Error(i)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(i=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),i())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var Mw=Object.defineProperty,nl=Object.getOwnPropertySymbols,qw=Object.prototype.hasOwnProperty,Uw=Object.prototype.propertyIsEnumerable,sl=(h,i,r)=>i in h?Mw(h,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):h[i]=r,al=(h,i)=>{for(var r in i||(i={}))qw.call(i,r)&&sl(h,r,i[r]);if(nl)for(var r of nl(i))Uw.call(i,r)&&sl(h,r,i[r]);return h};class la extends Z_{constructor(i,r,s,a=mi,l=void 0){super(i,r,s,a),this.core=i,this.logger=r,this.name=s,this.map=new Map,this.version=lw,this.cached=[],this.initialized=!1,this.storagePrefix=mi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(m=>{this.getKey&&m!==null&&!_i(m)?this.map.set(this.getKey(m),m):k0(m)?this.map.set(m.id,m):H0(m)&&this.map.set(m.topic,m)}),this.cached=[],this.initialized=!0)},this.set=async(m,b)=>{this.isInitialized(),this.map.has(m)?await this.update(m,b):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:m,value:b}),this.map.set(m,b),await this.persist())},this.get=m=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:m}),this.getData(m)),this.getAll=m=>(this.isInitialized(),m?this.values.filter(b=>Object.keys(m).every(I=>Im(b[I],m[I]))):this.values),this.update=async(m,b)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:m,update:b});const I=al(al({},this.getData(m)),b);this.map.set(m,I),await this.persist()},this.delete=async(m,b)=>{this.isInitialized(),this.map.has(m)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:m,reason:b}),this.map.delete(m),await this.persist())},this.logger=Fe.generateChildLogger(r,this.name),this.storagePrefix=a,this.getKey=l}get context(){return Fe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(i){await this.core.storage.setItem(this.storageKey,i)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(i){const r=this.map.get(i);if(!r){const{message:s}=se("NO_MATCHING_KEY",`${this.name}: ${i}`);throw this.logger.error(s),new Error(s)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const i=await this.getDataStore();if(typeof i>"u"||!i.length)return;if(this.map.size){const{message:r}=se("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=i,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(i){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(i)}}isInitialized(){if(!this.initialized){const{message:i}=se("NOT_INITIALIZED",this.name);throw new Error(i)}}}class zw{constructor(i,r){this.core=i,this.logger=r,this.name=yw,this.version=vw,this.events=new vr.exports,this.initialized=!1,this.storagePrefix=mi,this.ignoredPayloadTypes=[Sl],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:s})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...s])]},this.create=async()=>{this.isInitialized();const s=Zo(),a=await this.core.crypto.setSymKey(s),l=Lr(fe.FIVE_MINUTES),m={protocol:Zl},b={topic:a,expiry:l,relay:m,active:!1},I=t_({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:s,relay:m});return await this.pairings.set(a,b),await this.core.relayer.subscribe(a),this.core.expirer.set(a,l),{topic:a,uri:I}},this.pair=async s=>{this.isInitialized(),this.isValidPair(s);const{topic:a,symKey:l,relay:m}=r_(s.uri);if(this.pairings.keys.includes(a))throw new Error(`Pairing already exists: ${a}`);if(this.core.crypto.hasKeys(a))throw new Error(`Keychain already exists: ${a}`);const b=Lr(fe.FIVE_MINUTES),I={topic:a,relay:m,expiry:b,active:!1};return await this.pairings.set(a,I),await this.core.crypto.setSymKey(l,a),await this.core.relayer.subscribe(a,{relay:m}),this.core.expirer.set(a,b),s.activatePairing&&await this.activate({topic:a}),I},this.activate=async({topic:s})=>{this.isInitialized();const a=Lr(fe.THIRTY_DAYS);await this.pairings.update(s,{active:!0,expiry:a}),this.core.expirer.set(s,a)},this.ping=async s=>{this.isInitialized(),await this.isValidPing(s);const{topic:a}=s;if(this.pairings.keys.includes(a)){const l=await this.sendRequest(a,"wc_pairingPing",{}),{done:m,resolve:b,reject:I}=on();this.events.once(Ft("pairing_ping",l),({error:T})=>{T?I(T):b()}),await m()}},this.updateExpiry=async({topic:s,expiry:a})=>{this.isInitialized(),await this.pairings.update(s,{expiry:a})},this.updateMetadata=async({topic:s,metadata:a})=>{this.isInitialized(),await this.pairings.update(s,{peerMetadata:a})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async s=>{this.isInitialized(),await this.isValidDisconnect(s);const{topic:a}=s;this.pairings.keys.includes(a)&&(await this.sendRequest(a,"wc_pairingDelete",tr("USER_DISCONNECTED")),await this.deletePairing(a))},this.sendRequest=async(s,a,l)=>{const m=sa(a,l),b=await this.core.crypto.encode(s,m),I=$n[a].req;return this.core.history.set(s,m),this.core.relayer.publish(s,b,I),m.id},this.sendResult=async(s,a,l)=>{const m=pc(s,l),b=await this.core.crypto.encode(a,m),I=await this.core.history.get(a,s),T=$n[I.request.method].res;await this.core.relayer.publish(a,b,T),await this.core.history.resolve(m)},this.sendError=async(s,a,l)=>{const m=hc(s,l),b=await this.core.crypto.encode(a,m),I=await this.core.history.get(a,s),T=$n[I.request.method]?$n[I.request.method].res:$n.unregistered_method.res;await this.core.relayer.publish(a,b,T),await this.core.history.resolve(m)},this.deletePairing=async(s,a)=>{await this.core.relayer.unsubscribe(s),await Promise.all([this.pairings.delete(s,tr("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(s),a?Promise.resolve():this.core.expirer.del(s)])},this.cleanup=async()=>{const s=this.pairings.getAll().filter(a=>vi(a.expiry));await Promise.all(s.map(a=>this.deletePairing(a.topic)))},this.onRelayEventRequest=s=>{const{topic:a,payload:l}=s;switch(l.method){case"wc_pairingPing":return this.onPairingPingRequest(a,l);case"wc_pairingDelete":return this.onPairingDeleteRequest(a,l);default:return this.onUnknownRpcMethodRequest(a,l)}},this.onRelayEventResponse=async s=>{const{topic:a,payload:l}=s,m=(await this.core.history.get(a,l.id)).request.method;switch(m){case"wc_pairingPing":return this.onPairingPingResponse(a,l);default:return this.onUnknownRpcMethodResponse(m)}},this.onPairingPingRequest=async(s,a)=>{const{id:l}=a;try{this.isValidPing({topic:s}),await this.sendResult(l,s,!0),this.events.emit("pairing_ping",{id:l,topic:s})}catch(m){await this.sendError(l,s,m),this.logger.error(m)}},this.onPairingPingResponse=(s,a)=>{const{id:l}=a;setTimeout(()=>{yi(a)?this.events.emit(Ft("pairing_ping",l),{}):ni(a)&&this.events.emit(Ft("pairing_ping",l),{error:a.error})},500)},this.onPairingDeleteRequest=async(s,a)=>{const{id:l}=a;try{this.isValidDisconnect({topic:s}),await this.deletePairing(s),this.events.emit("pairing_delete",{id:l,topic:s})}catch(m){await this.sendError(l,s,m),this.logger.error(m)}},this.onUnknownRpcMethodRequest=async(s,a)=>{const{id:l,method:m}=a;try{if(this.registeredMethods.includes(m))return;const b=tr("WC_METHOD_UNSUPPORTED",m);await this.sendError(l,s,b),this.logger.error(b)}catch(b){await this.sendError(l,s,b),this.logger.error(b)}},this.onUnknownRpcMethodResponse=s=>{this.registeredMethods.includes(s)||this.logger.error(tr("WC_METHOD_UNSUPPORTED",s))},this.isValidPair=s=>{if(!ur(s)){const{message:a}=se("MISSING_OR_INVALID",`pair() params: ${s}`);throw new Error(a)}if(!i_(s.uri)){const{message:a}=se("MISSING_OR_INVALID",`pair() uri: ${s.uri}`);throw new Error(a)}},this.isValidPing=async s=>{if(!ur(s)){const{message:l}=se("MISSING_OR_INVALID",`ping() params: ${s}`);throw new Error(l)}const{topic:a}=s;await this.isValidPairingTopic(a)},this.isValidDisconnect=async s=>{if(!ur(s)){const{message:l}=se("MISSING_OR_INVALID",`disconnect() params: ${s}`);throw new Error(l)}const{topic:a}=s;await this.isValidPairingTopic(a)},this.isValidPairingTopic=async s=>{if(!cn(s,!1)){const{message:a}=se("MISSING_OR_INVALID",`pairing topic should be a string: ${s}`);throw new Error(a)}if(!this.pairings.keys.includes(s)){const{message:a}=se("NO_MATCHING_KEY",`pairing topic doesn't exist: ${s}`);throw new Error(a)}if(vi(this.pairings.get(s).expiry)){await this.deletePairing(s);const{message:a}=se("EXPIRED",`pairing topic: ${s}`);throw new Error(a)}},this.core=i,this.logger=Fe.generateChildLogger(r,this.name),this.pairings=new la(this.core,this.logger,this.name,this.storagePrefix)}get context(){return Fe.getLoggerContext(this.logger)}isInitialized(){if(!this.initialized){const{message:i}=se("NOT_INITIALIZED",this.name);throw new Error(i)}}registerRelayerEvents(){this.core.relayer.on(Gt.message,async i=>{const{topic:r,message:s}=i;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(s)))return;const a=await this.core.crypto.decode(r,s);try{lc(a)?(this.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):fc(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a}),this.core.history.delete(r,a.id))}catch(l){this.logger.error(l)}})}registerExpirerEvents(){this.core.expirer.on(Cr.expired,async i=>{const{topic:r}=Pl(i.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit("pairing_expire",{topic:r}))})}}class kw extends J_{constructor(i,r){super(i,r),this.core=i,this.logger=r,this.records=new Map,this.events=new vr.exports.EventEmitter,this.name=_w,this.version=mw,this.cached=[],this.initialized=!1,this.storagePrefix=mi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.records.set(s.id,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(s,a,l)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:s,request:a,chainId:l}),this.records.has(a.id))return;const m={id:a.id,topic:s,request:{method:a.method,params:a.params||null},chainId:l,expiry:Lr(fe.THIRTY_DAYS)};this.records.set(m.id,m),this.events.emit(kr.created,m)},this.resolve=async s=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:s}),!this.records.has(s.id))return;const a=await this.getRecord(s.id);typeof a.response>"u"&&(a.response=ni(s)?{error:s.error}:{result:s.result},this.records.set(a.id,a),this.events.emit(kr.updated,a))},this.get=async(s,a)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:s,id:a}),await this.getRecord(a)),this.delete=(s,a)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:a}),this.values.forEach(l=>{if(l.topic===s){if(typeof a<"u"&&l.id!==a)return;this.records.delete(l.id),this.events.emit(kr.deleted,l)}})},this.exists=async(s,a)=>(this.isInitialized(),this.records.has(a)?(await this.getRecord(a)).topic===s:!1),this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.logger=Fe.generateChildLogger(r,this.name)}get context(){return Fe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const i=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const s={topic:r.topic,request:sa(r.request.method,r.request.params,r.id),chainId:r.chainId};return i.push(s)}),i}async setJsonRpcRecords(i){await this.core.storage.setItem(this.storageKey,i)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(i){this.isInitialized();const r=this.records.get(i);if(!r){const{message:s}=se("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(s)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(kr.sync)}async restore(){try{const i=await this.getJsonRpcRecords();if(typeof i>"u"||!i.length)return;if(this.records.size){const{message:r}=se("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=i,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}}registerEventListeners(){this.events.on(kr.created,i=>{const r=kr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:i}),this.persist()}),this.events.on(kr.updated,i=>{const r=kr.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:i}),this.persist()}),this.events.on(kr.deleted,i=>{const r=kr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:i}),this.persist()}),this.core.heartbeat.on(fn.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(i=>{fe.toMiliseconds(i.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${i.id}`),this.delete(i.topic,i.id))})}catch(i){this.logger.warn(i)}}isInitialized(){if(!this.initialized){const{message:i}=se("NOT_INITIALIZED",this.name);throw new Error(i)}}}class Hw extends tm{constructor(i,r){super(i,r),this.core=i,this.logger=r,this.expirations=new Map,this.events=new vr.exports.EventEmitter,this.name=ww,this.version=bw,this.cached=[],this.initialized=!1,this.storagePrefix=mi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(s=>this.expirations.set(s.target,s)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=s=>{try{const a=this.formatTarget(s);return typeof this.getExpiration(a)<"u"}catch{return!1}},this.set=(s,a)=>{this.isInitialized();const l=this.formatTarget(s),m={target:l,expiry:a};this.expirations.set(l,m),this.checkExpiry(l,m),this.events.emit(Cr.created,{target:l,expiration:m})},this.get=s=>{this.isInitialized();const a=this.formatTarget(s);return this.getExpiration(a)},this.del=s=>{if(this.isInitialized(),this.has(s)){const a=this.formatTarget(s),l=this.getExpiration(a);this.expirations.delete(a),this.events.emit(Cr.deleted,{target:a,expiration:l})}},this.on=(s,a)=>{this.events.on(s,a)},this.once=(s,a)=>{this.events.once(s,a)},this.off=(s,a)=>{this.events.off(s,a)},this.removeListener=(s,a)=>{this.events.removeListener(s,a)},this.logger=Fe.generateChildLogger(r,this.name)}get context(){return Fe.getLoggerContext(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(i){if(typeof i=="string")return n_(i);if(typeof i=="number")return s_(i);const{message:r}=se("UNKNOWN_TYPE",`Target type: ${typeof i}`);throw new Error(r)}async setExpirations(i){await this.core.storage.setItem(this.storageKey,i)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Cr.sync)}async restore(){try{const i=await this.getExpirations();if(typeof i>"u"||!i.length)return;if(this.expirations.size){const{message:r}=se("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=i,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(i){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(i)}}getExpiration(i){const r=this.expirations.get(i);if(!r){const{message:s}=se("NO_MATCHING_KEY",`${this.name}: ${i}`);throw this.logger.error(s),new Error(s)}return r}checkExpiry(i,r){const{expiry:s}=r;fe.toMiliseconds(s)-Date.now()<=0&&this.expire(i,r)}expire(i,r){this.expirations.delete(i),this.events.emit(Cr.expired,{target:i,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((i,r)=>this.checkExpiry(r,i))}registerEventListeners(){this.core.heartbeat.on(fn.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Cr.created,i=>{const r=Cr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),this.persist()}),this.events.on(Cr.expired,i=>{const r=Cr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),this.persist()}),this.events.on(Cr.deleted,i=>{const r=Cr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:i}),this.persist()})}isInitialized(){if(!this.initialized){const{message:i}=se("NOT_INITIALIZED",this.name);throw new Error(i)}}}class Vw extends rm{constructor(i,r){super(i,r),this.projectId=i,this.logger=r,this.name=Ko,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async s=>{if(this.verifyDisabled||a_()||!Cl())return;const a=s?.verifyUrl||na;this.verifyUrl!==a&&this.removeIframe(),this.verifyUrl=a;try{await this.createIframe()}catch(l){this.logger.warn(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.warn(l)}if(!this.initialized){this.removeIframe(),this.verifyUrl=Zh;try{await this.createIframe()}catch(l){this.logger.error(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.error(l),this.verifyDisabled=!0}}},this.register=async s=>{this.initialized?this.sendPost(s.attestationId):(this.addToQueue(s.attestationId),await this.init())},this.resolve=async s=>{if(this.isDevEnv)return"";const a=s?.verifyUrl||na;let l="";try{l=await this.fetchAttestation(s.attestationId,a)}catch(m){this.logger.warn(`failed to resolve attestation: ${s.attestationId} from url: ${a}`),this.logger.warn(m),l=await this.fetchAttestation(s.attestationId,Zh)}return l},this.fetchAttestation=async(s,a)=>{var l;this.logger.info(`resolving attestation: ${s} from url: ${a}`);const m=this.startAbortTimer(fe.ONE_SECOND*2),b=await fetch(`${a}/attestation/${s}`,{signal:this.abortController.signal});return clearTimeout(m),b.status===200?(l=await b.json())==null?void 0:l.origin:""},this.addToQueue=s=>{this.queue.push(s)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(s=>this.sendPost(s)),this.queue=[])},this.sendPost=s=>{var a;try{if(!this.iframe)return;(a=this.iframe.contentWindow)==null||a.postMessage(s,"*"),this.logger.info(`postMessage sent: ${s} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let s;const a=l=>{l.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",a),s())};await Promise.race([new Promise(l=>{if(document.getElementById(Ko))return l();window.addEventListener("message",a);const m=document.createElement("iframe");m.id=Ko,m.src=`${this.verifyUrl}/${this.projectId}`,m.style.display="none",document.body.append(m),this.iframe=m,s=l}),new Promise((l,m)=>setTimeout(()=>{window.removeEventListener("message",a),m("verify iframe load timeout")},fe.toMiliseconds(fe.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=Fe.generateChildLogger(r,this.name),this.verifyUrl=na,this.abortController=new AbortController,this.isDevEnv=o_()&&{ALLUSERSPROFILE:"C:\\ProgramData",APPDATA:"C:\\Users\\laksh\\AppData\\Roaming",CHROME_CRASHPAD_PIPE_NAME:"\\\\.\\pipe\\crashpad_21320_GRZDCIRPSBHMPHQB",COLOR:"1",COLORTERM:"truecolor",CommonProgramFiles:"C:\\Program Files\\Common Files","CommonProgramFiles(x86)":"C:\\Program Files (x86)\\Common Files",CommonProgramW6432:"C:\\Program Files\\Common Files",COMPUTERNAME:"LAKSHAY",ComSpec:"C:\\Windows\\system32\\cmd.exe",DriverData:"C:\\Windows\\System32\\Drivers\\DriverData",EDITOR:"C:\\Windows\\notepad.exe",EFC_10224:"1",FPS_BROWSER_APP_PROFILE_STRING:"Internet Explorer",FPS_BROWSER_USER_PROFILE_STRING:"Default",GIT_ASKPASS:"c:\\Users\\laksh\\AppData\\Local\\Programs\\Microsoft_VS_Code\\resources\\app\\extensions\\git\\dist\\askpass.sh",GIT_LFS_PATH:"C:\\Program Files\\Git LFS",HOME:"C:\\Users\\laksh",HOMEDRIVE:"C:",HOMEPATH:"\\Users\\laksh",IGCCSVC_DB:"AQAAANCMnd8BFdERjHoAwE/Cl+sBAAAA/Hxdb3DRS0ayEwzW824UsQQAAAACAAAAAAAQZgAAAAEAACAAAAAD/eMp7s9Clrey3UL4vJptw+/yj/A7YuE7PTmN4skIPwAAAAAOgAAAAAIAACAAAAA2khctMs/fKmo6vIvfIJNkEBCad5tBQzHdQbDFlCCwaGAAAABQTDMxalNbUPbgyoP4HN8qGA+0iABBKyS29D9j8xpqAnIycluEWt6H8DUWRGnGWhhubSL8rkyO0FhecoLpV/KXnz86iVxwgKvqJZhZOccFq26I4WsFkhClNabNmrwXOiRAAAAA9V1HatjLNvSkaneC3lGnLTO1oiOV/UM0hoOy4+QJlfa1pugsLnBdezO/2sMZRnTLZtUMcFiVBqYl2B3kFs8miQ==",INIT_CWD:"C:\\Users\\laksh\\OneDrive\\Desktop\\developmentWithAPi\\Particle_test\\particle-rainbowkit-boilerplate",LANG:"en_US.UTF-8",LOCALAPPDATA:"C:\\Users\\laksh\\AppData\\Local",LOGONSERVER:"\\\\LAKSHAY",NODE:"C:\\Program Files\\nodejs\\node.exe",NODE_ENV:"production",NODE_EXE:"C:\\Program Files\\nodejs\\\\node.exe",NPM_CLI_JS:"C:\\Program Files\\nodejs\\\\node_modules\\npm\\bin\\npm-cli.js",npm_command:"run-script",npm_config_cache:"C:\\Users\\laksh\\AppData\\Local\\npm-cache",npm_config_globalconfig:"C:\\Users\\laksh\\AppData\\Roaming\\npm\\etc\\npmrc",npm_config_global_prefix:"C:\\Users\\laksh\\AppData\\Roaming\\npm",npm_config_init_module:"C:\\Users\\laksh\\.npm-init.js",npm_config_local_prefix:"C:\\Users\\laksh\\OneDrive\\Desktop\\developmentWithAPi\\Particle_test\\particle-rainbowkit-boilerplate",npm_config_node_gyp:"C:\\Users\\laksh\\AppData\\Roaming\\nvm\\v20.11.1\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js",npm_config_noproxy:"",npm_config_npm_version:"10.2.4",npm_config_prefix:"C:\\Users\\laksh\\AppData\\Roaming\\npm",npm_config_userconfig:"C:\\Users\\laksh\\.npmrc",npm_config_user_agent:"npm/10.2.4 node/v20.11.1 win32 x64 workspaces/false",npm_execpath:"C:\\Users\\laksh\\AppData\\Roaming\\nvm\\v20.11.1\\node_modules\\npm\\bin\\npm-cli.js",npm_lifecycle_event:"build",npm_lifecycle_script:"tsc && vite build",npm_node_execpath:"C:\\Program Files\\nodejs\\node.exe",npm_package_json:"C:\\Users\\laksh\\OneDrive\\Desktop\\developmentWithAPi\\Particle_test\\particle-rainbowkit-boilerplate\\package.json",npm_package_name:"particle-rainbowkit-boilerplate",npm_package_version:"1.0.0",NPM_PREFIX_NPM_CLI_JS:"C:\\Users\\laksh\\AppData\\Roaming\\npm\\node_modules\\npm\\bin\\npm-cli.js",NUMBER_OF_PROCESSORS:"8",NVM_HOME:"C:\\Users\\laksh\\AppData\\Roaming\\nvm",NVM_SYMLINK:"C:\\Program Files\\nodejs",OneDrive:"C:\\Users\\laksh\\OneDrive",OneDriveConsumer:"C:\\Users\\laksh\\OneDrive",ORIGINAL_XDG_CURRENT_DESKTOP:"undefined",OS:"Windows_NT",Path:"C:\\Users\\laksh\\OneDrive\\Desktop\\developmentWithAPi\\Particle_test\\particle-rainbowkit-boilerplate\\node_modules\\.bin;C:\\Users\\laksh\\OneDrive\\Desktop\\developmentWithAPi\\Particle_test\\node_modules\\.bin;C:\\Users\\laksh\\OneDrive\\Desktop\\developmentWithAPi\\node_modules\\.bin;C:\\Users\\laksh\\OneDrive\\Desktop\\node_modules\\.bin;C:\\Users\\laksh\\OneDrive\\node_modules\\.bin;C:\\Users\\laksh\\node_modules\\.bin;C:\\Users\\node_modules\\.bin;C:\\node_modules\\.bin;C:\\Users\\laksh\\AppData\\Roaming\\nvm\\v20.11.1\\node_modules\\npm\\node_modules\\@npmcli\\run-script\\lib\\node-gyp-bin;C:\\Windows\\system32;C:\\Windows;C:\\Windows\\System32\\Wbem;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\;C:\\Windows\\System32\\OpenSSH\\;C:\\Program Files (x86)\\NVIDIA Corporation\\PhysX\\Common;C:\\Program Files\\NVIDIA Corporation\\NVIDIA NvDLISR;C:\\Program Files\\MySQL\\MySQL Server 8.0\\bin;C:\\Program Files\\Git\\cmd;C:\\MinGW\\bin;C:\\Program Files\\PuTTY\\;C:\\Program Files\\Amazon\\AWSCLIV2\\;C:\\Program Files\\Git LFS;C:\\Program Files\\TortoiseGit\\bin;C:\\Users\\laksh\\AppData\\Roaming\\nvm;C:\\Program Files\\nodejs;C:\\ProgramData\\ComposerSetup\\bin;C:\\Users\\laksh\\scoop\\shims\\php.exe;C:\\Program Files\\dotnet\\;C:\\Users\\laksh\\scoop\\shims;C:\\Users\\laksh\\AppData\\Local\\Programs\\Python\\Python311\\Scripts\\;C:\\Users\\laksh\\AppData\\Local\\Programs\\Python\\Python311\\;C:\\Users\\laksh\\AppData\\Local\\Microsoft\\WindowsApps;C:\\Users\\laksh\\AppData\\Local\\Programs\\mongosh\\;C:\\Users\\laksh\\AppData\\Roaming\\nvm;C:\\Program Files\\nodejs;C:\\Users\\laksh\\AppData\\Roaming\\Composer\\vendor\\bin;C:\\Users\\laksh\\AppData\\Local\\Programs\\Microsoft_VS_Code\\bin",PATHEXT:".COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.CPL",PHP_INI_SCAN_DIR:"C:\\Users\\laksh\\scoop\\persist\\php7.4;C:\\Users\\laksh\\scoop\\apps\\php7.4\\current\\conf.d;",PROCESSOR_ARCHITECTURE:"AMD64",PROCESSOR_IDENTIFIER:"Intel64 Family 6 Model 140 Stepping 2, GenuineIntel",PROCESSOR_LEVEL:"6",PROCESSOR_REVISION:"8c02",ProgramData:"C:\\ProgramData",ProgramFiles:"C:\\Program Files","ProgramFiles(x86)":"C:\\Program Files (x86)",ProgramW6432:"C:\\Program Files",PROMPT:"$P$G",PSModulePath:"C:\\Users\\laksh\\Documents\\WindowsPowerShell\\Modules;C:\\Program Files\\WindowsPowerShell\\Modules;C:\\Windows\\system32\\WindowsPowerShell\\v1.0\\Modules",PUBLIC:"C:\\Users\\Public",SESSIONNAME:"Console",SystemDrive:"C:",SystemRoot:"C:\\Windows",TEMP:"C:\\Users\\laksh\\AppData\\Local\\Temp",TERM_PROGRAM:"vscode",TERM_PROGRAM_VERSION:"1.93.0",TMP:"C:\\Users\\laksh\\AppData\\Local\\Temp",USERDOMAIN:"LAKSHAY",USERDOMAIN_ROAMINGPROFILE:"LAKSHAY",USERNAME:"laksh",USERPROFILE:"C:\\Users\\laksh",VSCODE_GIT_ASKPASS_EXTRA_ARGS:"",VSCODE_GIT_ASKPASS_MAIN:"c:\\Users\\laksh\\AppData\\Local\\Programs\\Microsoft_VS_Code\\resources\\app\\extensions\\git\\dist\\askpass-main.js",VSCODE_GIT_ASKPASS_NODE:"C:\\Users\\laksh\\AppData\\Local\\Programs\\Microsoft_VS_Code\\Code.exe",VSCODE_GIT_IPC_HANDLE:"\\\\.\\pipe\\vscode-git-f5c532fed6-sock",VSCODE_INJECTION:"1",windir:"C:\\Windows",ZES_ENABLE_SYSMAN:"1"}.IS_VITEST}get context(){return Fe.getLoggerContext(this.logger)}startAbortTimer(i){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),fe.toMiliseconds(i))}}var Kw=Object.defineProperty,ol=Object.getOwnPropertySymbols,Bw=Object.prototype.hasOwnProperty,Gw=Object.prototype.propertyIsEnumerable,cl=(h,i,r)=>i in h?Kw(h,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):h[i]=r,ul=(h,i)=>{for(var r in i||(i={}))Bw.call(i,r)&&cl(h,r,i[r]);if(ol)for(var r of ol(i))Gw.call(i,r)&&cl(h,r,i[r]);return h};class vc extends W_{constructor(i){super(i),this.protocol=Xl,this.version=W1,this.name=yc,this.events=new vr.exports.EventEmitter,this.initialized=!1,this.on=(s,a)=>this.events.on(s,a),this.once=(s,a)=>this.events.once(s,a),this.off=(s,a)=>this.events.off(s,a),this.removeListener=(s,a)=>this.events.removeListener(s,a),this.projectId=i?.projectId,this.relayUrl=i?.relayUrl||ef;const r=typeof i?.logger<"u"&&typeof i?.logger!="string"?i.logger:Fe.pino(Fe.getDefaultLoggerOptions({level:i?.logger||J1.logger}));this.logger=Fe.generateChildLogger(r,this.name),this.heartbeat=new fn.HeartBeat,this.crypto=new Iw(this,this.logger,i?.keychain),this.history=new kw(this,this.logger),this.expirer=new Hw(this,this.logger),this.storage=i!=null&&i.storage?i.storage:new q_(ul(ul({},Q1),i?.storageOptions)),this.relayer=new $w({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new zw(this,this.logger),this.verify=new Vw(this.projectId||"",this.logger)}static async init(i){const r=new vc(i);await r.initialize();const s=await r.crypto.getClientId();return await r.storage.setItem(fw,s),r}get context(){return Fe.getLoggerContext(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(i){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,i),this.logger.error(i.message),i}}}const Ww=vc,tf="wc",rf=2,nf="client",_c=`${tf}@${rf}:${nf}:`,Go={name:nf,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},hl="WALLETCONNECT_DEEPLINK_CHOICE",Jw="proposal",sf="Proposal expired",Qw="session",Zs=fe.SEVEN_DAYS,Yw="engine",qn={wc_sessionPropose:{req:{ttl:fe.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:fe.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:fe.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:fe.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:fe.ONE_DAY,prompt:!1,tag:1104},res:{ttl:fe.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:fe.ONE_DAY,prompt:!1,tag:1106},res:{ttl:fe.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:fe.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:fe.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:fe.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:fe.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:fe.ONE_DAY,prompt:!1,tag:1112},res:{ttl:fe.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:fe.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:fe.THIRTY_SECONDS,prompt:!1,tag:1115}}},Wo={min:fe.FIVE_MINUTES,max:fe.SEVEN_DAYS},ii={idle:"IDLE",active:"ACTIVE"},Xw="request",Zw=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var eb=Object.defineProperty,tb=Object.defineProperties,rb=Object.getOwnPropertyDescriptors,ll=Object.getOwnPropertySymbols,ib=Object.prototype.hasOwnProperty,nb=Object.prototype.propertyIsEnumerable,fl=(h,i,r)=>i in h?eb(h,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):h[i]=r,cr=(h,i)=>{for(var r in i||(i={}))ib.call(i,r)&&fl(h,r,i[r]);if(ll)for(var r of ll(i))nb.call(i,r)&&fl(h,r,i[r]);return h},Un=(h,i)=>tb(h,rb(i));class sb extends nm{constructor(i){super(i),this.name=Yw,this.events=new vr.exports,this.initialized=!1,this.ignoredPayloadTypes=[Sl],this.requestQueue={state:ii.idle,queue:[]},this.sessionRequestQueue={state:ii.idle,queue:[]},this.requestQueueDelay=fe.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.client.core.pairing.register({methods:Object.keys(qn)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},fe.toMiliseconds(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const s=Un(cr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(s);const{pairingTopic:a,requiredNamespaces:l,optionalNamespaces:m,sessionProperties:b,relays:I}=s;let T=a,U,Y=!1;if(T&&(Y=this.client.core.pairing.pairings.get(T).active),!T||!Y){const{topic:pe,uri:he}=await this.client.core.pairing.create();T=pe,U=he}const X=await this.client.core.crypto.generateKeyPair(),Z=cr({requiredNamespaces:l,optionalNamespaces:m,relays:I??[{protocol:Zl}],proposer:{publicKey:X,metadata:this.client.metadata}},b&&{sessionProperties:b}),{reject:B,resolve:ee,done:ce}=on(fe.FIVE_MINUTES,sf);if(this.events.once(Ft("session_connect"),async({error:pe,session:he})=>{if(pe)B(pe);else if(he){he.self.publicKey=X;const le=Un(cr({},he),{requiredNamespaces:he.requiredNamespaces,optionalNamespaces:he.optionalNamespaces});await this.client.session.set(he.topic,le),await this.setExpiry(he.topic,he.expiry),T&&await this.client.core.pairing.updateMetadata({topic:T,metadata:he.peer.metadata}),ee(le)}}),!T){const{message:pe}=se("NO_MATCHING_KEY",`connect() pairing topic: ${T}`);throw new Error(pe)}const me=await this.sendRequest({topic:T,method:"wc_sessionPropose",params:Z}),ge=Lr(fe.FIVE_MINUTES);return await this.setProposal(me,cr({id:me,expiry:ge},Z)),{uri:U,approval:ce}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:s,relayProtocol:a,namespaces:l,sessionProperties:m}=r,b=this.client.proposal.get(s);let{pairingTopic:I,proposer:T,requiredNamespaces:U,optionalNamespaces:Y}=b;I=I||"",ia(U)||(U=c_(l,"approve()"));const X=await this.client.core.crypto.generateKeyPair(),Z=T.publicKey,B=await this.client.core.crypto.generateSharedKey(X,Z);I&&s&&(await this.client.core.pairing.updateMetadata({topic:I,metadata:T.metadata}),await this.sendResult({id:s,topic:I,result:{relay:{protocol:a??"irn"},responderPublicKey:X}}),await this.client.proposal.delete(s,tr("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:I}));const ee=cr({relay:{protocol:a??"irn"},namespaces:l,requiredNamespaces:U,optionalNamespaces:Y,pairingTopic:I,controller:{publicKey:X,metadata:this.client.metadata},expiry:Lr(Zs)},m&&{sessionProperties:m});await this.client.core.relayer.subscribe(B),await this.sendRequest({topic:B,method:"wc_sessionSettle",params:ee,throwOnFailedPublish:!0});const ce=Un(cr({},ee),{topic:B,pairingTopic:I,acknowledged:!1,self:ee.controller,peer:{publicKey:T.publicKey,metadata:T.metadata},controller:X});return await this.client.session.set(B,ce),await this.setExpiry(B,Lr(Zs)),{topic:B,acknowledged:()=>new Promise(me=>setTimeout(()=>me(this.client.session.get(B)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:s,reason:a}=r,{pairingTopic:l}=this.client.proposal.get(s);l&&(await this.sendError(s,l,a),await this.client.proposal.delete(s,tr("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:s,namespaces:a}=r,l=await this.sendRequest({topic:s,method:"wc_sessionUpdate",params:{namespaces:a}}),{done:m,resolve:b,reject:I}=on();return this.events.once(Ft("session_update",l),({error:T})=>{T?I(T):b()}),await this.client.session.update(s,{namespaces:a}),{acknowledged:m}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:s}=r,a=await this.sendRequest({topic:s,method:"wc_sessionExtend",params:{}}),{done:l,resolve:m,reject:b}=on();return this.events.once(Ft("session_extend",a),({error:I})=>{I?b(I):m()}),await this.setExpiry(s,Lr(Zs)),{acknowledged:l}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:s,request:a,topic:l,expiry:m}=r,b=R_(),{done:I,resolve:T,reject:U}=on(m);return this.events.once(Ft("session_request",b),({error:Y,result:X})=>{Y?U(Y):T(X)}),await Promise.all([new Promise(async Y=>{await this.sendRequest({clientRpcId:b,topic:l,method:"wc_sessionRequest",params:{request:a,chainId:s},expiry:m,throwOnFailedPublish:!0}).catch(X=>U(X)),this.client.events.emit("session_request_sent",{topic:l,request:a,chainId:s,id:b}),Y()}),new Promise(async Y=>{const X=await this.client.core.storage.getItem(hl);u_({id:b,topic:l,wcDeepLink:X}),Y()}),I()]).then(Y=>Y[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:s,response:a}=r,{id:l}=a;yi(a)?await this.sendResult({id:l,topic:s,result:a.result,throwOnFailedPublish:!0}):ni(a)&&await this.sendError(l,s,a.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:s}=r;if(this.client.session.keys.includes(s)){const a=await this.sendRequest({topic:s,method:"wc_sessionPing",params:{}}),{done:l,resolve:m,reject:b}=on();this.events.once(Ft("session_ping",a),({error:I})=>{I?b(I):m()}),await l()}else this.client.core.pairing.pairings.keys.includes(s)&&await this.client.core.pairing.ping({topic:s})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:s,event:a,chainId:l}=r;await this.sendRequest({topic:s,method:"wc_sessionEvent",params:{event:a,chainId:l}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:s}=r;this.client.session.keys.includes(s)?(await this.sendRequest({topic:s,method:"wc_sessionDelete",params:tr("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(s)):await this.client.core.pairing.disconnect({topic:s})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(s=>h_(s,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const s=this.client.core.pairing.pairings.get(r.pairingTopic),a=this.client.core.pairing.pairings.getAll().filter(l=>{var m,b;return((m=l.peerMetadata)==null?void 0:m.url)&&((b=l.peerMetadata)==null?void 0:b.url)===r.peer.metadata.url&&l.topic&&l.topic!==s.topic});if(a.length===0)return;this.client.logger.info(`Cleaning up ${a.length} duplicate pairing(s)`),await Promise.all(a.map(l=>this.client.core.pairing.disconnect({topic:l.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(s){this.client.logger.error(s)}},this.deleteSession=async(r,s)=>{const{self:a}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,tr("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),s||this.client.core.expirer.del(r),this.client.core.storage.removeItem(hl).catch(l=>this.client.logger.warn(l))},this.deleteProposal=async(r,s)=>{await Promise.all([this.client.proposal.delete(r,tr("USER_DISCONNECTED")),s?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,s,a=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,s),a?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(l=>l.id!==r),a&&(this.sessionRequestQueue.state=ii.idle)},this.setExpiry=async(r,s)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:s}),this.client.core.expirer.set(r,s)},this.setProposal=async(r,s)=>{await this.client.proposal.set(r,s),this.client.core.expirer.set(r,s.expiry)},this.setPendingSessionRequest=async r=>{const s=qn.wc_sessionRequest.req.ttl,{id:a,topic:l,params:m}=r;await this.client.pendingRequest.set(a,{id:a,topic:l,params:m}),s&&this.client.core.expirer.set(a,Lr(s))},this.sendRequest=async r=>{const{topic:s,method:a,params:l,expiry:m,relayRpcId:b,clientRpcId:I,throwOnFailedPublish:T}=r,U=sa(a,l,I);if(Cl()&&Zw.includes(a)){const Z=hn(JSON.stringify(U));this.client.core.verify.register({attestationId:Z})}const Y=await this.client.core.crypto.encode(s,U),X=qn[a].req;return m&&(X.ttl=m),b&&(X.id=b),this.client.core.history.set(s,U),T?(X.internal=Un(cr({},X.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,Y,X)):this.client.core.relayer.publish(s,Y,X).catch(Z=>this.client.logger.error(Z)),U.id},this.sendResult=async r=>{const{id:s,topic:a,result:l,throwOnFailedPublish:m}=r,b=pc(s,l),I=await this.client.core.crypto.encode(a,b),T=await this.client.core.history.get(a,s),U=qn[T.request.method].res;m?(U.internal=Un(cr({},U.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(a,I,U)):this.client.core.relayer.publish(a,I,U).catch(Y=>this.client.logger.error(Y)),await this.client.core.history.resolve(b)},this.sendError=async(r,s,a)=>{const l=hc(r,a),m=await this.client.core.crypto.encode(s,l),b=await this.client.core.history.get(s,r),I=qn[b.request.method].res;this.client.core.relayer.publish(s,m,I),await this.client.core.history.resolve(l)},this.cleanup=async()=>{const r=[],s=[];this.client.session.getAll().forEach(a=>{vi(a.expiry)&&r.push(a.topic)}),this.client.proposal.getAll().forEach(a=>{vi(a.expiry)&&s.push(a.id)}),await Promise.all([...r.map(a=>this.deleteSession(a)),...s.map(a=>this.deleteProposal(a))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===ii.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ii.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(s=>setTimeout(s,300))}catch(s){this.client.logger.warn(s)}}this.requestQueue.state=ii.idle},this.processRequest=r=>{const{topic:s,payload:a}=r,l=a.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeRequest(s,a);case"wc_sessionSettle":return this.onSessionSettleRequest(s,a);case"wc_sessionUpdate":return this.onSessionUpdateRequest(s,a);case"wc_sessionExtend":return this.onSessionExtendRequest(s,a);case"wc_sessionPing":return this.onSessionPingRequest(s,a);case"wc_sessionDelete":return this.onSessionDeleteRequest(s,a);case"wc_sessionRequest":return this.onSessionRequest(s,a);case"wc_sessionEvent":return this.onSessionEventRequest(s,a);default:return this.client.logger.info(`Unsupported request method ${l}`)}},this.onRelayEventResponse=async r=>{const{topic:s,payload:a}=r,l=(await this.client.core.history.get(s,a.id)).request.method;switch(l){case"wc_sessionPropose":return this.onSessionProposeResponse(s,a);case"wc_sessionSettle":return this.onSessionSettleResponse(s,a);case"wc_sessionUpdate":return this.onSessionUpdateResponse(s,a);case"wc_sessionExtend":return this.onSessionExtendResponse(s,a);case"wc_sessionPing":return this.onSessionPingResponse(s,a);case"wc_sessionRequest":return this.onSessionRequestResponse(s,a);default:return this.client.logger.info(`Unsupported response method ${l}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:s}=r,{message:a}=se("MISSING_OR_INVALID",`Decoded payload on topic ${s} is not identifiable as a JSON-RPC request or a response.`);throw new Error(a)},this.onSessionProposeRequest=async(r,s)=>{const{params:a,id:l}=s;try{this.isValidConnect(cr({},s.params));const m=Lr(fe.FIVE_MINUTES),b=cr({id:l,pairingTopic:r,expiry:m},a);await this.setProposal(l,b);const I=hn(JSON.stringify(s)),T=await this.getVerifyContext(I,b.proposer.metadata);this.client.events.emit("session_proposal",{id:l,params:b,verifyContext:T})}catch(m){await this.sendError(l,r,m),this.client.logger.error(m)}},this.onSessionProposeResponse=async(r,s)=>{const{id:a}=s;if(yi(s)){const{result:l}=s;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:l});const m=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:m});const b=m.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:b});const I=l.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:I});const T=await this.client.core.crypto.generateSharedKey(b,I);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:T});const U=await this.client.core.relayer.subscribe(T);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:U}),await this.client.core.pairing.activate({topic:r})}else ni(s)&&(await this.client.proposal.delete(a,tr("USER_DISCONNECTED")),this.events.emit(Ft("session_connect"),{error:s.error}))},this.onSessionSettleRequest=async(r,s)=>{const{id:a,params:l}=s;try{this.isValidSessionSettleRequest(l);const{relay:m,controller:b,expiry:I,namespaces:T,requiredNamespaces:U,optionalNamespaces:Y,sessionProperties:X,pairingTopic:Z}=s.params,B=cr({topic:r,relay:m,expiry:I,namespaces:T,acknowledged:!0,pairingTopic:Z,requiredNamespaces:U,optionalNamespaces:Y,controller:b.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:b.publicKey,metadata:b.metadata}},X&&{sessionProperties:X});await this.sendResult({id:s.id,topic:r,result:!0}),this.events.emit(Ft("session_connect"),{session:B}),this.cleanupDuplicatePairings(B)}catch(m){await this.sendError(a,r,m),this.client.logger.error(m)}},this.onSessionSettleResponse=async(r,s)=>{const{id:a}=s;yi(s)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit(Ft("session_approve",a),{})):ni(s)&&(await this.client.session.delete(r,tr("USER_DISCONNECTED")),this.events.emit(Ft("session_approve",a),{error:s.error}))},this.onSessionUpdateRequest=async(r,s)=>{const{params:a,id:l}=s;try{const m=`${r}_session_update`,b=Xs.get(m);if(b&&this.isRequestOutOfSync(b,l)){this.client.logger.info(`Discarding out of sync request - ${l}`);return}this.isValidUpdate(cr({topic:r},a)),await this.client.session.update(r,{namespaces:a.namespaces}),await this.sendResult({id:l,topic:r,result:!0}),this.client.events.emit("session_update",{id:l,topic:r,params:a}),Xs.set(m,l)}catch(m){await this.sendError(l,r,m),this.client.logger.error(m)}},this.isRequestOutOfSync=(r,s)=>parseInt(s.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,s)=>{const{id:a}=s;yi(s)?this.events.emit(Ft("session_update",a),{}):ni(s)&&this.events.emit(Ft("session_update",a),{error:s.error})},this.onSessionExtendRequest=async(r,s)=>{const{id:a}=s;try{this.isValidExtend({topic:r}),await this.setExpiry(r,Lr(Zs)),await this.sendResult({id:a,topic:r,result:!0}),this.client.events.emit("session_extend",{id:a,topic:r})}catch(l){await this.sendError(a,r,l),this.client.logger.error(l)}},this.onSessionExtendResponse=(r,s)=>{const{id:a}=s;yi(s)?this.events.emit(Ft("session_extend",a),{}):ni(s)&&this.events.emit(Ft("session_extend",a),{error:s.error})},this.onSessionPingRequest=async(r,s)=>{const{id:a}=s;try{this.isValidPing({topic:r}),await this.sendResult({id:a,topic:r,result:!0}),this.client.events.emit("session_ping",{id:a,topic:r})}catch(l){await this.sendError(a,r,l),this.client.logger.error(l)}},this.onSessionPingResponse=(r,s)=>{const{id:a}=s;setTimeout(()=>{yi(s)?this.events.emit(Ft("session_ping",a),{}):ni(s)&&this.events.emit(Ft("session_ping",a),{error:s.error})},500)},this.onSessionDeleteRequest=async(r,s)=>{const{id:a}=s;try{this.isValidDisconnect({topic:r,reason:s.params}),await Promise.all([new Promise(l=>{this.client.core.relayer.once(Gt.publish,async()=>{l(await this.deleteSession(r))})}),this.sendResult({id:a,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:a,topic:r})}catch(l){this.client.logger.error(l)}},this.onSessionRequest=async(r,s)=>{const{id:a,params:l}=s;try{this.isValidRequest(cr({topic:r},l)),await this.setPendingSessionRequest({id:a,topic:r,params:l}),this.addSessionRequestToSessionRequestQueue({id:a,topic:r,params:l}),await this.processSessionRequestQueue()}catch(m){await this.sendError(a,r,m),this.client.logger.error(m)}},this.onSessionRequestResponse=(r,s)=>{const{id:a}=s;yi(s)?this.events.emit(Ft("session_request",a),{result:s.result}):ni(s)&&this.events.emit(Ft("session_request",a),{error:s.error})},this.onSessionEventRequest=async(r,s)=>{const{id:a,params:l}=s;try{const m=`${r}_session_event_${l.event.name}`,b=Xs.get(m);if(b&&this.isRequestOutOfSync(b,a)){this.client.logger.info(`Discarding out of sync request - ${a}`);return}this.isValidEmit(cr({topic:r},l)),this.client.events.emit("session_event",{id:a,topic:r,params:l}),Xs.set(m,a)}catch(m){await this.sendError(a,r,m),this.client.logger.error(m)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ii.idle,this.processSessionRequestQueue()},fe.toMiliseconds(this.requestQueueDelay))},this.processSessionRequestQueue=async()=>{if(this.sessionRequestQueue.state===ii.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{const{id:s,topic:a,params:l}=r,m=hn(JSON.stringify(sa("wc_sessionRequest",l,s))),b=this.client.session.get(a),I=await this.getVerifyContext(m,b.peer.metadata);this.sessionRequestQueue.state=ii.active,this.client.events.emit("session_request",{id:s,topic:a,params:l,verifyContext:I})}catch(s){this.client.logger.error(s)}},this.isValidConnect=async r=>{if(!ur(r)){const{message:I}=se("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(I)}const{pairingTopic:s,requiredNamespaces:a,optionalNamespaces:l,sessionProperties:m,relays:b}=r;if(_i(s)||await this.isValidPairingTopic(s),!l_(b,!0)){const{message:I}=se("MISSING_OR_INVALID",`connect() relays: ${b}`);throw new Error(I)}!_i(a)&&ia(a)!==0&&this.validateNamespaces(a,"requiredNamespaces"),!_i(l)&&ia(l)!==0&&this.validateNamespaces(l,"optionalNamespaces"),_i(m)||this.validateSessionProps(m,"sessionProperties")},this.validateNamespaces=(r,s)=>{const a=f_(r,"connect()",s);if(a)throw new Error(a.message)},this.isValidApprove=async r=>{if(!ur(r))throw new Error(se("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:s,namespaces:a,relayProtocol:l,sessionProperties:m}=r;await this.isValidProposalId(s);const b=this.client.proposal.get(s),I=$o(a,"approve()");if(I)throw new Error(I.message);const T=xh(b.requiredNamespaces,a,"approve()");if(T)throw new Error(T.message);if(!cn(l,!0)){const{message:U}=se("MISSING_OR_INVALID",`approve() relayProtocol: ${l}`);throw new Error(U)}_i(m)||this.validateSessionProps(m,"sessionProperties")},this.isValidReject=async r=>{if(!ur(r)){const{message:l}=se("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(l)}const{id:s,reason:a}=r;if(await this.isValidProposalId(s),!p_(a)){const{message:l}=se("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(a)}`);throw new Error(l)}},this.isValidSessionSettleRequest=r=>{if(!ur(r)){const{message:T}=se("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(T)}const{relay:s,controller:a,namespaces:l,expiry:m}=r;if(!d_(s)){const{message:T}=se("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(T)}const b=g_(a,"onSessionSettleRequest()");if(b)throw new Error(b.message);const I=$o(l,"onSessionSettleRequest()");if(I)throw new Error(I.message);if(vi(m)){const{message:T}=se("EXPIRED","onSessionSettleRequest()");throw new Error(T)}},this.isValidUpdate=async r=>{if(!ur(r)){const{message:I}=se("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(I)}const{topic:s,namespaces:a}=r;await this.isValidSessionTopic(s);const l=this.client.session.get(s),m=$o(a,"update()");if(m)throw new Error(m.message);const b=xh(l.requiredNamespaces,a,"update()");if(b)throw new Error(b.message)},this.isValidExtend=async r=>{if(!ur(r)){const{message:a}=se("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionTopic(s)},this.isValidRequest=async r=>{if(!ur(r)){const{message:I}=se("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(I)}const{topic:s,request:a,chainId:l,expiry:m}=r;await this.isValidSessionTopic(s);const{namespaces:b}=this.client.session.get(s);if(!Sh(b,l)){const{message:I}=se("MISSING_OR_INVALID",`request() chainId: ${l}`);throw new Error(I)}if(!y_(a)){const{message:I}=se("MISSING_OR_INVALID",`request() ${JSON.stringify(a)}`);throw new Error(I)}if(!v_(b,l,a.method)){const{message:I}=se("MISSING_OR_INVALID",`request() method: ${a.method}`);throw new Error(I)}if(m&&!__(m,Wo)){const{message:I}=se("MISSING_OR_INVALID",`request() expiry: ${m}. Expiry must be a number (in seconds) between ${Wo.min} and ${Wo.max}`);throw new Error(I)}},this.isValidRespond=async r=>{if(!ur(r)){const{message:l}=se("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(l)}const{topic:s,response:a}=r;if(await this.isValidSessionTopic(s),!m_(a)){const{message:l}=se("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(l)}},this.isValidPing=async r=>{if(!ur(r)){const{message:a}=se("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.isValidEmit=async r=>{if(!ur(r)){const{message:b}=se("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(b)}const{topic:s,event:a,chainId:l}=r;await this.isValidSessionTopic(s);const{namespaces:m}=this.client.session.get(s);if(!Sh(m,l)){const{message:b}=se("MISSING_OR_INVALID",`emit() chainId: ${l}`);throw new Error(b)}if(!w_(a)){const{message:b}=se("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(b)}if(!b_(m,l,a.name)){const{message:b}=se("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(b)}},this.isValidDisconnect=async r=>{if(!ur(r)){const{message:a}=se("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(a)}const{topic:s}=r;await this.isValidSessionOrPairingTopic(s)},this.getVerifyContext=async(r,s)=>{const a={verified:{verifyUrl:s.verifyUrl||na,validation:"UNKNOWN",origin:s.url||""}};try{const l=await this.client.core.verify.resolve({attestationId:r,verifyUrl:s.verifyUrl});l&&(a.verified.origin=l,a.verified.validation=l===new URL(s.url).origin?"VALID":"INVALID")}catch(l){this.client.logger.error(l)}return this.client.logger.info(`Verify context: ${JSON.stringify(a)}`),a},this.validateSessionProps=(r,s)=>{Object.values(r).forEach(a=>{if(!cn(a,!1)){const{message:l}=se("MISSING_OR_INVALID",`${s} must be in Record<string, string> format. Received: ${JSON.stringify(a)}`);throw new Error(l)}})}}async isInitialized(){if(!this.initialized){const{message:i}=se("NOT_INITIALIZED",this.name);throw new Error(i)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Gt.message,async i=>{const{topic:r,message:s}=i;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(s)))return;const a=await this.client.core.crypto.decode(r,s);try{lc(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):fc(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a}),this.client.core.history.delete(r,a.id)):this.onRelayEventUnknownPayload({topic:r,payload:a})}catch(l){this.client.logger.error(l)}})}registerExpirerEvents(){this.client.core.expirer.on(Cr.expired,async i=>{const{topic:r,id:s}=Pl(i.target);if(s&&this.client.pendingRequest.keys.includes(s))return await this.deletePendingSessionRequest(s,se("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):s&&(await this.deleteProposal(s,!0),this.client.events.emit("proposal_expire",{id:s}))})}isValidPairingTopic(i){if(!cn(i,!1)){const{message:r}=se("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(i)){const{message:r}=se("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(r)}if(vi(this.client.core.pairing.pairings.get(i).expiry)){const{message:r}=se("EXPIRED",`pairing topic: ${i}`);throw new Error(r)}}async isValidSessionTopic(i){if(!cn(i,!1)){const{message:r}=se("MISSING_OR_INVALID",`session topic should be a string: ${i}`);throw new Error(r)}if(!this.client.session.keys.includes(i)){const{message:r}=se("NO_MATCHING_KEY",`session topic doesn't exist: ${i}`);throw new Error(r)}if(vi(this.client.session.get(i).expiry)){await this.deleteSession(i);const{message:r}=se("EXPIRED",`session topic: ${i}`);throw new Error(r)}}async isValidSessionOrPairingTopic(i){if(this.client.session.keys.includes(i))await this.isValidSessionTopic(i);else if(this.client.core.pairing.pairings.keys.includes(i))this.isValidPairingTopic(i);else if(cn(i,!1)){const{message:r}=se("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${i}`);throw new Error(r)}else{const{message:r}=se("MISSING_OR_INVALID",`session or pairing topic should be a string: ${i}`);throw new Error(r)}}async isValidProposalId(i){if(!E_(i)){const{message:r}=se("MISSING_OR_INVALID",`proposal id should be a number: ${i}`);throw new Error(r)}if(!this.client.proposal.keys.includes(i)){const{message:r}=se("NO_MATCHING_KEY",`proposal id doesn't exist: ${i}`);throw new Error(r)}if(vi(this.client.proposal.get(i).expiry)){await this.deleteProposal(i);const{message:r}=se("EXPIRED",`proposal id: ${i}`);throw new Error(r)}}}class ab extends la{constructor(i,r){super(i,r,Jw,_c),this.core=i,this.logger=r}}class ob extends la{constructor(i,r){super(i,r,Qw,_c),this.core=i,this.logger=r}}class cb extends la{constructor(i,r){super(i,r,Xw,_c,s=>s.id),this.core=i,this.logger=r}}class mc extends im{constructor(i){super(i),this.protocol=tf,this.version=rf,this.name=Go.name,this.events=new vr.exports.EventEmitter,this.on=(s,a)=>this.events.on(s,a),this.once=(s,a)=>this.events.once(s,a),this.off=(s,a)=>this.events.off(s,a),this.removeListener=(s,a)=>this.events.removeListener(s,a),this.removeAllListeners=s=>this.events.removeAllListeners(s),this.connect=async s=>{try{return await this.engine.connect(s)}catch(a){throw this.logger.error(a.message),a}},this.pair=async s=>{try{return await this.engine.pair(s)}catch(a){throw this.logger.error(a.message),a}},this.approve=async s=>{try{return await this.engine.approve(s)}catch(a){throw this.logger.error(a.message),a}},this.reject=async s=>{try{return await this.engine.reject(s)}catch(a){throw this.logger.error(a.message),a}},this.update=async s=>{try{return await this.engine.update(s)}catch(a){throw this.logger.error(a.message),a}},this.extend=async s=>{try{return await this.engine.extend(s)}catch(a){throw this.logger.error(a.message),a}},this.request=async s=>{try{return await this.engine.request(s)}catch(a){throw this.logger.error(a.message),a}},this.respond=async s=>{try{return await this.engine.respond(s)}catch(a){throw this.logger.error(a.message),a}},this.ping=async s=>{try{return await this.engine.ping(s)}catch(a){throw this.logger.error(a.message),a}},this.emit=async s=>{try{return await this.engine.emit(s)}catch(a){throw this.logger.error(a.message),a}},this.disconnect=async s=>{try{return await this.engine.disconnect(s)}catch(a){throw this.logger.error(a.message),a}},this.find=s=>{try{return this.engine.find(s)}catch(a){throw this.logger.error(a.message),a}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(s){throw this.logger.error(s.message),s}},this.name=i?.name||Go.name,this.metadata=i?.metadata||I_();const r=typeof i?.logger<"u"&&typeof i?.logger!="string"?i.logger:Fe.pino(Fe.getDefaultLoggerOptions({level:i?.logger||Go.logger}));this.core=i?.core||new Ww(i),this.logger=Fe.generateChildLogger(r,this.name),this.session=new ob(this.core,this.logger),this.proposal=new ab(this.core,this.logger),this.pendingRequest=new cb(this.core,this.logger),this.engine=new sb(this)}static async init(i){const r=new mc(i);return await r.initialize(),r}get context(){return Fe.getLoggerContext(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(i){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(i.message),i}}}const pl="error",ub="wss://relay.walletconnect.com",hb="wc",lb="universal_provider",dl=`${hb}@2:${lb}:`,fb="https://rpc.walletconnect.com/v1",bi={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var zn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nc={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(h,i){(function(){var r,s="4.17.21",a=200,l="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",m="Expected a function",b="Invalid `variable` option passed into `_.template`",I="__lodash_hash_undefined__",T=500,U="__lodash_placeholder__",Y=1,X=2,Z=4,B=1,ee=2,ce=1,me=2,ge=4,pe=8,he=16,le=32,$=64,V=128,N=256,ue=512,f=30,v="...",_=800,S=16,y=1,g=2,L=3,W=1/0,J=9007199254740991,C=17976931348623157e292,j=0/0,Q=4294967295,re=Q-1,_e=Q>>>1,ut=[["ary",V],["bind",ce],["bindKey",me],["curry",pe],["curryRight",he],["flip",ue],["partial",le],["partialRight",$],["rearg",N]],be="[object Arguments]",xt="[object Array]",q="[object AsyncFunction]",M="[object Boolean]",D="[object Date]",c="[object DOMException]",P="[object Error]",ae="[object Function]",we="[object GeneratorFunction]",Pe="[object Map]",Le="[object Number]",$e="[object Null]",Re="[object Object]",St="[object Promise]",_t="[object Proxy]",st="[object RegExp]",qe="[object Set]",Ye="[object String]",Xe="[object Symbol]",at="[object Undefined]",He="[object WeakMap]",Ze="[object WeakSet]",je="[object ArrayBuffer]",Ke="[object DataView]",ht="[object Float32Array]",ze="[object Float64Array]",Pt="[object Int8Array]",Lt="[object Int16Array]",zt="[object Int32Array]",kt="[object Uint8Array]",Mt="[object Uint8ClampedArray]",Wt="[object Uint16Array]",rr="[object Uint32Array]",jr=/\b__p \+= '';/g,Jt=/\b(__p \+=) '' \+/g,Vr=/(__e\(.*?\)|\b__t\)) \+\n'';/g,si=/&(?:amp|lt|gt|quot|#39);/g,Ei=/[&<>"']/g,lt=RegExp(si.source),rt=RegExp(Ei.source),ft=/<%-([\s\S]+?)%>/g,pt=/<%([\s\S]+?)%>/g,ot=/<%=([\s\S]+?)%>/g,it=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ct=/^\w*$/,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,dt=/[\\^$.*+?()[\]{}|]/g,At=RegExp(dt.source),gt=/^\s+/,mt=/\s/,yt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Qe=/\{\n\/\* \[wrapped with (.+)\] \*/,Rt=/,? & /,Tt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fa=/[()=,{}\[\]\/\s]/,pa=/\\(\\)?/g,da=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_r=/\w*$/,ga=/^[-+]0x[0-9a-f]+$/i,ya=/^0b[01]+$/i,va=/^\[object .+?Constructor\]$/,_a=/^0o[0-7]+$/i,ma=/^(?:0|[1-9]\d*)$/,Kr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ui=/($^)/,wa=/['\n\r\u2028\u2029\\]/g,zi="\\ud800-\\udfff",ba="\\u0300-\\u036f",Ea="\\ufe20-\\ufe2f",ki="\\u20d0-\\u20ff",Wn=ba+Ea+ki,Jn="\\u2700-\\u27bf",Ar="a-z\\xdf-\\xf6\\xf8-\\xff",Ia="\\xac\\xb1\\xd7\\xf7",xa="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Sa="\\u2000-\\u206f",Pa=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qn="A-Z\\xc0-\\xd6\\xd8-\\xde",Yn="\\ufe0e\\ufe0f",Ii=Ia+xa+Sa+Pa,pn="['\u2019]",xi="["+zi+"]",dn="["+Ii+"]",Si="["+Wn+"]",Xn="\\d+",Ca="["+Jn+"]",Zn="["+Ar+"]",es="[^"+zi+Ii+Xn+Jn+Ar+Qn+"]",Hi="\\ud83c[\\udffb-\\udfff]",Oa="(?:"+Si+"|"+Hi+")",ts="[^"+zi+"]",Vi="(?:\\ud83c[\\udde6-\\uddff]){2}",ai="[\\ud800-\\udbff][\\udc00-\\udfff]",hr="["+Qn+"]",rs="\\u200d",is="(?:"+Zn+"|"+es+")",$r="(?:"+hr+"|"+es+")",ns="(?:"+pn+"(?:d|ll|m|re|s|t|ve))?",ss="(?:"+pn+"(?:D|LL|M|RE|S|T|VE))?",as=Oa+"?",os="["+Yn+"]?",Aa="(?:"+rs+"(?:"+[ts,Vi,ai].join("|")+")"+os+as+")*",Br="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",cs="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",us=os+as+Aa,Ki="(?:"+[Ca,Vi,ai].join("|")+")"+us,Ra="(?:"+[ts+Si+"?",Si,Vi,ai,xi].join("|")+")",gn=RegExp(pn,"g"),Ta=RegExp(Si,"g"),Bi=RegExp(Hi+"(?="+Hi+")|"+Ra+us,"g"),hs=RegExp([hr+"?"+Zn+"+"+ns+"(?="+[dn,hr,"$"].join("|")+")",$r+"+"+ss+"(?="+[dn,hr+is,"$"].join("|")+")",hr+"?"+is+"+"+ns,hr+"+"+ss,cs,Br,Xn,Ki].join("|"),"g"),ls=RegExp("["+rs+zi+Wn+Yn+"]"),Pi=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,fs=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Da=-1,Be={};Be[ht]=Be[ze]=Be[Pt]=Be[Lt]=Be[zt]=Be[kt]=Be[Mt]=Be[Wt]=Be[rr]=!0,Be[be]=Be[xt]=Be[je]=Be[M]=Be[Ke]=Be[D]=Be[P]=Be[ae]=Be[Pe]=Be[Le]=Be[Re]=Be[st]=Be[qe]=Be[Ye]=Be[He]=!1;var Ve={};Ve[be]=Ve[xt]=Ve[je]=Ve[Ke]=Ve[M]=Ve[D]=Ve[ht]=Ve[ze]=Ve[Pt]=Ve[Lt]=Ve[zt]=Ve[Pe]=Ve[Le]=Ve[Re]=Ve[st]=Ve[qe]=Ve[Ye]=Ve[Xe]=Ve[kt]=Ve[Mt]=Ve[Wt]=Ve[rr]=!0,Ve[P]=Ve[ae]=Ve[He]=!1;var w={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},O={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},K={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ie={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Ge=parseFloat,Ie=parseInt,et=typeof zn=="object"&&zn&&zn.Object===Object&&zn,Dt=typeof self=="object"&&self&&self.Object===Object&&self,De=et||Dt||Function("return this")(),We=i&&!i.nodeType&&i,wt=We&&!0&&h&&!h.nodeType&&h,ir=wt&&wt.exports===We,Nt=ir&&et.process,tt=function(){try{var A=wt&&wt.require&&wt.require("util").types;return A||Nt&&Nt.binding&&Nt.binding("util")}catch{}}(),Qt=tt&&tt.isArrayBuffer,Rr=tt&&tt.isDate,mr=tt&&tt.isMap,Mr=tt&&tt.isRegExp,yn=tt&&tt.isSet,Ci=tt&&tt.isTypedArray;function qt(A,z,F){switch(F.length){case 0:return A.call(z);case 1:return A.call(z,F[0]);case 2:return A.call(z,F[0],F[1]);case 3:return A.call(z,F[0],F[1],F[2])}return A.apply(z,F)}function cf(A,z,F,ne){for(var Ee=-1,Me=A==null?0:A.length;++Ee<Me;){var jt=A[Ee];z(ne,jt,F(jt),A)}return ne}function wr(A,z){for(var F=-1,ne=A==null?0:A.length;++F<ne&&z(A[F],F,A)!==!1;);return A}function uf(A,z){for(var F=A==null?0:A.length;F--&&z(A[F],F,A)!==!1;);return A}function Ec(A,z){for(var F=-1,ne=A==null?0:A.length;++F<ne;)if(!z(A[F],F,A))return!1;return!0}function oi(A,z){for(var F=-1,ne=A==null?0:A.length,Ee=0,Me=[];++F<ne;){var jt=A[F];z(jt,F,A)&&(Me[Ee++]=jt)}return Me}function ps(A,z){var F=A==null?0:A.length;return!!F&&Gi(A,z,0)>-1}function Na(A,z,F){for(var ne=-1,Ee=A==null?0:A.length;++ne<Ee;)if(F(z,A[ne]))return!0;return!1}function nt(A,z){for(var F=-1,ne=A==null?0:A.length,Ee=Array(ne);++F<ne;)Ee[F]=z(A[F],F,A);return Ee}function ci(A,z){for(var F=-1,ne=z.length,Ee=A.length;++F<ne;)A[Ee+F]=z[F];return A}function Fa(A,z,F,ne){var Ee=-1,Me=A==null?0:A.length;for(ne&&Me&&(F=A[++Ee]);++Ee<Me;)F=z(F,A[Ee],Ee,A);return F}function hf(A,z,F,ne){var Ee=A==null?0:A.length;for(ne&&Ee&&(F=A[--Ee]);Ee--;)F=z(F,A[Ee],Ee,A);return F}function La(A,z){for(var F=-1,ne=A==null?0:A.length;++F<ne;)if(z(A[F],F,A))return!0;return!1}var lf=ja("length");function ff(A){return A.split("")}function pf(A){return A.match(Tt)||[]}function Ic(A,z,F){var ne;return F(A,function(Ee,Me,jt){if(z(Ee,Me,jt))return ne=Me,!1}),ne}function ds(A,z,F,ne){for(var Ee=A.length,Me=F+(ne?1:-1);ne?Me--:++Me<Ee;)if(z(A[Me],Me,A))return Me;return-1}function Gi(A,z,F){return z===z?Sf(A,z,F):ds(A,xc,F)}function df(A,z,F,ne){for(var Ee=F-1,Me=A.length;++Ee<Me;)if(ne(A[Ee],z))return Ee;return-1}function xc(A){return A!==A}function Sc(A,z){var F=A==null?0:A.length;return F?Ma(A,z)/F:j}function ja(A){return function(z){return z==null?r:z[A]}}function $a(A){return function(z){return A==null?r:A[z]}}function Pc(A,z,F,ne,Ee){return Ee(A,function(Me,jt,Je){F=ne?(ne=!1,Me):z(F,Me,jt,Je)}),F}function gf(A,z){var F=A.length;for(A.sort(z);F--;)A[F]=A[F].value;return A}function Ma(A,z){for(var F,ne=-1,Ee=A.length;++ne<Ee;){var Me=z(A[ne]);Me!==r&&(F=F===r?Me:F+Me)}return F}function qa(A,z){for(var F=-1,ne=Array(A);++F<A;)ne[F]=z(F);return ne}function yf(A,z){return nt(z,function(F){return[F,A[F]]})}function Cc(A){return A&&A.slice(0,Tc(A)+1).replace(gt,"")}function lr(A){return function(z){return A(z)}}function Ua(A,z){return nt(z,function(F){return A[F]})}function vn(A,z){return A.has(z)}function Oc(A,z){for(var F=-1,ne=A.length;++F<ne&&Gi(z,A[F],0)>-1;);return F}function Ac(A,z){for(var F=A.length;F--&&Gi(z,A[F],0)>-1;);return F}function vf(A,z){for(var F=A.length,ne=0;F--;)A[F]===z&&++ne;return ne}var _f=$a(w),mf=$a(O);function wf(A){return"\\"+ie[A]}function bf(A,z){return A==null?r:A[z]}function Wi(A){return ls.test(A)}function Ef(A){return Pi.test(A)}function If(A){for(var z,F=[];!(z=A.next()).done;)F.push(z.value);return F}function za(A){var z=-1,F=Array(A.size);return A.forEach(function(ne,Ee){F[++z]=[Ee,ne]}),F}function Rc(A,z){return function(F){return A(z(F))}}function ui(A,z){for(var F=-1,ne=A.length,Ee=0,Me=[];++F<ne;){var jt=A[F];(jt===z||jt===U)&&(A[F]=U,Me[Ee++]=F)}return Me}function gs(A){var z=-1,F=Array(A.size);return A.forEach(function(ne){F[++z]=ne}),F}function xf(A){var z=-1,F=Array(A.size);return A.forEach(function(ne){F[++z]=[ne,ne]}),F}function Sf(A,z,F){for(var ne=F-1,Ee=A.length;++ne<Ee;)if(A[ne]===z)return ne;return-1}function Pf(A,z,F){for(var ne=F+1;ne--;)if(A[ne]===z)return ne;return ne}function Ji(A){return Wi(A)?Of(A):lf(A)}function Tr(A){return Wi(A)?Af(A):ff(A)}function Tc(A){for(var z=A.length;z--&&mt.test(A.charAt(z)););return z}var Cf=$a(K);function Of(A){for(var z=Bi.lastIndex=0;Bi.test(A);)++z;return z}function Af(A){return A.match(Bi)||[]}function Rf(A){return A.match(hs)||[]}var Tf=function A(z){z=z==null?De:Qi.defaults(De.Object(),z,Qi.pick(De,fs));var F=z.Array,ne=z.Date,Ee=z.Error,Me=z.Function,jt=z.Math,Je=z.Object,ka=z.RegExp,Df=z.String,br=z.TypeError,ys=F.prototype,Nf=Me.prototype,Yi=Je.prototype,vs=z["__core-js_shared__"],_s=Nf.toString,ke=Yi.hasOwnProperty,Ff=0,Dc=function(){var e=/[^.]+$/.exec(vs&&vs.keys&&vs.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ms=Yi.toString,Lf=_s.call(Je),jf=De._,$f=ka("^"+_s.call(ke).replace(dt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ws=ir?z.Buffer:r,hi=z.Symbol,bs=z.Uint8Array,Nc=ws?ws.allocUnsafe:r,Es=Rc(Je.getPrototypeOf,Je),Fc=Je.create,Lc=Yi.propertyIsEnumerable,Is=ys.splice,jc=hi?hi.isConcatSpreadable:r,_n=hi?hi.iterator:r,Oi=hi?hi.toStringTag:r,xs=function(){try{var e=Ni(Je,"defineProperty");return e({},"",{}),e}catch{}}(),Mf=z.clearTimeout!==De.clearTimeout&&z.clearTimeout,qf=ne&&ne.now!==De.Date.now&&ne.now,Uf=z.setTimeout!==De.setTimeout&&z.setTimeout,Ss=jt.ceil,Ps=jt.floor,Ha=Je.getOwnPropertySymbols,zf=ws?ws.isBuffer:r,$c=z.isFinite,kf=ys.join,Hf=Rc(Je.keys,Je),$t=jt.max,Kt=jt.min,Vf=ne.now,Kf=z.parseInt,Mc=jt.random,Bf=ys.reverse,Va=Ni(z,"DataView"),mn=Ni(z,"Map"),Ka=Ni(z,"Promise"),Xi=Ni(z,"Set"),wn=Ni(z,"WeakMap"),bn=Ni(Je,"create"),Cs=wn&&new wn,Zi={},Gf=Fi(Va),Wf=Fi(mn),Jf=Fi(Ka),Qf=Fi(Xi),Yf=Fi(wn),Os=hi?hi.prototype:r,En=Os?Os.valueOf:r,qc=Os?Os.toString:r;function p(e){if(vt(e)&&!xe(e)&&!(e instanceof Te)){if(e instanceof Er)return e;if(ke.call(e,"__wrapped__"))return Uu(e)}return new Er(e)}var en=function(){function e(){}return function(t){if(!ct(t))return{};if(Fc)return Fc(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function As(){}function Er(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}p.templateSettings={escape:ft,evaluate:pt,interpolate:ot,variable:"",imports:{_:p}},p.prototype=As.prototype,p.prototype.constructor=p,Er.prototype=en(As.prototype),Er.prototype.constructor=Er;function Te(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Q,this.__views__=[]}function Xf(){var e=new Te(this.__wrapped__);return e.__actions__=nr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=nr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=nr(this.__views__),e}function Zf(){if(this.__filtered__){var e=new Te(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function ep(){var e=this.__wrapped__.value(),t=this.__dir__,n=xe(e),o=t<0,u=n?e.length:0,d=fd(0,u,this.__views__),E=d.start,x=d.end,R=x-E,k=o?x:E-1,H=this.__iteratees__,G=H.length,te=0,oe=Kt(R,this.__takeCount__);if(!n||!o&&u==R&&oe==R)return uu(e,this.__actions__);var ye=[];e:for(;R--&&te<oe;){k+=t;for(var Ce=-1,ve=e[k];++Ce<G;){var Ae=H[Ce],Ne=Ae.iteratee,dr=Ae.type,Zt=Ne(ve);if(dr==g)ve=Zt;else if(!Zt){if(dr==y)continue e;break e}}ye[te++]=ve}return ye}Te.prototype=en(As.prototype),Te.prototype.constructor=Te;function Ai(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function tp(){this.__data__=bn?bn(null):{},this.size=0}function rp(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function ip(e){var t=this.__data__;if(bn){var n=t[e];return n===I?r:n}return ke.call(t,e)?t[e]:r}function np(e){var t=this.__data__;return bn?t[e]!==r:ke.call(t,e)}function sp(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=bn&&t===r?I:t,this}Ai.prototype.clear=tp,Ai.prototype.delete=rp,Ai.prototype.get=ip,Ai.prototype.has=np,Ai.prototype.set=sp;function Gr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function ap(){this.__data__=[],this.size=0}function op(e){var t=this.__data__,n=Rs(t,e);if(n<0)return!1;var o=t.length-1;return n==o?t.pop():Is.call(t,n,1),--this.size,!0}function cp(e){var t=this.__data__,n=Rs(t,e);return n<0?r:t[n][1]}function up(e){return Rs(this.__data__,e)>-1}function hp(e,t){var n=this.__data__,o=Rs(n,e);return o<0?(++this.size,n.push([e,t])):n[o][1]=t,this}Gr.prototype.clear=ap,Gr.prototype.delete=op,Gr.prototype.get=cp,Gr.prototype.has=up,Gr.prototype.set=hp;function Wr(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var o=e[t];this.set(o[0],o[1])}}function lp(){this.size=0,this.__data__={hash:new Ai,map:new(mn||Gr),string:new Ai}}function fp(e){var t=ks(this,e).delete(e);return this.size-=t?1:0,t}function pp(e){return ks(this,e).get(e)}function dp(e){return ks(this,e).has(e)}function gp(e,t){var n=ks(this,e),o=n.size;return n.set(e,t),this.size+=n.size==o?0:1,this}Wr.prototype.clear=lp,Wr.prototype.delete=fp,Wr.prototype.get=pp,Wr.prototype.has=dp,Wr.prototype.set=gp;function Ri(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Wr;++t<n;)this.add(e[t])}function yp(e){return this.__data__.set(e,I),this}function vp(e){return this.__data__.has(e)}Ri.prototype.add=Ri.prototype.push=yp,Ri.prototype.has=vp;function Dr(e){var t=this.__data__=new Gr(e);this.size=t.size}function _p(){this.__data__=new Gr,this.size=0}function mp(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function wp(e){return this.__data__.get(e)}function bp(e){return this.__data__.has(e)}function Ep(e,t){var n=this.__data__;if(n instanceof Gr){var o=n.__data__;if(!mn||o.length<a-1)return o.push([e,t]),this.size=++n.size,this;n=this.__data__=new Wr(o)}return n.set(e,t),this.size=n.size,this}Dr.prototype.clear=_p,Dr.prototype.delete=mp,Dr.prototype.get=wp,Dr.prototype.has=bp,Dr.prototype.set=Ep;function Uc(e,t){var n=xe(e),o=!n&&Li(e),u=!n&&!o&&gi(e),d=!n&&!o&&!u&&sn(e),E=n||o||u||d,x=E?qa(e.length,Df):[],R=x.length;for(var k in e)(t||ke.call(e,k))&&!(E&&(k=="length"||u&&(k=="offset"||k=="parent")||d&&(k=="buffer"||k=="byteLength"||k=="byteOffset")||Xr(k,R)))&&x.push(k);return x}function zc(e){var t=e.length;return t?e[ro(0,t-1)]:r}function Ip(e,t){return Hs(nr(e),Ti(t,0,e.length))}function xp(e){return Hs(nr(e))}function Ba(e,t,n){(n!==r&&!Nr(e[t],n)||n===r&&!(t in e))&&Jr(e,t,n)}function In(e,t,n){var o=e[t];(!(ke.call(e,t)&&Nr(o,n))||n===r&&!(t in e))&&Jr(e,t,n)}function Rs(e,t){for(var n=e.length;n--;)if(Nr(e[n][0],t))return n;return-1}function Sp(e,t,n,o){return li(e,function(u,d,E){t(o,u,n(u),E)}),o}function kc(e,t){return e&&Ur(t,Ut(t),e)}function Pp(e,t){return e&&Ur(t,ar(t),e)}function Jr(e,t,n){t=="__proto__"&&xs?xs(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Ga(e,t){for(var n=-1,o=t.length,u=F(o),d=e==null;++n<o;)u[n]=d?r:Oo(e,t[n]);return u}function Ti(e,t,n){return e===e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function Ir(e,t,n,o,u,d){var E,x=t&Y,R=t&X,k=t&Z;if(n&&(E=u?n(e,o,u,d):n(e)),E!==r)return E;if(!ct(e))return e;var H=xe(e);if(H){if(E=dd(e),!x)return nr(e,E)}else{var G=Bt(e),te=G==ae||G==we;if(gi(e))return fu(e,x);if(G==Re||G==be||te&&!u){if(E=R||te?{}:Tu(e),!x)return R?id(e,Pp(E,e)):rd(e,kc(E,e))}else{if(!Ve[G])return u?e:{};E=gd(e,G,x)}}d||(d=new Dr);var oe=d.get(e);if(oe)return oe;d.set(e,E),ah(e)?e.forEach(function(ve){E.add(Ir(ve,t,n,ve,e,d))}):nh(e)&&e.forEach(function(ve,Ae){E.set(Ae,Ir(ve,t,n,Ae,e,d))});var ye=k?R?po:fo:R?ar:Ut,Ce=H?r:ye(e);return wr(Ce||e,function(ve,Ae){Ce&&(Ae=ve,ve=e[Ae]),In(E,Ae,Ir(ve,t,n,Ae,e,d))}),E}function Cp(e){var t=Ut(e);return function(n){return Hc(n,e,t)}}function Hc(e,t,n){var o=n.length;if(e==null)return!o;for(e=Je(e);o--;){var u=n[o],d=t[u],E=e[u];if(E===r&&!(u in e)||!d(E))return!1}return!0}function Vc(e,t,n){if(typeof e!="function")throw new br(m);return Rn(function(){e.apply(r,n)},t)}function xn(e,t,n,o){var u=-1,d=ps,E=!0,x=e.length,R=[],k=t.length;if(!x)return R;n&&(t=nt(t,lr(n))),o?(d=Na,E=!1):t.length>=a&&(d=vn,E=!1,t=new Ri(t));e:for(;++u<x;){var H=e[u],G=n==null?H:n(H);if(H=o||H!==0?H:0,E&&G===G){for(var te=k;te--;)if(t[te]===G)continue e;R.push(H)}else d(t,G,o)||R.push(H)}return R}var li=vu(qr),Kc=vu(Ja,!0);function Op(e,t){var n=!0;return li(e,function(o,u,d){return n=!!t(o,u,d),n}),n}function Ts(e,t,n){for(var o=-1,u=e.length;++o<u;){var d=e[o],E=t(d);if(E!=null&&(x===r?E===E&&!pr(E):n(E,x)))var x=E,R=d}return R}function Ap(e,t,n,o){var u=e.length;for(n=Se(n),n<0&&(n=-n>u?0:u+n),o=o===r||o>u?u:Se(o),o<0&&(o+=u),o=n>o?0:ch(o);n<o;)e[n++]=t;return e}function Bc(e,t){var n=[];return li(e,function(o,u,d){t(o,u,d)&&n.push(o)}),n}function Ht(e,t,n,o,u){var d=-1,E=e.length;for(n||(n=vd),u||(u=[]);++d<E;){var x=e[d];t>0&&n(x)?t>1?Ht(x,t-1,n,o,u):ci(u,x):o||(u[u.length]=x)}return u}var Wa=_u(),Gc=_u(!0);function qr(e,t){return e&&Wa(e,t,Ut)}function Ja(e,t){return e&&Gc(e,t,Ut)}function Ds(e,t){return oi(t,function(n){return Zr(e[n])})}function Di(e,t){t=pi(t,e);for(var n=0,o=t.length;e!=null&&n<o;)e=e[zr(t[n++])];return n&&n==o?e:r}function Wc(e,t,n){var o=t(e);return xe(e)?o:ci(o,n(e))}function Yt(e){return e==null?e===r?at:$e:Oi&&Oi in Je(e)?ld(e):xd(e)}function Qa(e,t){return e>t}function Rp(e,t){return e!=null&&ke.call(e,t)}function Tp(e,t){return e!=null&&t in Je(e)}function Dp(e,t,n){return e>=Kt(t,n)&&e<$t(t,n)}function Ya(e,t,n){for(var o=n?Na:ps,u=e[0].length,d=e.length,E=d,x=F(d),R=1/0,k=[];E--;){var H=e[E];E&&t&&(H=nt(H,lr(t))),R=Kt(H.length,R),x[E]=!n&&(t||u>=120&&H.length>=120)?new Ri(E&&H):r}H=e[0];var G=-1,te=x[0];e:for(;++G<u&&k.length<R;){var oe=H[G],ye=t?t(oe):oe;if(oe=n||oe!==0?oe:0,!(te?vn(te,ye):o(k,ye,n))){for(E=d;--E;){var Ce=x[E];if(!(Ce?vn(Ce,ye):o(e[E],ye,n)))continue e}te&&te.push(ye),k.push(oe)}}return k}function Np(e,t,n,o){return qr(e,function(u,d,E){t(o,n(u),d,E)}),o}function Sn(e,t,n){t=pi(t,e),e=Lu(e,t);var o=e==null?e:e[zr(Sr(t))];return o==null?r:qt(o,e,n)}function Jc(e){return vt(e)&&Yt(e)==be}function Fp(e){return vt(e)&&Yt(e)==je}function Lp(e){return vt(e)&&Yt(e)==D}function Pn(e,t,n,o,u){return e===t?!0:e==null||t==null||!vt(e)&&!vt(t)?e!==e&&t!==t:jp(e,t,n,o,Pn,u)}function jp(e,t,n,o,u,d){var E=xe(e),x=xe(t),R=E?xt:Bt(e),k=x?xt:Bt(t);R=R==be?Re:R,k=k==be?Re:k;var H=R==Re,G=k==Re,te=R==k;if(te&&gi(e)){if(!gi(t))return!1;E=!0,H=!1}if(te&&!H)return d||(d=new Dr),E||sn(e)?Ou(e,t,n,o,u,d):ud(e,t,R,n,o,u,d);if(!(n&B)){var oe=H&&ke.call(e,"__wrapped__"),ye=G&&ke.call(t,"__wrapped__");if(oe||ye){var Ce=oe?e.value():e,ve=ye?t.value():t;return d||(d=new Dr),u(Ce,ve,n,o,d)}}return te?(d||(d=new Dr),hd(e,t,n,o,u,d)):!1}function $p(e){return vt(e)&&Bt(e)==Pe}function Xa(e,t,n,o){var u=n.length,d=u,E=!o;if(e==null)return!d;for(e=Je(e);u--;){var x=n[u];if(E&&x[2]?x[1]!==e[x[0]]:!(x[0]in e))return!1}for(;++u<d;){x=n[u];var R=x[0],k=e[R],H=x[1];if(E&&x[2]){if(k===r&&!(R in e))return!1}else{var G=new Dr;if(o)var te=o(k,H,R,e,t,G);if(!(te===r?Pn(H,k,B|ee,o,G):te))return!1}}return!0}function Qc(e){if(!ct(e)||md(e))return!1;var t=Zr(e)?$f:va;return t.test(Fi(e))}function Mp(e){return vt(e)&&Yt(e)==st}function qp(e){return vt(e)&&Bt(e)==qe}function Up(e){return vt(e)&&Js(e.length)&&!!Be[Yt(e)]}function Yc(e){return typeof e=="function"?e:e==null?or:typeof e=="object"?xe(e)?eu(e[0],e[1]):Zc(e):mh(e)}function Za(e){if(!An(e))return Hf(e);var t=[];for(var n in Je(e))ke.call(e,n)&&n!="constructor"&&t.push(n);return t}function zp(e){if(!ct(e))return Id(e);var t=An(e),n=[];for(var o in e)o=="constructor"&&(t||!ke.call(e,o))||n.push(o);return n}function eo(e,t){return e<t}function Xc(e,t){var n=-1,o=sr(e)?F(e.length):[];return li(e,function(u,d,E){o[++n]=t(u,d,E)}),o}function Zc(e){var t=yo(e);return t.length==1&&t[0][2]?Nu(t[0][0],t[0][1]):function(n){return n===e||Xa(n,e,t)}}function eu(e,t){return _o(e)&&Du(t)?Nu(zr(e),t):function(n){var o=Oo(n,e);return o===r&&o===t?Ao(n,e):Pn(t,o,B|ee)}}function Ns(e,t,n,o,u){e!==t&&Wa(t,function(d,E){if(u||(u=new Dr),ct(d))kp(e,t,E,n,Ns,o,u);else{var x=o?o(wo(e,E),d,E+"",e,t,u):r;x===r&&(x=d),Ba(e,E,x)}},ar)}function kp(e,t,n,o,u,d,E){var x=wo(e,n),R=wo(t,n),k=E.get(R);if(k){Ba(e,n,k);return}var H=d?d(x,R,n+"",e,t,E):r,G=H===r;if(G){var te=xe(R),oe=!te&&gi(R),ye=!te&&!oe&&sn(R);H=R,te||oe||ye?xe(x)?H=x:bt(x)?H=nr(x):oe?(G=!1,H=fu(R,!0)):ye?(G=!1,H=pu(R,!0)):H=[]:Tn(R)||Li(R)?(H=x,Li(x)?H=uh(x):(!ct(x)||Zr(x))&&(H=Tu(R))):G=!1}G&&(E.set(R,H),u(H,R,o,d,E),E.delete(R)),Ba(e,n,H)}function tu(e,t){var n=e.length;if(n)return t+=t<0?n:0,Xr(t,n)?e[t]:r}function ru(e,t,n){t.length?t=nt(t,function(d){return xe(d)?function(E){return Di(E,d.length===1?d[0]:d)}:d}):t=[or];var o=-1;t=nt(t,lr(de()));var u=Xc(e,function(d,E,x){var R=nt(t,function(k){return k(d)});return{criteria:R,index:++o,value:d}});return gf(u,function(d,E){return td(d,E,n)})}function Hp(e,t){return iu(e,t,function(n,o){return Ao(e,o)})}function iu(e,t,n){for(var o=-1,u=t.length,d={};++o<u;){var E=t[o],x=Di(e,E);n(x,E)&&Cn(d,pi(E,e),x)}return d}function Vp(e){return function(t){return Di(t,e)}}function to(e,t,n,o){var u=o?df:Gi,d=-1,E=t.length,x=e;for(e===t&&(t=nr(t)),n&&(x=nt(e,lr(n)));++d<E;)for(var R=0,k=t[d],H=n?n(k):k;(R=u(x,H,R,o))>-1;)x!==e&&Is.call(x,R,1),Is.call(e,R,1);return e}function nu(e,t){for(var n=e?t.length:0,o=n-1;n--;){var u=t[n];if(n==o||u!==d){var d=u;Xr(u)?Is.call(e,u,1):so(e,u)}}return e}function ro(e,t){return e+Ps(Mc()*(t-e+1))}function Kp(e,t,n,o){for(var u=-1,d=$t(Ss((t-e)/(n||1)),0),E=F(d);d--;)E[o?d:++u]=e,e+=n;return E}function io(e,t){var n="";if(!e||t<1||t>J)return n;do t%2&&(n+=e),t=Ps(t/2),t&&(e+=e);while(t);return n}function Oe(e,t){return bo(Fu(e,t,or),e+"")}function Bp(e){return zc(an(e))}function Gp(e,t){var n=an(e);return Hs(n,Ti(t,0,n.length))}function Cn(e,t,n,o){if(!ct(e))return e;t=pi(t,e);for(var u=-1,d=t.length,E=d-1,x=e;x!=null&&++u<d;){var R=zr(t[u]),k=n;if(R==="__proto__"||R==="constructor"||R==="prototype")return e;if(u!=E){var H=x[R];k=o?o(H,R,x):r,k===r&&(k=ct(H)?H:Xr(t[u+1])?[]:{})}In(x,R,k),x=x[R]}return e}var su=Cs?function(e,t){return Cs.set(e,t),e}:or,Wp=xs?function(e,t){return xs(e,"toString",{configurable:!0,enumerable:!1,value:To(t),writable:!0})}:or;function Jp(e){return Hs(an(e))}function xr(e,t,n){var o=-1,u=e.length;t<0&&(t=-t>u?0:u+t),n=n>u?u:n,n<0&&(n+=u),u=t>n?0:n-t>>>0,t>>>=0;for(var d=F(u);++o<u;)d[o]=e[o+t];return d}function Qp(e,t){var n;return li(e,function(o,u,d){return n=t(o,u,d),!n}),!!n}function Fs(e,t,n){var o=0,u=e==null?o:e.length;if(typeof t=="number"&&t===t&&u<=_e){for(;o<u;){var d=o+u>>>1,E=e[d];E!==null&&!pr(E)&&(n?E<=t:E<t)?o=d+1:u=d}return u}return no(e,t,or,n)}function no(e,t,n,o){var u=0,d=e==null?0:e.length;if(d===0)return 0;t=n(t);for(var E=t!==t,x=t===null,R=pr(t),k=t===r;u<d;){var H=Ps((u+d)/2),G=n(e[H]),te=G!==r,oe=G===null,ye=G===G,Ce=pr(G);if(E)var ve=o||ye;else k?ve=ye&&(o||te):x?ve=ye&&te&&(o||!oe):R?ve=ye&&te&&!oe&&(o||!Ce):oe||Ce?ve=!1:ve=o?G<=t:G<t;ve?u=H+1:d=H}return Kt(d,re)}function au(e,t){for(var n=-1,o=e.length,u=0,d=[];++n<o;){var E=e[n],x=t?t(E):E;if(!n||!Nr(x,R)){var R=x;d[u++]=E===0?0:E}}return d}function ou(e){return typeof e=="number"?e:pr(e)?j:+e}function fr(e){if(typeof e=="string")return e;if(xe(e))return nt(e,fr)+"";if(pr(e))return qc?qc.call(e):"";var t=e+"";return t=="0"&&1/e==-W?"-0":t}function fi(e,t,n){var o=-1,u=ps,d=e.length,E=!0,x=[],R=x;if(n)E=!1,u=Na;else if(d>=a){var k=t?null:od(e);if(k)return gs(k);E=!1,u=vn,R=new Ri}else R=t?[]:x;e:for(;++o<d;){var H=e[o],G=t?t(H):H;if(H=n||H!==0?H:0,E&&G===G){for(var te=R.length;te--;)if(R[te]===G)continue e;t&&R.push(G),x.push(H)}else u(R,G,n)||(R!==x&&R.push(G),x.push(H))}return x}function so(e,t){return t=pi(t,e),e=Lu(e,t),e==null||delete e[zr(Sr(t))]}function cu(e,t,n,o){return Cn(e,t,n(Di(e,t)),o)}function Ls(e,t,n,o){for(var u=e.length,d=o?u:-1;(o?d--:++d<u)&&t(e[d],d,e););return n?xr(e,o?0:d,o?d+1:u):xr(e,o?d+1:0,o?u:d)}function uu(e,t){var n=e;return n instanceof Te&&(n=n.value()),Fa(t,function(o,u){return u.func.apply(u.thisArg,ci([o],u.args))},n)}function ao(e,t,n){var o=e.length;if(o<2)return o?fi(e[0]):[];for(var u=-1,d=F(o);++u<o;)for(var E=e[u],x=-1;++x<o;)x!=u&&(d[u]=xn(d[u]||E,e[x],t,n));return fi(Ht(d,1),t,n)}function hu(e,t,n){for(var o=-1,u=e.length,d=t.length,E={};++o<u;){var x=o<d?t[o]:r;n(E,e[o],x)}return E}function oo(e){return bt(e)?e:[]}function co(e){return typeof e=="function"?e:or}function pi(e,t){return xe(e)?e:_o(e,t)?[e]:qu(Ue(e))}var Yp=Oe;function di(e,t,n){var o=e.length;return n=n===r?o:n,!t&&n>=o?e:xr(e,t,n)}var lu=Mf||function(e){return De.clearTimeout(e)};function fu(e,t){if(t)return e.slice();var n=e.length,o=Nc?Nc(n):new e.constructor(n);return e.copy(o),o}function uo(e){var t=new e.constructor(e.byteLength);return new bs(t).set(new bs(e)),t}function Xp(e,t){var n=t?uo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Zp(e){var t=new e.constructor(e.source,_r.exec(e));return t.lastIndex=e.lastIndex,t}function ed(e){return En?Je(En.call(e)):{}}function pu(e,t){var n=t?uo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function du(e,t){if(e!==t){var n=e!==r,o=e===null,u=e===e,d=pr(e),E=t!==r,x=t===null,R=t===t,k=pr(t);if(!x&&!k&&!d&&e>t||d&&E&&R&&!x&&!k||o&&E&&R||!n&&R||!u)return 1;if(!o&&!d&&!k&&e<t||k&&n&&u&&!o&&!d||x&&n&&u||!E&&u||!R)return-1}return 0}function td(e,t,n){for(var o=-1,u=e.criteria,d=t.criteria,E=u.length,x=n.length;++o<E;){var R=du(u[o],d[o]);if(R){if(o>=x)return R;var k=n[o];return R*(k=="desc"?-1:1)}}return e.index-t.index}function gu(e,t,n,o){for(var u=-1,d=e.length,E=n.length,x=-1,R=t.length,k=$t(d-E,0),H=F(R+k),G=!o;++x<R;)H[x]=t[x];for(;++u<E;)(G||u<d)&&(H[n[u]]=e[u]);for(;k--;)H[x++]=e[u++];return H}function yu(e,t,n,o){for(var u=-1,d=e.length,E=-1,x=n.length,R=-1,k=t.length,H=$t(d-x,0),G=F(H+k),te=!o;++u<H;)G[u]=e[u];for(var oe=u;++R<k;)G[oe+R]=t[R];for(;++E<x;)(te||u<d)&&(G[oe+n[E]]=e[u++]);return G}function nr(e,t){var n=-1,o=e.length;for(t||(t=F(o));++n<o;)t[n]=e[n];return t}function Ur(e,t,n,o){var u=!n;n||(n={});for(var d=-1,E=t.length;++d<E;){var x=t[d],R=o?o(n[x],e[x],x,n,e):r;R===r&&(R=e[x]),u?Jr(n,x,R):In(n,x,R)}return n}function rd(e,t){return Ur(e,vo(e),t)}function id(e,t){return Ur(e,Au(e),t)}function js(e,t){return function(n,o){var u=xe(n)?cf:Sp,d=t?t():{};return u(n,e,de(o,2),d)}}function tn(e){return Oe(function(t,n){var o=-1,u=n.length,d=u>1?n[u-1]:r,E=u>2?n[2]:r;for(d=e.length>3&&typeof d=="function"?(u--,d):r,E&&Xt(n[0],n[1],E)&&(d=u<3?r:d,u=1),t=Je(t);++o<u;){var x=n[o];x&&e(t,x,o,d)}return t})}function vu(e,t){return function(n,o){if(n==null)return n;if(!sr(n))return e(n,o);for(var u=n.length,d=t?u:-1,E=Je(n);(t?d--:++d<u)&&o(E[d],d,E)!==!1;);return n}}function _u(e){return function(t,n,o){for(var u=-1,d=Je(t),E=o(t),x=E.length;x--;){var R=E[e?x:++u];if(n(d[R],R,d)===!1)break}return t}}function nd(e,t,n){var o=t&ce,u=On(e);function d(){var E=this&&this!==De&&this instanceof d?u:e;return E.apply(o?n:this,arguments)}return d}function mu(e){return function(t){t=Ue(t);var n=Wi(t)?Tr(t):r,o=n?n[0]:t.charAt(0),u=n?di(n,1).join(""):t.slice(1);return o[e]()+u}}function rn(e){return function(t){return Fa(vh(yh(t).replace(gn,"")),e,"")}}function On(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=en(e.prototype),o=e.apply(n,t);return ct(o)?o:n}}function sd(e,t,n){var o=On(e);function u(){for(var d=arguments.length,E=F(d),x=d,R=nn(u);x--;)E[x]=arguments[x];var k=d<3&&E[0]!==R&&E[d-1]!==R?[]:ui(E,R);if(d-=k.length,d<n)return xu(e,t,$s,u.placeholder,r,E,k,r,r,n-d);var H=this&&this!==De&&this instanceof u?o:e;return qt(H,this,E)}return u}function wu(e){return function(t,n,o){var u=Je(t);if(!sr(t)){var d=de(n,3);t=Ut(t),n=function(x){return d(u[x],x,u)}}var E=e(t,n,o);return E>-1?u[d?t[E]:E]:r}}function bu(e){return Yr(function(t){var n=t.length,o=n,u=Er.prototype.thru;for(e&&t.reverse();o--;){var d=t[o];if(typeof d!="function")throw new br(m);if(u&&!E&&zs(d)=="wrapper")var E=new Er([],!0)}for(o=E?o:n;++o<n;){d=t[o];var x=zs(d),R=x=="wrapper"?go(d):r;R&&mo(R[0])&&R[1]==(V|pe|le|N)&&!R[4].length&&R[9]==1?E=E[zs(R[0])].apply(E,R[3]):E=d.length==1&&mo(d)?E[x]():E.thru(d)}return function(){var k=arguments,H=k[0];if(E&&k.length==1&&xe(H))return E.plant(H).value();for(var G=0,te=n?t[G].apply(this,k):H;++G<n;)te=t[G].call(this,te);return te}})}function $s(e,t,n,o,u,d,E,x,R,k){var H=t&V,G=t&ce,te=t&me,oe=t&(pe|he),ye=t&ue,Ce=te?r:On(e);function ve(){for(var Ae=arguments.length,Ne=F(Ae),dr=Ae;dr--;)Ne[dr]=arguments[dr];if(oe)var Zt=nn(ve),gr=vf(Ne,Zt);if(o&&(Ne=gu(Ne,o,u,oe)),d&&(Ne=yu(Ne,d,E,oe)),Ae-=gr,oe&&Ae<k){var Et=ui(Ne,Zt);return xu(e,t,$s,ve.placeholder,n,Ne,Et,x,R,k-Ae)}var Fr=G?n:this,ti=te?Fr[e]:e;return Ae=Ne.length,x?Ne=Sd(Ne,x):ye&&Ae>1&&Ne.reverse(),H&&R<Ae&&(Ne.length=R),this&&this!==De&&this instanceof ve&&(ti=Ce||On(ti)),ti.apply(Fr,Ne)}return ve}function Eu(e,t){return function(n,o){return Np(n,e,t(o),{})}}function Ms(e,t){return function(n,o){var u;if(n===r&&o===r)return t;if(n!==r&&(u=n),o!==r){if(u===r)return o;typeof n=="string"||typeof o=="string"?(n=fr(n),o=fr(o)):(n=ou(n),o=ou(o)),u=e(n,o)}return u}}function ho(e){return Yr(function(t){return t=nt(t,lr(de())),Oe(function(n){var o=this;return e(t,function(u){return qt(u,o,n)})})})}function qs(e,t){t=t===r?" ":fr(t);var n=t.length;if(n<2)return n?io(t,e):t;var o=io(t,Ss(e/Ji(t)));return Wi(t)?di(Tr(o),0,e).join(""):o.slice(0,e)}function ad(e,t,n,o){var u=t&ce,d=On(e);function E(){for(var x=-1,R=arguments.length,k=-1,H=o.length,G=F(H+R),te=this&&this!==De&&this instanceof E?d:e;++k<H;)G[k]=o[k];for(;R--;)G[k++]=arguments[++x];return qt(te,u?n:this,G)}return E}function Iu(e){return function(t,n,o){return o&&typeof o!="number"&&Xt(t,n,o)&&(n=o=r),t=ei(t),n===r?(n=t,t=0):n=ei(n),o=o===r?t<n?1:-1:ei(o),Kp(t,n,o,e)}}function Us(e){return function(t,n){return typeof t=="string"&&typeof n=="string"||(t=Pr(t),n=Pr(n)),e(t,n)}}function xu(e,t,n,o,u,d,E,x,R,k){var H=t&pe,G=H?E:r,te=H?r:E,oe=H?d:r,ye=H?r:d;t|=H?le:$,t&=~(H?$:le),t&ge||(t&=~(ce|me));var Ce=[e,t,u,oe,G,ye,te,x,R,k],ve=n.apply(r,Ce);return mo(e)&&ju(ve,Ce),ve.placeholder=o,$u(ve,e,t)}function lo(e){var t=jt[e];return function(n,o){if(n=Pr(n),o=o==null?0:Kt(Se(o),292),o&&$c(n)){var u=(Ue(n)+"e").split("e"),d=t(u[0]+"e"+(+u[1]+o));return u=(Ue(d)+"e").split("e"),+(u[0]+"e"+(+u[1]-o))}return t(n)}}var od=Xi&&1/gs(new Xi([,-0]))[1]==W?function(e){return new Xi(e)}:Fo;function Su(e){return function(t){var n=Bt(t);return n==Pe?za(t):n==qe?xf(t):yf(t,e(t))}}function Qr(e,t,n,o,u,d,E,x){var R=t&me;if(!R&&typeof e!="function")throw new br(m);var k=o?o.length:0;if(k||(t&=~(le|$),o=u=r),E=E===r?E:$t(Se(E),0),x=x===r?x:Se(x),k-=u?u.length:0,t&$){var H=o,G=u;o=u=r}var te=R?r:go(e),oe=[e,t,n,o,u,H,G,d,E,x];if(te&&Ed(oe,te),e=oe[0],t=oe[1],n=oe[2],o=oe[3],u=oe[4],x=oe[9]=oe[9]===r?R?0:e.length:$t(oe[9]-k,0),!x&&t&(pe|he)&&(t&=~(pe|he)),!t||t==ce)var ye=nd(e,t,n);else t==pe||t==he?ye=sd(e,t,x):(t==le||t==(ce|le))&&!u.length?ye=ad(e,t,n,o):ye=$s.apply(r,oe);var Ce=te?su:ju;return $u(Ce(ye,oe),e,t)}function Pu(e,t,n,o){return e===r||Nr(e,Yi[n])&&!ke.call(o,n)?t:e}function Cu(e,t,n,o,u,d){return ct(e)&&ct(t)&&(d.set(t,e),Ns(e,t,r,Cu,d),d.delete(t)),e}function cd(e){return Tn(e)?r:e}function Ou(e,t,n,o,u,d){var E=n&B,x=e.length,R=t.length;if(x!=R&&!(E&&R>x))return!1;var k=d.get(e),H=d.get(t);if(k&&H)return k==t&&H==e;var G=-1,te=!0,oe=n&ee?new Ri:r;for(d.set(e,t),d.set(t,e);++G<x;){var ye=e[G],Ce=t[G];if(o)var ve=E?o(Ce,ye,G,t,e,d):o(ye,Ce,G,e,t,d);if(ve!==r){if(ve)continue;te=!1;break}if(oe){if(!La(t,function(Ae,Ne){if(!vn(oe,Ne)&&(ye===Ae||u(ye,Ae,n,o,d)))return oe.push(Ne)})){te=!1;break}}else if(!(ye===Ce||u(ye,Ce,n,o,d))){te=!1;break}}return d.delete(e),d.delete(t),te}function ud(e,t,n,o,u,d,E){switch(n){case Ke:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case je:return!(e.byteLength!=t.byteLength||!d(new bs(e),new bs(t)));case M:case D:case Le:return Nr(+e,+t);case P:return e.name==t.name&&e.message==t.message;case st:case Ye:return e==t+"";case Pe:var x=za;case qe:var R=o&B;if(x||(x=gs),e.size!=t.size&&!R)return!1;var k=E.get(e);if(k)return k==t;o|=ee,E.set(e,t);var H=Ou(x(e),x(t),o,u,d,E);return E.delete(e),H;case Xe:if(En)return En.call(e)==En.call(t)}return!1}function hd(e,t,n,o,u,d){var E=n&B,x=fo(e),R=x.length,k=fo(t),H=k.length;if(R!=H&&!E)return!1;for(var G=R;G--;){var te=x[G];if(!(E?te in t:ke.call(t,te)))return!1}var oe=d.get(e),ye=d.get(t);if(oe&&ye)return oe==t&&ye==e;var Ce=!0;d.set(e,t),d.set(t,e);for(var ve=E;++G<R;){te=x[G];var Ae=e[te],Ne=t[te];if(o)var dr=E?o(Ne,Ae,te,t,e,d):o(Ae,Ne,te,e,t,d);if(!(dr===r?Ae===Ne||u(Ae,Ne,n,o,d):dr)){Ce=!1;break}ve||(ve=te=="constructor")}if(Ce&&!ve){var Zt=e.constructor,gr=t.constructor;Zt!=gr&&"constructor"in e&&"constructor"in t&&!(typeof Zt=="function"&&Zt instanceof Zt&&typeof gr=="function"&&gr instanceof gr)&&(Ce=!1)}return d.delete(e),d.delete(t),Ce}function Yr(e){return bo(Fu(e,r,Hu),e+"")}function fo(e){return Wc(e,Ut,vo)}function po(e){return Wc(e,ar,Au)}var go=Cs?function(e){return Cs.get(e)}:Fo;function zs(e){for(var t=e.name+"",n=Zi[t],o=ke.call(Zi,t)?n.length:0;o--;){var u=n[o],d=u.func;if(d==null||d==e)return u.name}return t}function nn(e){var t=ke.call(p,"placeholder")?p:e;return t.placeholder}function de(){var e=p.iteratee||Do;return e=e===Do?Yc:e,arguments.length?e(arguments[0],arguments[1]):e}function ks(e,t){var n=e.__data__;return _d(t)?n[typeof t=="string"?"string":"hash"]:n.map}function yo(e){for(var t=Ut(e),n=t.length;n--;){var o=t[n],u=e[o];t[n]=[o,u,Du(u)]}return t}function Ni(e,t){var n=bf(e,t);return Qc(n)?n:r}function ld(e){var t=ke.call(e,Oi),n=e[Oi];try{e[Oi]=r;var o=!0}catch{}var u=ms.call(e);return o&&(t?e[Oi]=n:delete e[Oi]),u}var vo=Ha?function(e){return e==null?[]:(e=Je(e),oi(Ha(e),function(t){return Lc.call(e,t)}))}:Lo,Au=Ha?function(e){for(var t=[];e;)ci(t,vo(e)),e=Es(e);return t}:Lo,Bt=Yt;(Va&&Bt(new Va(new ArrayBuffer(1)))!=Ke||mn&&Bt(new mn)!=Pe||Ka&&Bt(Ka.resolve())!=St||Xi&&Bt(new Xi)!=qe||wn&&Bt(new wn)!=He)&&(Bt=function(e){var t=Yt(e),n=t==Re?e.constructor:r,o=n?Fi(n):"";if(o)switch(o){case Gf:return Ke;case Wf:return Pe;case Jf:return St;case Qf:return qe;case Yf:return He}return t});function fd(e,t,n){for(var o=-1,u=n.length;++o<u;){var d=n[o],E=d.size;switch(d.type){case"drop":e+=E;break;case"dropRight":t-=E;break;case"take":t=Kt(t,e+E);break;case"takeRight":e=$t(e,t-E);break}}return{start:e,end:t}}function pd(e){var t=e.match(Qe);return t?t[1].split(Rt):[]}function Ru(e,t,n){t=pi(t,e);for(var o=-1,u=t.length,d=!1;++o<u;){var E=zr(t[o]);if(!(d=e!=null&&n(e,E)))break;e=e[E]}return d||++o!=u?d:(u=e==null?0:e.length,!!u&&Js(u)&&Xr(E,u)&&(xe(e)||Li(e)))}function dd(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&ke.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Tu(e){return typeof e.constructor=="function"&&!An(e)?en(Es(e)):{}}function gd(e,t,n){var o=e.constructor;switch(t){case je:return uo(e);case M:case D:return new o(+e);case Ke:return Xp(e,n);case ht:case ze:case Pt:case Lt:case zt:case kt:case Mt:case Wt:case rr:return pu(e,n);case Pe:return new o;case Le:case Ye:return new o(e);case st:return Zp(e);case qe:return new o;case Xe:return ed(e)}}function yd(e,t){var n=t.length;if(!n)return e;var o=n-1;return t[o]=(n>1?"& ":"")+t[o],t=t.join(n>2?", ":" "),e.replace(yt,`{
/* [wrapped with `+t+`] */
`)}function vd(e){return xe(e)||Li(e)||!!(jc&&e&&e[jc])}function Xr(e,t){var n=typeof e;return t=t??J,!!t&&(n=="number"||n!="symbol"&&ma.test(e))&&e>-1&&e%1==0&&e<t}function Xt(e,t,n){if(!ct(n))return!1;var o=typeof t;return(o=="number"?sr(n)&&Xr(t,n.length):o=="string"&&t in n)?Nr(n[t],e):!1}function _o(e,t){if(xe(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||pr(e)?!0:Ct.test(e)||!it.test(e)||t!=null&&e in Je(t)}function _d(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function mo(e){var t=zs(e),n=p[t];if(typeof n!="function"||!(t in Te.prototype))return!1;if(e===n)return!0;var o=go(n);return!!o&&e===o[0]}function md(e){return!!Dc&&Dc in e}var wd=vs?Zr:jo;function An(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Yi;return e===n}function Du(e){return e===e&&!ct(e)}function Nu(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==r||e in Je(n))}}function bd(e){var t=Gs(e,function(o){return n.size===T&&n.clear(),o}),n=t.cache;return t}function Ed(e,t){var n=e[1],o=t[1],u=n|o,d=u<(ce|me|V),E=o==V&&n==pe||o==V&&n==N&&e[7].length<=t[8]||o==(V|N)&&t[7].length<=t[8]&&n==pe;if(!(d||E))return e;o&ce&&(e[2]=t[2],u|=n&ce?0:ge);var x=t[3];if(x){var R=e[3];e[3]=R?gu(R,x,t[4]):x,e[4]=R?ui(e[3],U):t[4]}return x=t[5],x&&(R=e[5],e[5]=R?yu(R,x,t[6]):x,e[6]=R?ui(e[5],U):t[6]),x=t[7],x&&(e[7]=x),o&V&&(e[8]=e[8]==null?t[8]:Kt(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=u,e}function Id(e){var t=[];if(e!=null)for(var n in Je(e))t.push(n);return t}function xd(e){return ms.call(e)}function Fu(e,t,n){return t=$t(t===r?e.length-1:t,0),function(){for(var o=arguments,u=-1,d=$t(o.length-t,0),E=F(d);++u<d;)E[u]=o[t+u];u=-1;for(var x=F(t+1);++u<t;)x[u]=o[u];return x[t]=n(E),qt(e,this,x)}}function Lu(e,t){return t.length<2?e:Di(e,xr(t,0,-1))}function Sd(e,t){for(var n=e.length,o=Kt(t.length,n),u=nr(e);o--;){var d=t[o];e[o]=Xr(d,n)?u[d]:r}return e}function wo(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var ju=Mu(su),Rn=Uf||function(e,t){return De.setTimeout(e,t)},bo=Mu(Wp);function $u(e,t,n){var o=t+"";return bo(e,yd(o,Pd(pd(o),n)))}function Mu(e){var t=0,n=0;return function(){var o=Vf(),u=S-(o-n);if(n=o,u>0){if(++t>=_)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Hs(e,t){var n=-1,o=e.length,u=o-1;for(t=t===r?o:t;++n<t;){var d=ro(n,u),E=e[d];e[d]=e[n],e[n]=E}return e.length=t,e}var qu=bd(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(Ot,function(n,o,u,d){t.push(u?d.replace(pa,"$1"):o||n)}),t});function zr(e){if(typeof e=="string"||pr(e))return e;var t=e+"";return t=="0"&&1/e==-W?"-0":t}function Fi(e){if(e!=null){try{return _s.call(e)}catch{}try{return e+""}catch{}}return""}function Pd(e,t){return wr(ut,function(n){var o="_."+n[0];t&n[1]&&!ps(e,o)&&e.push(o)}),e.sort()}function Uu(e){if(e instanceof Te)return e.clone();var t=new Er(e.__wrapped__,e.__chain__);return t.__actions__=nr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Cd(e,t,n){(n?Xt(e,t,n):t===r)?t=1:t=$t(Se(t),0);var o=e==null?0:e.length;if(!o||t<1)return[];for(var u=0,d=0,E=F(Ss(o/t));u<o;)E[d++]=xr(e,u,u+=t);return E}function Od(e){for(var t=-1,n=e==null?0:e.length,o=0,u=[];++t<n;){var d=e[t];d&&(u[o++]=d)}return u}function Ad(){var e=arguments.length;if(!e)return[];for(var t=F(e-1),n=arguments[0],o=e;o--;)t[o-1]=arguments[o];return ci(xe(n)?nr(n):[n],Ht(t,1))}var Rd=Oe(function(e,t){return bt(e)?xn(e,Ht(t,1,bt,!0)):[]}),Td=Oe(function(e,t){var n=Sr(t);return bt(n)&&(n=r),bt(e)?xn(e,Ht(t,1,bt,!0),de(n,2)):[]}),Dd=Oe(function(e,t){var n=Sr(t);return bt(n)&&(n=r),bt(e)?xn(e,Ht(t,1,bt,!0),r,n):[]});function Nd(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===r?1:Se(t),xr(e,t<0?0:t,o)):[]}function Fd(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===r?1:Se(t),t=o-t,xr(e,0,t<0?0:t)):[]}function Ld(e,t){return e&&e.length?Ls(e,de(t,3),!0,!0):[]}function jd(e,t){return e&&e.length?Ls(e,de(t,3),!0):[]}function $d(e,t,n,o){var u=e==null?0:e.length;return u?(n&&typeof n!="number"&&Xt(e,t,n)&&(n=0,o=u),Ap(e,t,n,o)):[]}function zu(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var u=n==null?0:Se(n);return u<0&&(u=$t(o+u,0)),ds(e,de(t,3),u)}function ku(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var u=o-1;return n!==r&&(u=Se(n),u=n<0?$t(o+u,0):Kt(u,o-1)),ds(e,de(t,3),u,!0)}function Hu(e){var t=e==null?0:e.length;return t?Ht(e,1):[]}function Md(e){var t=e==null?0:e.length;return t?Ht(e,W):[]}function qd(e,t){var n=e==null?0:e.length;return n?(t=t===r?1:Se(t),Ht(e,t)):[]}function Ud(e){for(var t=-1,n=e==null?0:e.length,o={};++t<n;){var u=e[t];o[u[0]]=u[1]}return o}function Vu(e){return e&&e.length?e[0]:r}function zd(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var u=n==null?0:Se(n);return u<0&&(u=$t(o+u,0)),Gi(e,t,u)}function kd(e){var t=e==null?0:e.length;return t?xr(e,0,-1):[]}var Hd=Oe(function(e){var t=nt(e,oo);return t.length&&t[0]===e[0]?Ya(t):[]}),Vd=Oe(function(e){var t=Sr(e),n=nt(e,oo);return t===Sr(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Ya(n,de(t,2)):[]}),Kd=Oe(function(e){var t=Sr(e),n=nt(e,oo);return t=typeof t=="function"?t:r,t&&n.pop(),n.length&&n[0]===e[0]?Ya(n,r,t):[]});function Bd(e,t){return e==null?"":kf.call(e,t)}function Sr(e){var t=e==null?0:e.length;return t?e[t-1]:r}function Gd(e,t,n){var o=e==null?0:e.length;if(!o)return-1;var u=o;return n!==r&&(u=Se(n),u=u<0?$t(o+u,0):Kt(u,o-1)),t===t?Pf(e,t,u):ds(e,xc,u,!0)}function Wd(e,t){return e&&e.length?tu(e,Se(t)):r}var Jd=Oe(Ku);function Ku(e,t){return e&&e.length&&t&&t.length?to(e,t):e}function Qd(e,t,n){return e&&e.length&&t&&t.length?to(e,t,de(n,2)):e}function Yd(e,t,n){return e&&e.length&&t&&t.length?to(e,t,r,n):e}var Xd=Yr(function(e,t){var n=e==null?0:e.length,o=Ga(e,t);return nu(e,nt(t,function(u){return Xr(u,n)?+u:u}).sort(du)),o});function Zd(e,t){var n=[];if(!(e&&e.length))return n;var o=-1,u=[],d=e.length;for(t=de(t,3);++o<d;){var E=e[o];t(E,o,e)&&(n.push(E),u.push(o))}return nu(e,u),n}function Eo(e){return e==null?e:Bf.call(e)}function eg(e,t,n){var o=e==null?0:e.length;return o?(n&&typeof n!="number"&&Xt(e,t,n)?(t=0,n=o):(t=t==null?0:Se(t),n=n===r?o:Se(n)),xr(e,t,n)):[]}function tg(e,t){return Fs(e,t)}function rg(e,t,n){return no(e,t,de(n,2))}function ig(e,t){var n=e==null?0:e.length;if(n){var o=Fs(e,t);if(o<n&&Nr(e[o],t))return o}return-1}function ng(e,t){return Fs(e,t,!0)}function sg(e,t,n){return no(e,t,de(n,2),!0)}function ag(e,t){var n=e==null?0:e.length;if(n){var o=Fs(e,t,!0)-1;if(Nr(e[o],t))return o}return-1}function og(e){return e&&e.length?au(e):[]}function cg(e,t){return e&&e.length?au(e,de(t,2)):[]}function ug(e){var t=e==null?0:e.length;return t?xr(e,1,t):[]}function hg(e,t,n){return e&&e.length?(t=n||t===r?1:Se(t),xr(e,0,t<0?0:t)):[]}function lg(e,t,n){var o=e==null?0:e.length;return o?(t=n||t===r?1:Se(t),t=o-t,xr(e,t<0?0:t,o)):[]}function fg(e,t){return e&&e.length?Ls(e,de(t,3),!1,!0):[]}function pg(e,t){return e&&e.length?Ls(e,de(t,3)):[]}var dg=Oe(function(e){return fi(Ht(e,1,bt,!0))}),gg=Oe(function(e){var t=Sr(e);return bt(t)&&(t=r),fi(Ht(e,1,bt,!0),de(t,2))}),yg=Oe(function(e){var t=Sr(e);return t=typeof t=="function"?t:r,fi(Ht(e,1,bt,!0),r,t)});function vg(e){return e&&e.length?fi(e):[]}function _g(e,t){return e&&e.length?fi(e,de(t,2)):[]}function mg(e,t){return t=typeof t=="function"?t:r,e&&e.length?fi(e,r,t):[]}function Io(e){if(!(e&&e.length))return[];var t=0;return e=oi(e,function(n){if(bt(n))return t=$t(n.length,t),!0}),qa(t,function(n){return nt(e,ja(n))})}function Bu(e,t){if(!(e&&e.length))return[];var n=Io(e);return t==null?n:nt(n,function(o){return qt(t,r,o)})}var wg=Oe(function(e,t){return bt(e)?xn(e,t):[]}),bg=Oe(function(e){return ao(oi(e,bt))}),Eg=Oe(function(e){var t=Sr(e);return bt(t)&&(t=r),ao(oi(e,bt),de(t,2))}),Ig=Oe(function(e){var t=Sr(e);return t=typeof t=="function"?t:r,ao(oi(e,bt),r,t)}),xg=Oe(Io);function Sg(e,t){return hu(e||[],t||[],In)}function Pg(e,t){return hu(e||[],t||[],Cn)}var Cg=Oe(function(e){var t=e.length,n=t>1?e[t-1]:r;return n=typeof n=="function"?(e.pop(),n):r,Bu(e,n)});function Gu(e){var t=p(e);return t.__chain__=!0,t}function Og(e,t){return t(e),e}function Vs(e,t){return t(e)}var Ag=Yr(function(e){var t=e.length,n=t?e[0]:0,o=this.__wrapped__,u=function(d){return Ga(d,e)};return t>1||this.__actions__.length||!(o instanceof Te)||!Xr(n)?this.thru(u):(o=o.slice(n,+n+(t?1:0)),o.__actions__.push({func:Vs,args:[u],thisArg:r}),new Er(o,this.__chain__).thru(function(d){return t&&!d.length&&d.push(r),d}))});function Rg(){return Gu(this)}function Tg(){return new Er(this.value(),this.__chain__)}function Dg(){this.__values__===r&&(this.__values__=oh(this.value()));var e=this.__index__>=this.__values__.length,t=e?r:this.__values__[this.__index__++];return{done:e,value:t}}function Ng(){return this}function Fg(e){for(var t,n=this;n instanceof As;){var o=Uu(n);o.__index__=0,o.__values__=r,t?u.__wrapped__=o:t=o;var u=o;n=n.__wrapped__}return u.__wrapped__=e,t}function Lg(){var e=this.__wrapped__;if(e instanceof Te){var t=e;return this.__actions__.length&&(t=new Te(this)),t=t.reverse(),t.__actions__.push({func:Vs,args:[Eo],thisArg:r}),new Er(t,this.__chain__)}return this.thru(Eo)}function jg(){return uu(this.__wrapped__,this.__actions__)}var $g=js(function(e,t,n){ke.call(e,n)?++e[n]:Jr(e,n,1)});function Mg(e,t,n){var o=xe(e)?Ec:Op;return n&&Xt(e,t,n)&&(t=r),o(e,de(t,3))}function qg(e,t){var n=xe(e)?oi:Bc;return n(e,de(t,3))}var Ug=wu(zu),zg=wu(ku);function kg(e,t){return Ht(Ks(e,t),1)}function Hg(e,t){return Ht(Ks(e,t),W)}function Vg(e,t,n){return n=n===r?1:Se(n),Ht(Ks(e,t),n)}function Wu(e,t){var n=xe(e)?wr:li;return n(e,de(t,3))}function Ju(e,t){var n=xe(e)?uf:Kc;return n(e,de(t,3))}var Kg=js(function(e,t,n){ke.call(e,n)?e[n].push(t):Jr(e,n,[t])});function Bg(e,t,n,o){e=sr(e)?e:an(e),n=n&&!o?Se(n):0;var u=e.length;return n<0&&(n=$t(u+n,0)),Qs(e)?n<=u&&e.indexOf(t,n)>-1:!!u&&Gi(e,t,n)>-1}var Gg=Oe(function(e,t,n){var o=-1,u=typeof t=="function",d=sr(e)?F(e.length):[];return li(e,function(E){d[++o]=u?qt(t,E,n):Sn(E,t,n)}),d}),Wg=js(function(e,t,n){Jr(e,n,t)});function Ks(e,t){var n=xe(e)?nt:Xc;return n(e,de(t,3))}function Jg(e,t,n,o){return e==null?[]:(xe(t)||(t=t==null?[]:[t]),n=o?r:n,xe(n)||(n=n==null?[]:[n]),ru(e,t,n))}var Qg=js(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]});function Yg(e,t,n){var o=xe(e)?Fa:Pc,u=arguments.length<3;return o(e,de(t,4),n,u,li)}function Xg(e,t,n){var o=xe(e)?hf:Pc,u=arguments.length<3;return o(e,de(t,4),n,u,Kc)}function Zg(e,t){var n=xe(e)?oi:Bc;return n(e,Ws(de(t,3)))}function ey(e){var t=xe(e)?zc:Bp;return t(e)}function ty(e,t,n){(n?Xt(e,t,n):t===r)?t=1:t=Se(t);var o=xe(e)?Ip:Gp;return o(e,t)}function ry(e){var t=xe(e)?xp:Jp;return t(e)}function iy(e){if(e==null)return 0;if(sr(e))return Qs(e)?Ji(e):e.length;var t=Bt(e);return t==Pe||t==qe?e.size:Za(e).length}function ny(e,t,n){var o=xe(e)?La:Qp;return n&&Xt(e,t,n)&&(t=r),o(e,de(t,3))}var sy=Oe(function(e,t){if(e==null)return[];var n=t.length;return n>1&&Xt(e,t[0],t[1])?t=[]:n>2&&Xt(t[0],t[1],t[2])&&(t=[t[0]]),ru(e,Ht(t,1),[])}),Bs=qf||function(){return De.Date.now()};function ay(e,t){if(typeof t!="function")throw new br(m);return e=Se(e),function(){if(--e<1)return t.apply(this,arguments)}}function Qu(e,t,n){return t=n?r:t,t=e&&t==null?e.length:t,Qr(e,V,r,r,r,r,t)}function Yu(e,t){var n;if(typeof t!="function")throw new br(m);return e=Se(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=r),n}}var xo=Oe(function(e,t,n){var o=ce;if(n.length){var u=ui(n,nn(xo));o|=le}return Qr(e,o,t,n,u)}),Xu=Oe(function(e,t,n){var o=ce|me;if(n.length){var u=ui(n,nn(Xu));o|=le}return Qr(t,o,e,n,u)});function Zu(e,t,n){t=n?r:t;var o=Qr(e,pe,r,r,r,r,r,t);return o.placeholder=Zu.placeholder,o}function eh(e,t,n){t=n?r:t;var o=Qr(e,he,r,r,r,r,r,t);return o.placeholder=eh.placeholder,o}function th(e,t,n){var o,u,d,E,x,R,k=0,H=!1,G=!1,te=!0;if(typeof e!="function")throw new br(m);t=Pr(t)||0,ct(n)&&(H=!!n.leading,G="maxWait"in n,d=G?$t(Pr(n.maxWait)||0,t):d,te="trailing"in n?!!n.trailing:te);function oe(Et){var Fr=o,ti=u;return o=u=r,k=Et,E=e.apply(ti,Fr),E}function ye(Et){return k=Et,x=Rn(Ae,t),H?oe(Et):E}function Ce(Et){var Fr=Et-R,ti=Et-k,wh=t-Fr;return G?Kt(wh,d-ti):wh}function ve(Et){var Fr=Et-R,ti=Et-k;return R===r||Fr>=t||Fr<0||G&&ti>=d}function Ae(){var Et=Bs();if(ve(Et))return Ne(Et);x=Rn(Ae,Ce(Et))}function Ne(Et){return x=r,te&&o?oe(Et):(o=u=r,E)}function dr(){x!==r&&lu(x),k=0,o=R=u=x=r}function Zt(){return x===r?E:Ne(Bs())}function gr(){var Et=Bs(),Fr=ve(Et);if(o=arguments,u=this,R=Et,Fr){if(x===r)return ye(R);if(G)return lu(x),x=Rn(Ae,t),oe(R)}return x===r&&(x=Rn(Ae,t)),E}return gr.cancel=dr,gr.flush=Zt,gr}var oy=Oe(function(e,t){return Vc(e,1,t)}),cy=Oe(function(e,t,n){return Vc(e,Pr(t)||0,n)});function uy(e){return Qr(e,ue)}function Gs(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new br(m);var n=function(){var o=arguments,u=t?t.apply(this,o):o[0],d=n.cache;if(d.has(u))return d.get(u);var E=e.apply(this,o);return n.cache=d.set(u,E)||d,E};return n.cache=new(Gs.Cache||Wr),n}Gs.Cache=Wr;function Ws(e){if(typeof e!="function")throw new br(m);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function hy(e){return Yu(2,e)}var ly=Yp(function(e,t){t=t.length==1&&xe(t[0])?nt(t[0],lr(de())):nt(Ht(t,1),lr(de()));var n=t.length;return Oe(function(o){for(var u=-1,d=Kt(o.length,n);++u<d;)o[u]=t[u].call(this,o[u]);return qt(e,this,o)})}),So=Oe(function(e,t){var n=ui(t,nn(So));return Qr(e,le,r,t,n)}),rh=Oe(function(e,t){var n=ui(t,nn(rh));return Qr(e,$,r,t,n)}),fy=Yr(function(e,t){return Qr(e,N,r,r,r,t)});function py(e,t){if(typeof e!="function")throw new br(m);return t=t===r?t:Se(t),Oe(e,t)}function dy(e,t){if(typeof e!="function")throw new br(m);return t=t==null?0:$t(Se(t),0),Oe(function(n){var o=n[t],u=di(n,0,t);return o&&ci(u,o),qt(e,this,u)})}function gy(e,t,n){var o=!0,u=!0;if(typeof e!="function")throw new br(m);return ct(n)&&(o="leading"in n?!!n.leading:o,u="trailing"in n?!!n.trailing:u),th(e,t,{leading:o,maxWait:t,trailing:u})}function yy(e){return Qu(e,1)}function vy(e,t){return So(co(t),e)}function _y(){if(!arguments.length)return[];var e=arguments[0];return xe(e)?e:[e]}function my(e){return Ir(e,Z)}function wy(e,t){return t=typeof t=="function"?t:r,Ir(e,Z,t)}function by(e){return Ir(e,Y|Z)}function Ey(e,t){return t=typeof t=="function"?t:r,Ir(e,Y|Z,t)}function Iy(e,t){return t==null||Hc(e,t,Ut(t))}function Nr(e,t){return e===t||e!==e&&t!==t}var xy=Us(Qa),Sy=Us(function(e,t){return e>=t}),Li=Jc(function(){return arguments}())?Jc:function(e){return vt(e)&&ke.call(e,"callee")&&!Lc.call(e,"callee")},xe=F.isArray,Py=Qt?lr(Qt):Fp;function sr(e){return e!=null&&Js(e.length)&&!Zr(e)}function bt(e){return vt(e)&&sr(e)}function Cy(e){return e===!0||e===!1||vt(e)&&Yt(e)==M}var gi=zf||jo,Oy=Rr?lr(Rr):Lp;function Ay(e){return vt(e)&&e.nodeType===1&&!Tn(e)}function Ry(e){if(e==null)return!0;if(sr(e)&&(xe(e)||typeof e=="string"||typeof e.splice=="function"||gi(e)||sn(e)||Li(e)))return!e.length;var t=Bt(e);if(t==Pe||t==qe)return!e.size;if(An(e))return!Za(e).length;for(var n in e)if(ke.call(e,n))return!1;return!0}function Ty(e,t){return Pn(e,t)}function Dy(e,t,n){n=typeof n=="function"?n:r;var o=n?n(e,t):r;return o===r?Pn(e,t,r,n):!!o}function Po(e){if(!vt(e))return!1;var t=Yt(e);return t==P||t==c||typeof e.message=="string"&&typeof e.name=="string"&&!Tn(e)}function Ny(e){return typeof e=="number"&&$c(e)}function Zr(e){if(!ct(e))return!1;var t=Yt(e);return t==ae||t==we||t==q||t==_t}function ih(e){return typeof e=="number"&&e==Se(e)}function Js(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=J}function ct(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function vt(e){return e!=null&&typeof e=="object"}var nh=mr?lr(mr):$p;function Fy(e,t){return e===t||Xa(e,t,yo(t))}function Ly(e,t,n){return n=typeof n=="function"?n:r,Xa(e,t,yo(t),n)}function jy(e){return sh(e)&&e!=+e}function $y(e){if(wd(e))throw new Ee(l);return Qc(e)}function My(e){return e===null}function qy(e){return e==null}function sh(e){return typeof e=="number"||vt(e)&&Yt(e)==Le}function Tn(e){if(!vt(e)||Yt(e)!=Re)return!1;var t=Es(e);if(t===null)return!0;var n=ke.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&_s.call(n)==Lf}var Co=Mr?lr(Mr):Mp;function Uy(e){return ih(e)&&e>=-J&&e<=J}var ah=yn?lr(yn):qp;function Qs(e){return typeof e=="string"||!xe(e)&&vt(e)&&Yt(e)==Ye}function pr(e){return typeof e=="symbol"||vt(e)&&Yt(e)==Xe}var sn=Ci?lr(Ci):Up;function zy(e){return e===r}function ky(e){return vt(e)&&Bt(e)==He}function Hy(e){return vt(e)&&Yt(e)==Ze}var Vy=Us(eo),Ky=Us(function(e,t){return e<=t});function oh(e){if(!e)return[];if(sr(e))return Qs(e)?Tr(e):nr(e);if(_n&&e[_n])return If(e[_n]());var t=Bt(e),n=t==Pe?za:t==qe?gs:an;return n(e)}function ei(e){if(!e)return e===0?e:0;if(e=Pr(e),e===W||e===-W){var t=e<0?-1:1;return t*C}return e===e?e:0}function Se(e){var t=ei(e),n=t%1;return t===t?n?t-n:t:0}function ch(e){return e?Ti(Se(e),0,Q):0}function Pr(e){if(typeof e=="number")return e;if(pr(e))return j;if(ct(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ct(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Cc(e);var n=ya.test(e);return n||_a.test(e)?Ie(e.slice(2),n?2:8):ga.test(e)?j:+e}function uh(e){return Ur(e,ar(e))}function By(e){return e?Ti(Se(e),-J,J):e===0?e:0}function Ue(e){return e==null?"":fr(e)}var Gy=tn(function(e,t){if(An(t)||sr(t)){Ur(t,Ut(t),e);return}for(var n in t)ke.call(t,n)&&In(e,n,t[n])}),hh=tn(function(e,t){Ur(t,ar(t),e)}),Ys=tn(function(e,t,n,o){Ur(t,ar(t),e,o)}),Wy=tn(function(e,t,n,o){Ur(t,Ut(t),e,o)}),Jy=Yr(Ga);function Qy(e,t){var n=en(e);return t==null?n:kc(n,t)}var Yy=Oe(function(e,t){e=Je(e);var n=-1,o=t.length,u=o>2?t[2]:r;for(u&&Xt(t[0],t[1],u)&&(o=1);++n<o;)for(var d=t[n],E=ar(d),x=-1,R=E.length;++x<R;){var k=E[x],H=e[k];(H===r||Nr(H,Yi[k])&&!ke.call(e,k))&&(e[k]=d[k])}return e}),Xy=Oe(function(e){return e.push(r,Cu),qt(lh,r,e)});function Zy(e,t){return Ic(e,de(t,3),qr)}function ev(e,t){return Ic(e,de(t,3),Ja)}function tv(e,t){return e==null?e:Wa(e,de(t,3),ar)}function rv(e,t){return e==null?e:Gc(e,de(t,3),ar)}function iv(e,t){return e&&qr(e,de(t,3))}function nv(e,t){return e&&Ja(e,de(t,3))}function sv(e){return e==null?[]:Ds(e,Ut(e))}function av(e){return e==null?[]:Ds(e,ar(e))}function Oo(e,t,n){var o=e==null?r:Di(e,t);return o===r?n:o}function ov(e,t){return e!=null&&Ru(e,t,Rp)}function Ao(e,t){return e!=null&&Ru(e,t,Tp)}var cv=Eu(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=ms.call(t)),e[t]=n},To(or)),uv=Eu(function(e,t,n){t!=null&&typeof t.toString!="function"&&(t=ms.call(t)),ke.call(e,t)?e[t].push(n):e[t]=[n]},de),hv=Oe(Sn);function Ut(e){return sr(e)?Uc(e):Za(e)}function ar(e){return sr(e)?Uc(e,!0):zp(e)}function lv(e,t){var n={};return t=de(t,3),qr(e,function(o,u,d){Jr(n,t(o,u,d),o)}),n}function fv(e,t){var n={};return t=de(t,3),qr(e,function(o,u,d){Jr(n,u,t(o,u,d))}),n}var pv=tn(function(e,t,n){Ns(e,t,n)}),lh=tn(function(e,t,n,o){Ns(e,t,n,o)}),dv=Yr(function(e,t){var n={};if(e==null)return n;var o=!1;t=nt(t,function(d){return d=pi(d,e),o||(o=d.length>1),d}),Ur(e,po(e),n),o&&(n=Ir(n,Y|X|Z,cd));for(var u=t.length;u--;)so(n,t[u]);return n});function gv(e,t){return fh(e,Ws(de(t)))}var yv=Yr(function(e,t){return e==null?{}:Hp(e,t)});function fh(e,t){if(e==null)return{};var n=nt(po(e),function(o){return[o]});return t=de(t),iu(e,n,function(o,u){return t(o,u[0])})}function vv(e,t,n){t=pi(t,e);var o=-1,u=t.length;for(u||(u=1,e=r);++o<u;){var d=e==null?r:e[zr(t[o])];d===r&&(o=u,d=n),e=Zr(d)?d.call(e):d}return e}function _v(e,t,n){return e==null?e:Cn(e,t,n)}function mv(e,t,n,o){return o=typeof o=="function"?o:r,e==null?e:Cn(e,t,n,o)}var ph=Su(Ut),dh=Su(ar);function wv(e,t,n){var o=xe(e),u=o||gi(e)||sn(e);if(t=de(t,4),n==null){var d=e&&e.constructor;u?n=o?new d:[]:ct(e)?n=Zr(d)?en(Es(e)):{}:n={}}return(u?wr:qr)(e,function(E,x,R){return t(n,E,x,R)}),n}function bv(e,t){return e==null?!0:so(e,t)}function Ev(e,t,n){return e==null?e:cu(e,t,co(n))}function Iv(e,t,n,o){return o=typeof o=="function"?o:r,e==null?e:cu(e,t,co(n),o)}function an(e){return e==null?[]:Ua(e,Ut(e))}function xv(e){return e==null?[]:Ua(e,ar(e))}function Sv(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=Pr(n),n=n===n?n:0),t!==r&&(t=Pr(t),t=t===t?t:0),Ti(Pr(e),t,n)}function Pv(e,t,n){return t=ei(t),n===r?(n=t,t=0):n=ei(n),e=Pr(e),Dp(e,t,n)}function Cv(e,t,n){if(n&&typeof n!="boolean"&&Xt(e,t,n)&&(t=n=r),n===r&&(typeof t=="boolean"?(n=t,t=r):typeof e=="boolean"&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=ei(e),t===r?(t=e,e=0):t=ei(t)),e>t){var o=e;e=t,t=o}if(n||e%1||t%1){var u=Mc();return Kt(e+u*(t-e+Ge("1e-"+((u+"").length-1))),t)}return ro(e,t)}var Ov=rn(function(e,t,n){return t=t.toLowerCase(),e+(n?gh(t):t)});function gh(e){return Ro(Ue(e).toLowerCase())}function yh(e){return e=Ue(e),e&&e.replace(Kr,_f).replace(Ta,"")}function Av(e,t,n){e=Ue(e),t=fr(t);var o=e.length;n=n===r?o:Ti(Se(n),0,o);var u=n;return n-=t.length,n>=0&&e.slice(n,u)==t}function Rv(e){return e=Ue(e),e&&rt.test(e)?e.replace(Ei,mf):e}function Tv(e){return e=Ue(e),e&&At.test(e)?e.replace(dt,"\\$&"):e}var Dv=rn(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Nv=rn(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Fv=mu("toLowerCase");function Lv(e,t,n){e=Ue(e),t=Se(t);var o=t?Ji(e):0;if(!t||o>=t)return e;var u=(t-o)/2;return qs(Ps(u),n)+e+qs(Ss(u),n)}function jv(e,t,n){e=Ue(e),t=Se(t);var o=t?Ji(e):0;return t&&o<t?e+qs(t-o,n):e}function $v(e,t,n){e=Ue(e),t=Se(t);var o=t?Ji(e):0;return t&&o<t?qs(t-o,n)+e:e}function Mv(e,t,n){return n||t==null?t=0:t&&(t=+t),Kf(Ue(e).replace(gt,""),t||0)}function qv(e,t,n){return(n?Xt(e,t,n):t===r)?t=1:t=Se(t),io(Ue(e),t)}function Uv(){var e=arguments,t=Ue(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var zv=rn(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()});function kv(e,t,n){return n&&typeof n!="number"&&Xt(e,t,n)&&(t=n=r),n=n===r?Q:n>>>0,n?(e=Ue(e),e&&(typeof t=="string"||t!=null&&!Co(t))&&(t=fr(t),!t&&Wi(e))?di(Tr(e),0,n):e.split(t,n)):[]}var Hv=rn(function(e,t,n){return e+(n?" ":"")+Ro(t)});function Vv(e,t,n){return e=Ue(e),n=n==null?0:Ti(Se(n),0,e.length),t=fr(t),e.slice(n,n+t.length)==t}function Kv(e,t,n){var o=p.templateSettings;n&&Xt(e,t,n)&&(t=r),e=Ue(e),t=Ys({},t,o,Pu);var u=Ys({},t.imports,o.imports,Pu),d=Ut(u),E=Ua(u,d),x,R,k=0,H=t.interpolate||Ui,G="__p += '",te=ka((t.escape||Ui).source+"|"+H.source+"|"+(H===ot?da:Ui).source+"|"+(t.evaluate||Ui).source+"|$","g"),oe="//# sourceURL="+(ke.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Da+"]")+`
`;e.replace(te,function(ve,Ae,Ne,dr,Zt,gr){return Ne||(Ne=dr),G+=e.slice(k,gr).replace(wa,wf),Ae&&(x=!0,G+=`' +
__e(`+Ae+`) +
'`),Zt&&(R=!0,G+=`';
`+Zt+`;
__p += '`),Ne&&(G+=`' +
((__t = (`+Ne+`)) == null ? '' : __t) +
'`),k=gr+ve.length,ve}),G+=`';
`;var ye=ke.call(t,"variable")&&t.variable;if(!ye)G=`with (obj) {
`+G+`
}
`;else if(fa.test(ye))throw new Ee(b);G=(R?G.replace(jr,""):G).replace(Jt,"$1").replace(Vr,"$1;"),G="function("+(ye||"obj")+`) {
`+(ye?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(x?", __e = _.escape":"")+(R?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+G+`return __p
}`;var Ce=_h(function(){return Me(d,oe+"return "+G).apply(r,E)});if(Ce.source=G,Po(Ce))throw Ce;return Ce}function Bv(e){return Ue(e).toLowerCase()}function Gv(e){return Ue(e).toUpperCase()}function Wv(e,t,n){if(e=Ue(e),e&&(n||t===r))return Cc(e);if(!e||!(t=fr(t)))return e;var o=Tr(e),u=Tr(t),d=Oc(o,u),E=Ac(o,u)+1;return di(o,d,E).join("")}function Jv(e,t,n){if(e=Ue(e),e&&(n||t===r))return e.slice(0,Tc(e)+1);if(!e||!(t=fr(t)))return e;var o=Tr(e),u=Ac(o,Tr(t))+1;return di(o,0,u).join("")}function Qv(e,t,n){if(e=Ue(e),e&&(n||t===r))return e.replace(gt,"");if(!e||!(t=fr(t)))return e;var o=Tr(e),u=Oc(o,Tr(t));return di(o,u).join("")}function Yv(e,t){var n=f,o=v;if(ct(t)){var u="separator"in t?t.separator:u;n="length"in t?Se(t.length):n,o="omission"in t?fr(t.omission):o}e=Ue(e);var d=e.length;if(Wi(e)){var E=Tr(e);d=E.length}if(n>=d)return e;var x=n-Ji(o);if(x<1)return o;var R=E?di(E,0,x).join(""):e.slice(0,x);if(u===r)return R+o;if(E&&(x+=R.length-x),Co(u)){if(e.slice(x).search(u)){var k,H=R;for(u.global||(u=ka(u.source,Ue(_r.exec(u))+"g")),u.lastIndex=0;k=u.exec(H);)var G=k.index;R=R.slice(0,G===r?x:G)}}else if(e.indexOf(fr(u),x)!=x){var te=R.lastIndexOf(u);te>-1&&(R=R.slice(0,te))}return R+o}function Xv(e){return e=Ue(e),e&&lt.test(e)?e.replace(si,Cf):e}var Zv=rn(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Ro=mu("toUpperCase");function vh(e,t,n){return e=Ue(e),t=n?r:t,t===r?Ef(e)?Rf(e):pf(e):e.match(t)||[]}var _h=Oe(function(e,t){try{return qt(e,r,t)}catch(n){return Po(n)?n:new Ee(n)}}),e0=Yr(function(e,t){return wr(t,function(n){n=zr(n),Jr(e,n,xo(e[n],e))}),e});function t0(e){var t=e==null?0:e.length,n=de();return e=t?nt(e,function(o){if(typeof o[1]!="function")throw new br(m);return[n(o[0]),o[1]]}):[],Oe(function(o){for(var u=-1;++u<t;){var d=e[u];if(qt(d[0],this,o))return qt(d[1],this,o)}})}function r0(e){return Cp(Ir(e,Y))}function To(e){return function(){return e}}function i0(e,t){return e==null||e!==e?t:e}var n0=bu(),s0=bu(!0);function or(e){return e}function Do(e){return Yc(typeof e=="function"?e:Ir(e,Y))}function a0(e){return Zc(Ir(e,Y))}function o0(e,t){return eu(e,Ir(t,Y))}var c0=Oe(function(e,t){return function(n){return Sn(n,e,t)}}),u0=Oe(function(e,t){return function(n){return Sn(e,n,t)}});function No(e,t,n){var o=Ut(t),u=Ds(t,o);n==null&&!(ct(t)&&(u.length||!o.length))&&(n=t,t=e,e=this,u=Ds(t,Ut(t)));var d=!(ct(n)&&"chain"in n)||!!n.chain,E=Zr(e);return wr(u,function(x){var R=t[x];e[x]=R,E&&(e.prototype[x]=function(){var k=this.__chain__;if(d||k){var H=e(this.__wrapped__),G=H.__actions__=nr(this.__actions__);return G.push({func:R,args:arguments,thisArg:e}),H.__chain__=k,H}return R.apply(e,ci([this.value()],arguments))})}),e}function h0(){return De._===this&&(De._=jf),this}function Fo(){}function l0(e){return e=Se(e),Oe(function(t){return tu(t,e)})}var f0=ho(nt),p0=ho(Ec),d0=ho(La);function mh(e){return _o(e)?ja(zr(e)):Vp(e)}function g0(e){return function(t){return e==null?r:Di(e,t)}}var y0=Iu(),v0=Iu(!0);function Lo(){return[]}function jo(){return!1}function _0(){return{}}function m0(){return""}function w0(){return!0}function b0(e,t){if(e=Se(e),e<1||e>J)return[];var n=Q,o=Kt(e,Q);t=de(t),e-=Q;for(var u=qa(o,t);++n<e;)t(n);return u}function E0(e){return xe(e)?nt(e,zr):pr(e)?[e]:nr(qu(Ue(e)))}function I0(e){var t=++Ff;return Ue(e)+t}var x0=Ms(function(e,t){return e+t},0),S0=lo("ceil"),P0=Ms(function(e,t){return e/t},1),C0=lo("floor");function O0(e){return e&&e.length?Ts(e,or,Qa):r}function A0(e,t){return e&&e.length?Ts(e,de(t,2),Qa):r}function R0(e){return Sc(e,or)}function T0(e,t){return Sc(e,de(t,2))}function D0(e){return e&&e.length?Ts(e,or,eo):r}function N0(e,t){return e&&e.length?Ts(e,de(t,2),eo):r}var F0=Ms(function(e,t){return e*t},1),L0=lo("round"),j0=Ms(function(e,t){return e-t},0);function $0(e){return e&&e.length?Ma(e,or):0}function M0(e,t){return e&&e.length?Ma(e,de(t,2)):0}return p.after=ay,p.ary=Qu,p.assign=Gy,p.assignIn=hh,p.assignInWith=Ys,p.assignWith=Wy,p.at=Jy,p.before=Yu,p.bind=xo,p.bindAll=e0,p.bindKey=Xu,p.castArray=_y,p.chain=Gu,p.chunk=Cd,p.compact=Od,p.concat=Ad,p.cond=t0,p.conforms=r0,p.constant=To,p.countBy=$g,p.create=Qy,p.curry=Zu,p.curryRight=eh,p.debounce=th,p.defaults=Yy,p.defaultsDeep=Xy,p.defer=oy,p.delay=cy,p.difference=Rd,p.differenceBy=Td,p.differenceWith=Dd,p.drop=Nd,p.dropRight=Fd,p.dropRightWhile=Ld,p.dropWhile=jd,p.fill=$d,p.filter=qg,p.flatMap=kg,p.flatMapDeep=Hg,p.flatMapDepth=Vg,p.flatten=Hu,p.flattenDeep=Md,p.flattenDepth=qd,p.flip=uy,p.flow=n0,p.flowRight=s0,p.fromPairs=Ud,p.functions=sv,p.functionsIn=av,p.groupBy=Kg,p.initial=kd,p.intersection=Hd,p.intersectionBy=Vd,p.intersectionWith=Kd,p.invert=cv,p.invertBy=uv,p.invokeMap=Gg,p.iteratee=Do,p.keyBy=Wg,p.keys=Ut,p.keysIn=ar,p.map=Ks,p.mapKeys=lv,p.mapValues=fv,p.matches=a0,p.matchesProperty=o0,p.memoize=Gs,p.merge=pv,p.mergeWith=lh,p.method=c0,p.methodOf=u0,p.mixin=No,p.negate=Ws,p.nthArg=l0,p.omit=dv,p.omitBy=gv,p.once=hy,p.orderBy=Jg,p.over=f0,p.overArgs=ly,p.overEvery=p0,p.overSome=d0,p.partial=So,p.partialRight=rh,p.partition=Qg,p.pick=yv,p.pickBy=fh,p.property=mh,p.propertyOf=g0,p.pull=Jd,p.pullAll=Ku,p.pullAllBy=Qd,p.pullAllWith=Yd,p.pullAt=Xd,p.range=y0,p.rangeRight=v0,p.rearg=fy,p.reject=Zg,p.remove=Zd,p.rest=py,p.reverse=Eo,p.sampleSize=ty,p.set=_v,p.setWith=mv,p.shuffle=ry,p.slice=eg,p.sortBy=sy,p.sortedUniq=og,p.sortedUniqBy=cg,p.split=kv,p.spread=dy,p.tail=ug,p.take=hg,p.takeRight=lg,p.takeRightWhile=fg,p.takeWhile=pg,p.tap=Og,p.throttle=gy,p.thru=Vs,p.toArray=oh,p.toPairs=ph,p.toPairsIn=dh,p.toPath=E0,p.toPlainObject=uh,p.transform=wv,p.unary=yy,p.union=dg,p.unionBy=gg,p.unionWith=yg,p.uniq=vg,p.uniqBy=_g,p.uniqWith=mg,p.unset=bv,p.unzip=Io,p.unzipWith=Bu,p.update=Ev,p.updateWith=Iv,p.values=an,p.valuesIn=xv,p.without=wg,p.words=vh,p.wrap=vy,p.xor=bg,p.xorBy=Eg,p.xorWith=Ig,p.zip=xg,p.zipObject=Sg,p.zipObjectDeep=Pg,p.zipWith=Cg,p.entries=ph,p.entriesIn=dh,p.extend=hh,p.extendWith=Ys,No(p,p),p.add=x0,p.attempt=_h,p.camelCase=Ov,p.capitalize=gh,p.ceil=S0,p.clamp=Sv,p.clone=my,p.cloneDeep=by,p.cloneDeepWith=Ey,p.cloneWith=wy,p.conformsTo=Iy,p.deburr=yh,p.defaultTo=i0,p.divide=P0,p.endsWith=Av,p.eq=Nr,p.escape=Rv,p.escapeRegExp=Tv,p.every=Mg,p.find=Ug,p.findIndex=zu,p.findKey=Zy,p.findLast=zg,p.findLastIndex=ku,p.findLastKey=ev,p.floor=C0,p.forEach=Wu,p.forEachRight=Ju,p.forIn=tv,p.forInRight=rv,p.forOwn=iv,p.forOwnRight=nv,p.get=Oo,p.gt=xy,p.gte=Sy,p.has=ov,p.hasIn=Ao,p.head=Vu,p.identity=or,p.includes=Bg,p.indexOf=zd,p.inRange=Pv,p.invoke=hv,p.isArguments=Li,p.isArray=xe,p.isArrayBuffer=Py,p.isArrayLike=sr,p.isArrayLikeObject=bt,p.isBoolean=Cy,p.isBuffer=gi,p.isDate=Oy,p.isElement=Ay,p.isEmpty=Ry,p.isEqual=Ty,p.isEqualWith=Dy,p.isError=Po,p.isFinite=Ny,p.isFunction=Zr,p.isInteger=ih,p.isLength=Js,p.isMap=nh,p.isMatch=Fy,p.isMatchWith=Ly,p.isNaN=jy,p.isNative=$y,p.isNil=qy,p.isNull=My,p.isNumber=sh,p.isObject=ct,p.isObjectLike=vt,p.isPlainObject=Tn,p.isRegExp=Co,p.isSafeInteger=Uy,p.isSet=ah,p.isString=Qs,p.isSymbol=pr,p.isTypedArray=sn,p.isUndefined=zy,p.isWeakMap=ky,p.isWeakSet=Hy,p.join=Bd,p.kebabCase=Dv,p.last=Sr,p.lastIndexOf=Gd,p.lowerCase=Nv,p.lowerFirst=Fv,p.lt=Vy,p.lte=Ky,p.max=O0,p.maxBy=A0,p.mean=R0,p.meanBy=T0,p.min=D0,p.minBy=N0,p.stubArray=Lo,p.stubFalse=jo,p.stubObject=_0,p.stubString=m0,p.stubTrue=w0,p.multiply=F0,p.nth=Wd,p.noConflict=h0,p.noop=Fo,p.now=Bs,p.pad=Lv,p.padEnd=jv,p.padStart=$v,p.parseInt=Mv,p.random=Cv,p.reduce=Yg,p.reduceRight=Xg,p.repeat=qv,p.replace=Uv,p.result=vv,p.round=L0,p.runInContext=A,p.sample=ey,p.size=iy,p.snakeCase=zv,p.some=ny,p.sortedIndex=tg,p.sortedIndexBy=rg,p.sortedIndexOf=ig,p.sortedLastIndex=ng,p.sortedLastIndexBy=sg,p.sortedLastIndexOf=ag,p.startCase=Hv,p.startsWith=Vv,p.subtract=j0,p.sum=$0,p.sumBy=M0,p.template=Kv,p.times=b0,p.toFinite=ei,p.toInteger=Se,p.toLength=ch,p.toLower=Bv,p.toNumber=Pr,p.toSafeInteger=By,p.toString=Ue,p.toUpper=Gv,p.trim=Wv,p.trimEnd=Jv,p.trimStart=Qv,p.truncate=Yv,p.unescape=Xv,p.uniqueId=I0,p.upperCase=Zv,p.upperFirst=Ro,p.each=Wu,p.eachRight=Ju,p.first=Vu,No(p,function(){var e={};return qr(p,function(t,n){ke.call(p.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),p.VERSION=s,wr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){p[e].placeholder=p}),wr(["drop","take"],function(e,t){Te.prototype[e]=function(n){n=n===r?1:$t(Se(n),0);var o=this.__filtered__&&!t?new Te(this):this.clone();return o.__filtered__?o.__takeCount__=Kt(n,o.__takeCount__):o.__views__.push({size:Kt(n,Q),type:e+(o.__dir__<0?"Right":"")}),o},Te.prototype[e+"Right"]=function(n){return this.reverse()[e](n).reverse()}}),wr(["filter","map","takeWhile"],function(e,t){var n=t+1,o=n==y||n==L;Te.prototype[e]=function(u){var d=this.clone();return d.__iteratees__.push({iteratee:de(u,3),type:n}),d.__filtered__=d.__filtered__||o,d}}),wr(["head","last"],function(e,t){var n="take"+(t?"Right":"");Te.prototype[e]=function(){return this[n](1).value()[0]}}),wr(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Te.prototype[e]=function(){return this.__filtered__?new Te(this):this[n](1)}}),Te.prototype.compact=function(){return this.filter(or)},Te.prototype.find=function(e){return this.filter(e).head()},Te.prototype.findLast=function(e){return this.reverse().find(e)},Te.prototype.invokeMap=Oe(function(e,t){return typeof e=="function"?new Te(this):this.map(function(n){return Sn(n,e,t)})}),Te.prototype.reject=function(e){return this.filter(Ws(de(e)))},Te.prototype.slice=function(e,t){e=Se(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Te(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(t=Se(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},Te.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Te.prototype.toArray=function(){return this.take(Q)},qr(Te.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),o=/^(?:head|last)$/.test(t),u=p[o?"take"+(t=="last"?"Right":""):t],d=o||/^find/.test(t);u&&(p.prototype[t]=function(){var E=this.__wrapped__,x=o?[1]:arguments,R=E instanceof Te,k=x[0],H=R||xe(E),G=function(Ae){var Ne=u.apply(p,ci([Ae],x));return o&&te?Ne[0]:Ne};H&&n&&typeof k=="function"&&k.length!=1&&(R=H=!1);var te=this.__chain__,oe=!!this.__actions__.length,ye=d&&!te,Ce=R&&!oe;if(!d&&H){E=Ce?E:new Te(this);var ve=e.apply(E,x);return ve.__actions__.push({func:Vs,args:[G],thisArg:r}),new Er(ve,te)}return ye&&Ce?e.apply(this,x):(ve=this.thru(G),ye?o?ve.value()[0]:ve.value():ve)})}),wr(["pop","push","shift","sort","splice","unshift"],function(e){var t=ys[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",o=/^(?:pop|shift)$/.test(e);p.prototype[e]=function(){var u=arguments;if(o&&!this.__chain__){var d=this.value();return t.apply(xe(d)?d:[],u)}return this[n](function(E){return t.apply(xe(E)?E:[],u)})}}),qr(Te.prototype,function(e,t){var n=p[t];if(n){var o=n.name+"";ke.call(Zi,o)||(Zi[o]=[]),Zi[o].push({name:t,func:n})}}),Zi[$s(r,me).name]=[{name:"wrapper",func:r}],Te.prototype.clone=Xf,Te.prototype.reverse=Zf,Te.prototype.value=ep,p.prototype.at=Ag,p.prototype.chain=Rg,p.prototype.commit=Tg,p.prototype.next=Dg,p.prototype.plant=Fg,p.prototype.reverse=Lg,p.prototype.toJSON=p.prototype.valueOf=p.prototype.value=jg,p.prototype.first=p.prototype.head,_n&&(p.prototype[_n]=Ng),p},Qi=Tf();wt?((wt.exports=Qi)._=Qi,We._=Qi):De._=Qi}).call(zn)})(nc,nc.exports);var pb=Object.defineProperty,db=Object.defineProperties,gb=Object.getOwnPropertyDescriptors,gl=Object.getOwnPropertySymbols,yb=Object.prototype.hasOwnProperty,vb=Object.prototype.propertyIsEnumerable,yl=(h,i,r)=>i in h?pb(h,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):h[i]=r,ea=(h,i)=>{for(var r in i||(i={}))yb.call(i,r)&&yl(h,r,i[r]);if(gl)for(var r of gl(i))vb.call(i,r)&&yl(h,r,i[r]);return h},_b=(h,i)=>db(h,gb(i));function Or(h,i,r){let s;const a=sc(h);return i.rpcMap&&(s=i.rpcMap[a]),s||(s=`${fb}?chainId=eip155:${a}&projectId=${r}`),s}function sc(h){return h.includes("eip155")?Number(h.split(":")[1]):Number(h)}function af(h){return h.map(i=>`${i.split(":")[0]}:${i.split(":")[1]}`)}function mb(h,i){const r=Object.keys(i.namespaces).filter(a=>a.includes(h));if(!r.length)return[];const s=[];return r.forEach(a=>{const l=i.namespaces[a].accounts;s.push(...l)}),s}function wb(h={},i={}){const r=vl(h),s=vl(i);return nc.exports.merge(r,s)}function vl(h){var i,r,s,a;const l={};if(!ia(h))return l;for(const[m,b]of Object.entries(h)){const I=Rl(m)?[m]:b.chains,T=b.methods||[],U=b.events||[],Y=b.rpcMap||{},X=kn(m);l[X]=_b(ea(ea({},l[X]),b),{chains:Mo(I,(i=l[X])==null?void 0:i.chains),methods:Mo(T,(r=l[X])==null?void 0:r.methods),events:Mo(U,(s=l[X])==null?void 0:s.events),rpcMap:ea(ea({},Y),(a=l[X])==null?void 0:a.rpcMap)})}return l}function bb(h){return h.includes(":")?h.split(":")[2]:h}function Eb(h){const i={};for(const[r,s]of Object.entries(h)){const a=s.methods||[],l=s.events||[],m=s.accounts||[],b=Rl(r)?[r]:s.chains?s.chains:af(s.accounts);i[r]={chains:b,methods:a,events:l,accounts:m}}return i}function Jo(h){return typeof h=="number"?h:h.includes("0x")?parseInt(h,16):h.includes(":")?Number(h.split(":")[1]):Number(h)}const of={},It=h=>of[h],Qo=(h,i)=>{of[h]=i};class Ib{constructor(i){this.name="polkadot",this.namespace=i.namespace,this.events=It("events"),this.client=It("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){if(this.chainId=i,!this.httpProviders[i]){const s=r||Or(`${this.name}:${i}`,this.namespace);if(!s)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,s)}this.events.emit(bi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const i=this.namespace.accounts;return i?i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{var s;i[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){const s=this.createHttpProvider(i,r);s&&(this.httpProviders[i]=s)}createHttpProvider(i,r){const s=r||Or(i,this.namespace);return typeof s>"u"?void 0:new wi(new Mi(s,It("disableProviderPing")))}}class xb{constructor(i){this.name="eip155",this.namespace=i.namespace,this.events=It("events"),this.client=It("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(i){switch(i.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(i);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(i.request.method)?await this.client.request(i):this.getHttpProvider().request(i.request)}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}setDefaultChain(i,r){const s=sc(i);if(!this.httpProviders[s]){const a=r||Or(`${this.name}:${s}`,this.namespace,this.client.core.projectId);if(!a)throw new Error(`No RPC url provided for chainId: ${s}`);this.setHttpProvider(s,a)}this.chainId=s,this.events.emit(bi.DEFAULT_CHAIN_CHANGED,`${this.name}:${s}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}createHttpProvider(i,r){const s=r||Or(`${this.name}:${i}`,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new wi(new Mi(s,It("disableProviderPing")))}setHttpProvider(i,r){const s=this.createHttpProvider(i,r);s&&(this.httpProviders[i]=s)}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{var s;const a=sc(r);i[a]=this.createHttpProvider(a,(s=this.namespace.rpcMap)==null?void 0:s[r])}),i}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const i=this.chainId,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}async handleSwitchChain(i){var r,s;let a=i.request.params?(r=i.request.params[0])==null?void 0:r.chainId:"0x0";a=a.startsWith("0x")?a:`0x${a}`;const l=parseInt(a,16);if(this.isChainApproved(l))this.setDefaultChain(`${l}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:i.topic,request:{method:i.request.method,params:[{chainId:a}]},chainId:(s=this.namespace.chains)==null?void 0:s[0]}),this.setDefaultChain(`${l}`);else throw new Error(`Failed to switch to chain 'eip155:${l}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(i){return this.namespace.chains.includes(`${this.name}:${i}`)}}class Sb{constructor(i){this.name="solana",this.namespace=i.namespace,this.events=It("events"),this.client=It("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){if(!this.httpProviders[i]){const s=r||Or(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,s)}this.chainId=i,this.events.emit(bi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{var s;i[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){const s=this.createHttpProvider(i,r);s&&(this.httpProviders[i]=s)}createHttpProvider(i,r){const s=r||Or(i,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new wi(new Mi(s,It("disableProviderPing")))}}class Pb{constructor(i){this.name="cosmos",this.namespace=i.namespace,this.events=It("events"),this.client=It("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){if(this.chainId=i,!this.httpProviders[i]){const s=r||Or(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,s)}this.events.emit(bi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{var s;i[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){const s=this.createHttpProvider(i,r);s&&(this.httpProviders[i]=s)}createHttpProvider(i,r){const s=r||Or(i,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new wi(new Mi(s,It("disableProviderPing")))}}class Cb{constructor(i){this.name="cip34",this.namespace=i.namespace,this.events=It("events"),this.client=It("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){if(this.chainId=i,!this.httpProviders[i]){const s=r||this.getCardanoRPCUrl(i);if(!s)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,s)}this.events.emit(bi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{const s=this.getCardanoRPCUrl(r);i[r]=this.createHttpProvider(r,s)}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}getCardanoRPCUrl(i){const r=this.namespace.rpcMap;if(r)return r[i]}setHttpProvider(i,r){const s=this.createHttpProvider(i,r);s&&(this.httpProviders[i]=s)}createHttpProvider(i,r){const s=r||this.getCardanoRPCUrl(i);return typeof s>"u"?void 0:new wi(new Mi(s,It("disableProviderPing")))}}class Ob{constructor(i){this.name="elrond",this.namespace=i.namespace,this.events=It("events"),this.client=It("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){if(!this.httpProviders[i]){const s=r||Or(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,s)}this.chainId=i,this.events.emit(bi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{var s;i[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){const s=this.createHttpProvider(i,r);s&&(this.httpProviders[i]=s)}createHttpProvider(i,r){const s=r||Or(i,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new wi(new Mi(s,It("disableProviderPing")))}}class Ab{constructor(i){this.name="multiversx",this.namespace=i.namespace,this.events=It("events"),this.client=It("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(i){this.namespace=Object.assign(this.namespace,i)}requestAccounts(){return this.getAccounts()}request(i){return this.namespace.methods.includes(i.request.method)?this.client.request(i):this.getHttpProvider().request(i.request)}setDefaultChain(i,r){if(!this.httpProviders[i]){const s=r||Or(`${this.name}:${i}`,this.namespace,this.client.core.projectId);if(!s)throw new Error(`No RPC url provided for chainId: ${i}`);this.setHttpProvider(i,s)}this.chainId=i,this.events.emit(bi.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const i=this.namespace.chains[0];if(!i)throw new Error("ChainId not found");return i.split(":")[1]}getAccounts(){const i=this.namespace.accounts;return i?[...new Set(i.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const i={};return this.namespace.chains.forEach(r=>{var s;i[r]=this.createHttpProvider(r,(s=this.namespace.rpcMap)==null?void 0:s[r])}),i}getHttpProvider(){const i=`${this.name}:${this.chainId}`,r=this.httpProviders[i];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${i} not found`);return r}setHttpProvider(i,r){const s=this.createHttpProvider(i,r);s&&(this.httpProviders[i]=s)}createHttpProvider(i,r){const s=r||Or(i,this.namespace,this.client.core.projectId);return typeof s>"u"?void 0:new wi(new Mi(s,It("disableProviderPing")))}}var Rb=Object.defineProperty,Tb=Object.defineProperties,Db=Object.getOwnPropertyDescriptors,_l=Object.getOwnPropertySymbols,Nb=Object.prototype.hasOwnProperty,Fb=Object.prototype.propertyIsEnumerable,ml=(h,i,r)=>i in h?Rb(h,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):h[i]=r,ta=(h,i)=>{for(var r in i||(i={}))Nb.call(i,r)&&ml(h,r,i[r]);if(_l)for(var r of _l(i))Fb.call(i,r)&&ml(h,r,i[r]);return h},Yo=(h,i)=>Tb(h,Db(i));class wc{constructor(i){this.events=new vr.exports,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=i,this.logger=typeof i?.logger<"u"&&typeof i?.logger!="string"?i.logger:Fe.pino(Fe.getDefaultLoggerOptions({level:i?.logger||pl})),this.disableProviderPing=i?.disableProviderPing||!1}static async init(i){const r=new wc(i);return await r.initialize(),r}async request(i,r){const[s,a]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:ta({},i),chainId:`${s}:${a}`,topic:this.session.topic})}sendAsync(i,r,s){this.request(i,s).then(a=>r(null,a)).catch(a=>r(a,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var i;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(i=this.session)==null?void 0:i.topic,reason:tr("USER_DISCONNECTED")}),await this.cleanup()}async connect(i){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(i),await this.cleanupPendingPairings(),!i.skipPairing)return await this.pair(i.pairingTopic)}on(i,r){this.events.on(i,r)}once(i,r){this.events.once(i,r)}removeListener(i,r){this.events.removeListener(i,r)}off(i,r){this.events.off(i,r)}get isWalletConnect(){return!0}async pair(i){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:s,approval:a}=await this.client.connect({pairingTopic:i,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});s&&(this.uri=s,this.events.emit("display_uri",s)),await a().then(l=>{this.session=l,this.namespaces||(this.namespaces=Eb(l.namespaces),this.persist("namespaces",this.namespaces))}).catch(l=>{if(l.message!==sf)throw l;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(i,r){try{if(!this.session)return;const[s,a]=this.validateChain(i);this.getProvider(s).setDefaultChain(a,r)}catch(s){if(!/Please call connect/.test(s.message))throw s}}async cleanupPendingPairings(i={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if(ln(r)){for(const s of r)i.deletePairings?this.client.core.expirer.set(s.topic,0):await this.client.core.relayer.subscriber.unsubscribe(s.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const i=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[i]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await mc.init({logger:this.providerOpts.logger||pl,relayUrl:this.providerOpts.relayUrl||ub,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const i=[...new Set(Object.keys(this.session.namespaces).map(r=>kn(r)))];Qo("client",this.client),Qo("events",this.events),Qo("disableProviderPing",this.disableProviderPing),i.forEach(r=>{if(!this.session)return;const s=mb(r,this.session),a=af(s),l=wb(this.namespaces,this.optionalNamespaces),m=Yo(ta({},l[r]),{accounts:s,chains:a});switch(r){case"eip155":this.rpcProviders[r]=new xb({namespace:m});break;case"solana":this.rpcProviders[r]=new Sb({namespace:m});break;case"cosmos":this.rpcProviders[r]=new Pb({namespace:m});break;case"polkadot":this.rpcProviders[r]=new Ib({namespace:m});break;case"cip34":this.rpcProviders[r]=new Cb({namespace:m});break;case"elrond":this.rpcProviders[r]=new Ob({namespace:m});break;case"multiversx":this.rpcProviders[r]=new Ab({namespace:m});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",i=>{this.events.emit("session_ping",i)}),this.client.on("session_event",i=>{const{params:r}=i,{event:s}=r;if(s.name==="accountsChanged"){const a=s.data;a&&ln(a)&&this.events.emit("accountsChanged",a.map(bb))}else if(s.name==="chainChanged"){const a=r.chainId,l=r.event.data,m=kn(a),b=Jo(a)!==Jo(l)?`${m}:${Jo(l)}`:a;this.onChainChanged(b)}else this.events.emit(s.name,s.data);this.events.emit("session_event",i)}),this.client.on("session_update",({topic:i,params:r})=>{var s;const{namespaces:a}=r,l=(s=this.client)==null?void 0:s.session.get(i);this.session=Yo(ta({},l),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:i,params:r})}),this.client.on("session_delete",async i=>{await this.cleanup(),this.events.emit("session_delete",i),this.events.emit("disconnect",Yo(ta({},tr("USER_DISCONNECTED")),{data:i.topic}))}),this.on(bi.DEFAULT_CHAIN_CHANGED,i=>{this.onChainChanged(i,!0)})}getProvider(i){if(!this.rpcProviders[i])throw new Error(`Provider not found: ${i}`);return this.rpcProviders[i]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(i=>{var r;this.getProvider(i).updateNamespace((r=this.session)==null?void 0:r.namespaces[i])})}setNamespaces(i){const{namespaces:r,optionalNamespaces:s,sessionProperties:a}=i;r&&Object.keys(r).length&&(this.namespaces=r),s&&Object.keys(s).length&&(this.optionalNamespaces=s),this.sessionProperties=a,this.persist("namespaces",r),this.persist("optionalNamespaces",s)}validateChain(i){const[r,s]=i?.split(":")||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,s];if(r&&!Object.keys(this.namespaces||{}).map(m=>kn(m)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&s)return[r,s];const a=kn(Object.keys(this.namespaces)[0]),l=this.rpcProviders[a].getDefaultChain();return[a,l]}async requestAccounts(){const[i]=this.validateChain();return await this.getProvider(i).requestAccounts()}onChainChanged(i,r=!1){var s;if(!this.namespaces)return;const[a,l]=this.validateChain(i);r||this.getProvider(a).setDefaultChain(l),((s=this.namespaces[a])!=null?s:this.namespaces[`${a}:${l}`]).defaultChain=l,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",l)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(i,r){this.client.core.storage.setItem(`${dl}/${i}`,r)}async getFromStore(i){return await this.client.core.storage.getItem(`${dl}/${i}`)}}const Lb=wc,jb="wc",$b="ethereum_provider",Mb=`${jb}@2:${$b}:`,qb="https://rpc.walletconnect.com/v1/",ac=["eth_sendTransaction","personal_sign"],Ub=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],oc=["chainChanged","accountsChanged"],zb=["message","disconnect","connect"];var kb=Object.defineProperty,Hb=Object.defineProperties,Vb=Object.getOwnPropertyDescriptors,wl=Object.getOwnPropertySymbols,Kb=Object.prototype.hasOwnProperty,Bb=Object.prototype.propertyIsEnumerable,bl=(h,i,r)=>i in h?kb(h,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):h[i]=r,Hn=(h,i)=>{for(var r in i||(i={}))Kb.call(i,r)&&bl(h,r,i[r]);if(wl)for(var r of wl(i))Bb.call(i,r)&&bl(h,r,i[r]);return h},El=(h,i)=>Hb(h,Vb(i));function oa(h){return Number(h[0].split(":")[1])}function Xo(h){return`0x${h.toString(16)}`}function Gb(h){const{chains:i,optionalChains:r,methods:s,optionalMethods:a,events:l,optionalEvents:m,rpcMap:b}=h;if(!ln(i))throw new Error("Invalid chains");const I={chains:i,methods:s||ac,events:l||oc,rpcMap:Hn({},i.length?{[oa(i)]:b[oa(i)]}:{})},T=l?.filter(Z=>!oc.includes(Z)),U=s?.filter(Z=>!ac.includes(Z));if(!r&&!m&&!a&&!(T!=null&&T.length)&&!(U!=null&&U.length))return{required:i.length?I:void 0};const Y=T?.length&&U?.length||!r,X={chains:[...new Set(Y?I.chains.concat(r||[]):r)],methods:[...new Set(I.methods.concat(a!=null&&a.length?a:Ub))],events:[...new Set(I.events.concat(m||zb))],rpcMap:b};return{required:i.length?I:void 0,optional:r.length?X:void 0}}class bc{constructor(){this.events=new vr.exports.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=Mb,this.on=(i,r)=>(this.events.on(i,r),this),this.once=(i,r)=>(this.events.once(i,r),this),this.removeListener=(i,r)=>(this.events.removeListener(i,r),this),this.off=(i,r)=>(this.events.off(i,r),this),this.parseAccount=i=>this.isCompatibleChainId(i)?this.parseAccountId(i).address:i,this.signer={},this.rpc={}}static async init(i){const r=new bc;return await r.initialize(i),r}async request(i){return await this.signer.request(i,this.formatChainId(this.chainId))}sendAsync(i,r){this.signer.sendAsync(i,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(i){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(i);const{required:r,optional:s}=Gb(this.rpc);try{const a=await new Promise(async(m,b)=>{var I;this.rpc.showQrModal&&((I=this.modal)==null||I.subscribeModal(T=>{!T.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),b(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(El(Hn({namespaces:Hn({},r&&{[this.namespace]:r})},s&&{optionalNamespaces:{[this.namespace]:s}}),{pairingTopic:i?.pairingTopic})).then(T=>{m(T)}).catch(T=>{b(new Error(T.message))})});if(!a)return;const l=x_(a.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:l),this.setAccounts(l),this.events.emit("connect",{chainId:Xo(this.chainId)})}catch(a){throw this.signer.logger.error(a),a}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",i=>{const{params:r}=i,{event:s}=r;s.name==="accountsChanged"?(this.accounts=this.parseAccounts(s.data),this.events.emit("accountsChanged",this.accounts)):s.name==="chainChanged"?this.setChainId(this.formatChainId(s.data)):this.events.emit(s.name,s.data),this.events.emit("session_event",i)}),this.signer.on("chainChanged",i=>{const r=parseInt(i);this.chainId=r,this.events.emit("chainChanged",Xo(this.chainId)),this.persist()}),this.signer.on("session_update",i=>{this.events.emit("session_update",i)}),this.signer.on("session_delete",i=>{this.reset(),this.events.emit("session_delete",i),this.events.emit("disconnect",El(Hn({},tr("USER_DISCONNECTED")),{data:i.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",i=>{var r,s;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(s=this.modal)==null||s.openModal({uri:i})),this.events.emit("display_uri",i)})}switchEthereumChain(i){this.request({method:"wallet_switchEthereumChain",params:[{chainId:i.toString(16)}]})}isCompatibleChainId(i){return typeof i=="string"?i.startsWith(`${this.namespace}:`):!1}formatChainId(i){return`${this.namespace}:${i}`}parseChainId(i){return Number(i.split(":")[1])}setChainIds(i){const r=i.filter(s=>this.isCompatibleChainId(s)).map(s=>this.parseChainId(s));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",Xo(this.chainId)),this.persist())}setChainId(i){if(this.isCompatibleChainId(i)){const r=this.parseChainId(i);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(i){const[r,s,a]=i.split(":");return{chainId:`${r}:${s}`,address:a}}setAccounts(i){this.accounts=i.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(i){var r,s;const a=(r=i?.chains)!=null?r:[],l=(s=i?.optionalChains)!=null?s:[],m=a.concat(l);if(!m.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const b=a.length?i?.methods||ac:[],I=a.length?i?.events||oc:[],T=i?.optionalMethods||[],U=i?.optionalEvents||[],Y=i?.rpcMap||this.buildRpcMap(m,i.projectId),X=i?.qrModalOptions||void 0;return{chains:a?.map(Z=>this.formatChainId(Z)),optionalChains:l.map(Z=>this.formatChainId(Z)),methods:b,events:I,optionalMethods:T,optionalEvents:U,rpcMap:Y,showQrModal:!!(i!=null&&i.showQrModal),qrModalOptions:X,projectId:i.projectId,metadata:i.metadata}}buildRpcMap(i,r){const s={};return i.forEach(a=>{s[a]=this.getRpcUrl(a,r)}),s}async initialize(i){if(this.rpc=this.getRpcConfig(i),this.chainId=this.rpc.chains.length?oa(this.rpc.chains):oa(this.rpc.optionalChains),this.signer=await Lb.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:i.disableProviderPing,relayUrl:i.relayUrl,storageOptions:i.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:s}=await S_(()=>import("./index.aafdaad8.js").then(a=>a.i),["assets/index.aafdaad8.js","assets/index.9e57d5da.js","assets/index.40badad3.css"]);r=s}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(Hn({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(s){throw this.signer.logger.error(s),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(i){if(!i)return;const{chains:r,optionalChains:s,rpcMap:a}=i;r&&ln(r)&&(this.rpc.chains=r.map(l=>this.formatChainId(l)),r.forEach(l=>{this.rpc.rpcMap[l]=a?.[l]||this.getRpcUrl(l)})),s&&ln(s)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=s?.map(l=>this.formatChainId(l)),s.forEach(l=>{this.rpc.rpcMap[l]=a?.[l]||this.getRpcUrl(l)}))}getRpcUrl(i,r){var s;return((s=this.rpc.rpcMap)==null?void 0:s[i])||`${qb}?chainId=eip155:${i}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const i=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${i}`]?this.session.namespaces[`${this.namespace}:${i}`]:this.session.namespaces[this.namespace];this.setChainIds(i?[this.formatChainId(i)]:r?.accounts),this.setAccounts(r?.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(i){return typeof i=="string"||i instanceof String?[this.parseAccount(i)]:i.map(r=>this.parseAccount(r))}}const Qb=bc;export{Qb as EthereumProvider,zb as OPTIONAL_EVENTS,Ub as OPTIONAL_METHODS,oc as REQUIRED_EVENTS,ac as REQUIRED_METHODS,bc as default};
